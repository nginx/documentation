<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>  
  <style>
    body {
       
      visibility: hidden;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
  </style>
  
  <noscript>
    <style>
       
      body {
        visibility: visible;
      }
    </style>
  </noscript>
  


  <script>

    const setTheme = (isNewTheme) => {
      localStorage.setItem("useNewTheme", `${isNewTheme}`);
      
      const v1cssIds = [
        "cssFA1",
        "cssFA2",
        "cssFA3",
        "cssBootstrap",
        "css1",
        "css2",
        "css3",
        "css4",
        "css5",
        "css6",
      ];

      v1cssIds.forEach((cssId) => {
        const element = document.getElementById(cssId);
        if (element !== null) {
          element.disabled = isNewTheme;
        }
      });

      const v2cssIds = ["css7", "css9"];
      v2cssIds.forEach((cssId) => {
        const element = document.getElementById(cssId);
        if (element !== null) {
          element.disabled = !isNewTheme;
        }
      });

      
      const v1ElementIds = ["sidebar", "footer", "toc", "api", "search-v1", "breadcrumb-v1", "list-v1"]

      v1ElementIds.forEach((elementId) => {
        const element = document.getElementById(elementId);
        if (element !== null) {
          element.style.display = isNewTheme ? "none" : "";
        }

        const trustarc = document.getElementById("teconsent-v1");
        if (trustarc) {
          trustarc.id = isNewTheme ? "teconsent-v1" : "teconsent";
        }
      });

      document.querySelectorAll(".table-v1").forEach((table) => {
        table.style.display = isNewTheme ? "none" : "";
      });

      const notMfElements = ['[data-mf="false"]'];
      notMfElements.forEach((elementId) => {
        document.querySelectorAll(elementId).forEach((element) => {
          element.style.display = isNewTheme ? "none" : "";
        });
      })

      const mfElements = ['[data-mf="true"]'];
      mfElements.forEach((elementId) => {
        document.querySelectorAll(elementId).forEach((element) => {
          element.style.display = isNewTheme ? "" : "none";

          const trustarc = document.getElementById("teconsent-v2");
          if (trustarc) {
            trustarc.id = isNewTheme ? "teconsent" : "teconsent-v2";
          }
        });
      });

      document.getElementById("body").style.visibility = "visible";
    };

    const toggleTheme = () => {
      setTheme(!(localStorage.getItem("useNewTheme") === "true"));
    };

    
    const mf = toggleTheme;
    const useNewTheme = toggleTheme;

    document.addEventListener("DOMContentLoaded", () => {
      setTheme(localStorage.getItem("useNewTheme") === "true");
    });

    function gameCode(callback) {
      let kkeys = [];
      
      const code = "38,38,40,40,37,39,37,39,66,65";
      return (event) => {
        kkeys.push(event.keyCode);
        if (kkeys.toString().indexOf(code) >= 0) {
          callback(event);
          kkeys = [];
        }
      };
    }
    const handler = gameCode(() => {
      mf();
    });
    window.addEventListener("keydown", handler);

  </script>

  

  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Set up WAF configuration management | DEV -- docs-nginx-com</title>


<meta name="description" content="Learn how to set up F5 NGINX Instance Manager to manage NGINX App Protect WAF configurations, including compiler installation, security policy onboarding, and threat update management.">





<link rel="canonical" href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/setup-waf-config-management/">







<meta property="article:publisher" content="https://www.facebook.com/nginxinc" />
<meta property="og:image" content="http://localhost:1313/images/icons/NGINX-Docs-new-docs-dark-1200x630.png" />
<meta property="og:image:width" content="500" />
<meta property="og:image:height" content="300" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="Learn how to set up F5 NGINX Instance Manager to manage NGINX App Protect WAF configurations, including compiler installation, security policy onboarding, and threat update management." />
<meta name="twitter:title" content="Set up WAF configuration management" />
<meta name="twitter:site" content="@nginx" />
<meta name="twitter:image" content="http://localhost:1313/images/icons/NGINX-Docs-new-docs-dark-1200x630.png" />
<meta name="twitter:creator" content="@nginx" />

<meta http-equiv="last-modified" content="30/04/2025" />




<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'
    https://consent.trustarc.com/ https://mktg.tags.f5.com/basic/prod/utag.sync.js https://static.cloud.coveo.com/ https://*.f5.com/
    https://*.netlify.app https://gist.github.com
    https://tag.demandbase.com/pscSDsz4.min.js
    https://munchkin.brightfunnel.com/js/build/bf-munchkin.min.js
    https://www.googletagmanager.com/gtm.js
    https://www.google-analytics.com/
    https://www.google-analytics.com/analytics.js
    https://www.google-analytics.com/plugins/ua/linkid.js
    https://cdn.bizible.com/scripts/bizible.js
    https://cdn.bizible.com/xdc.js
    https://f5networksglobalprod.122.2o7.net/
    https://f5networksnginxdocs.122.2o7.net/
    https://*.siteintercept.qualtrics.com/SIE/?Q_ZID=*
    https://siteintercept.qualtrics.com/
    ;
    worker-src 'self' blob:">



<meta property="environment" type="development" />
<meta property="buildtype" type="webdocs" />
<meta property="isServer" type="true" />


<meta name="product" content="DEV -- docs-nginx-com">
<meta name="version" content="">
<meta name="doc_type" content="Manual">
  
  <link rel="shortcut icon" type="image/x-icon" href="http://localhost:1313/images/favicon-48x48.ico">

  
  










<link href="/css/v2/style.css" integrity="" rel="stylesheet" type="text/css" id="css7"
  disabled>


<link href="/css/inter/inter.987d1be34797653eabce3627efb116c263d4045fd5badfe003ff283c5a5da435d83a3fad6bfe524e3ce3cf8a41168a30e7aa42507961257eeb275024def0f9b9.css" integrity="sha512-mH0b40eXZT6rzjYn77EWwmPUBF/Vut/gA/8oPFpdpDXYOj&#43;ta/5STjzjz4pBFoow56pCUHlhJX7rJ1Ak3vD5uQ==" rel="stylesheet" type="text/css"
  id="cssInter">


<link href="/css/v2/highlight.min.9ef7c7ad221175216abc8a5827f967bcd7c0e035bfa91180acd26a2c36d54242ae5f485986c260d70b1bbdf225ad76cdbba3179afa7e4335282cc3080a17e337.css" rel="stylesheet" type="text/css" id="css9">





<link href="/fontawesome/css/all.min.4a71f958af9b67180f1ece38b96217f8b2c9009f7fd8f90f299e508808fa4daf3ac3e7ec6f64e47267d1c955f7a419cc15c57ba103c9925f507af4825abdd6e8.css" integrity="sha512-SnH5WK&#43;bZxgPHs44uWIX&#43;LLJAJ9/2PkPKZ5QiAj6Ta86w&#43;fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" rel="stylesheet" type="text/css"
  id="cssFA1">


<link href="/fontawesome/css/v4-font-face.min.5870089ba06cf03e9721f87919eaf15c961a65e071845949ed2da58c5bfbd18a714c5dab2c155f0455ebcd2f45bfd598a5e47ae19976e7aa3a51e22914eac1b6.css" integrity="sha512-WHAIm6Bs8D6XIfh5GerxXJYaZeBxhFlJ7S2ljFv70YpxTF2rLBVfBFXrzS9Fv9WYpeR64Zl256o6UeIpFOrBtg==" rel="stylesheet" type="text/css"
  id="cssFA2">


<link href="/fontawesome/css/v5-font-face.min.81bdf1c9f8ff16b1eda613d52d868a059f16c8c6045c3d7e0a0b771622a11666cdd94b8ea62b5edb0d4b826c3a3737ec3663065fe05b56b6b871e57de73f556b.css" integrity="sha512-gb3xyfj/FrHtphPVLYaKBZ8WyMYEXD1&#43;Cgt3FiKhFmbN2UuOpite2w1Lgmw6NzfsNmMGX&#43;BbVra4ceV95z9Vaw==" rel="stylesheet" type="text/css"
  id="cssFA3">



<link href="/css/bootstrap.min.3f9320327d6304dd356ac060534cfad10938431897a3cebec2515a84aaec41fdfb73d72ba39d7b5b35523cf575b432b3864bb6889d855602faef01b4dd21a734.css" integrity="sha512-P5MgMn1jBN01asBgU0z60Qk4QxiXo86&#43;wlFahKrsQf37c9cro517WzVSPPV1tDKzhku2iJ2FVgL67wG03SGnNA==" rel="stylesheet"
  type="text/css" id="cssBootstrap">



<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.10104/0/css/CoveoFullSearch.min.css"
  integrity="sha512-9/A9yVCU4GS6/iIwTRJKnan4Hf8gDKj3anwItN9QCsU8SixaT5xkjjWsZ/iq0TWaizhtqOLacadXJfxHlwYCcA=="
  crossorigin="anonymous" />


<link
  rel="stylesheet"
  href="https://static.cloud.coveo.com/atomic/v3.19.0/themes/coveo.css"
  integrity="sha512-m2BufPi8Tc6H2jcQfDj/PIl5H57C9jeqhbDFgFXKTtOhoC4S7ULXmx74FseZ8WXpfdT9uyccMHDBJDrIZlrUUQ=="
  crossorigin="anonymous"/>


<link href="/css/docs-nginx-com/nginx-site-header.min.80b10ed49ecfad93607ee771acca88d13dc958e6eecc642af3aa2b170c86b8dcce442e7b86c3e5298c95b0ab2b053a71074c2f15c28266c3a2c502275415b3a7.css" rel="stylesheet" type="text/css" id="css1">


<link href="/css/docs-nginx-com/style.min.2cd4748c438c49d012a5fdc6b98770223c4875fe0f89517b17423b6a5328af4d93d9d772207bfc51d9449781281e1eb8707dcc2f7467e6e24330c9b8c7c5f734.css" rel="stylesheet" type="text/css" id="css2">


<link href="/css/bootstrap-docs.min.8a70c94c72e3783cecd631bc1705c7843b2fdef99f1549f0bf7f774a4083173ee25974413a8206c2340c0fee9bb7a07acd41d41c78ae2280c96a2ce0faca2847.css" rel="stylesheet" type="text/css" id="css3">



<link href="/css/coveo.min.fce7d4df31de99e4f86510a90915820f236b8dcd02be030b27529af7ff10189f807c78cedacb91afa9d07f310a172c6046b1921832f199b9158898a7f74fa117.css" rel="stylesheet" type="text/css" id="css6">



<link href="/css/f5-hugo.min.42feae8b135e9380a66db9c3cb2803221888524a29f41cbc55790b5cb5a309ac7e6dd80e70ed0260370fd93c04b7aa8a5c3d6aca0964804341fad51cfcec963f.css" rel="stylesheet" type="text/css" id="css4">


<link href="/css/inline-overrides.min.495e6889d9955581580c654bad961bb33af6344b283af7e9a34648c5e8d5f1fe90efb8aac33359c4178efd36cd7cb92c7c6458d4175caff9c284b14bd9d2b97a.css" rel="stylesheet" type="text/css" id="css8">





<link href="/css/highlight.min.fe5647c4b67f4b3fcf0ea60b483479d567ba1b05ee6e816439207edfa3d310dbee79536278c67d89c1db5da275bde962a10163da375f05bd19743e2a80e1ad02.css" rel="stylesheet" type="text/css" id="css5">
  
  
  
  
  
  
        
  <script async="async" src="https://consent.trustarc.com/notice?domain=f5.com&c=teconsent&js=nj&noticeType=bb&text=true&gtm=1" crossorigin=""></script>
  
  

<script src="https://mktg.tags.f5.com/basic/prod/utag.sync.js"></script> 


  
  
  
  
  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-K5HG9JT');</script>
  
  </head>
  
  <body id="body">
    
   
<script type="text/javascript"> 
    (function(a,b,c,d) { 
        a='//mktg.tags.f5.com/basic/prod/utag.js'; 
        b=document;c='script';d=b.createElement(c);d.src=a; 
        d.type='text/java'+c;d.async=true; 
        a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a)})(); 
</script> 
    
  
    <header>
      
<div class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar navbar-fixed-top">
  <div class="container-fluid flex-md-row flex-column header-container">
    <a class="navbar-brand mr-0 mr-md-2" href="/" aria-label="NGINX Docs">
      <img class="navbar-img" src="http://localhost:1313/images/icons/NGINX-Docs-horiz-white-type.svg" alt="NGINX Docs">
    </a>
    
      <div class="navbar navbar-nav">
        
        <div id="searchbox">
          
          <div class="CoveoSearchbox" data-placeholder='Search NGINX Docs...'></div>
        </div>
        <atomic-search-interface id="search-standalone-header" data-mf="true" style="display:none;">
          <atomic-search-box redirection-url="/search.html">
          </atomic-search-box>
        </atomic-search-interface>
      </div>
    
    
    
    
    <ul class="navbar navbar-nav">
        <li class="nav-item-explore active">
          <button id="navbar-sites-button" class="button navbar-button">
              F5 Sites
              <i id="navbar-sites-button-icon" class="link-chevron-icon fa-solid fa-chevron-down"></i>
          </button>
          <div class="dropdown-content" id="dropdown-content">
            <ul>
              
                <li>
                  <a href="https://community.f5.com/" target="_blank" >DevCentral</a>
                  <p>Connect &amp; learn in our hosted community</p>
                </li>
              
                <li>
                  <a href="https://my.f5.com/" target="_blank" >MyF5</a>
                  <p>Your key to everything F5, including support, registration keys, and subscriptions</p>
                </li>
              
                <li>
                  <a href="https://nginx.org/" target="_blank" >NGINX</a>
                  <p>Learn more about NGINX Open Source and read the community blog</p>
                </li>
              
            </ul>
          </div>
        </li>
    </ul>
  </div>
</div>


    </header>
  
    <section class="base-layout" data-testid="base-layout">
      <section id="breadcrumb-v1">
        
          
          <nav aria-label="breadcrumb" class="breadcrumb navbar">
    <div class="nav flex-md-row">
        <ol class="breadcrumb">
            
            
            
            
                
            
            
                
            
            
                
            
            
                
            
            
            
                <li><a href="/">Home</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-instance-manager/">NGINX Instance Manager</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-instance-manager/nginx-app-protect/">NGINX App Protect WAF</a><i class="fas fa-chevron-right"></i></li>
                
            
                Set up WAF configuration management
        </ol>
    </div>
</nav>
  
          
        
      </section>
  
      <div class="main container-fluid min-page-height" data-menu-id="/nginx-instance-manager/nginx-app-protect/setup-waf-config-management/">
        
<div class="docs-container row override-sidebar-collapse">
<div class="docs-container row override-sidebar-collapse">
  <nav id="sidebar" class="sidenav overflow-auto col-md-3 d-none d-xl-block d-print-none align-top">
    

<div id="sidebar-wrapper">
     <div id="sidebar" class="sidebar" aria-label="Sidebar navigation">
        <button id="sidebar-toggle-button" title="Toggle sidebar navigation" role="button" aria-controls="sidebar-content">
           <i class="fa fa-chevron-right sidebar-visible-collapsed"></i>
           <i class="fa fa-chevron-left sidebar-visible-expanded"></i>
        </button>
        <div id="sidebar-content">
            <h3>
                <a class="sidebar-title" href="http://localhost:1313/nginx-instance-manager/" alt="NGINX Instance Manager"><img
                        class="card-img-top" src="http://localhost:1313//images/icons/NGINX-Instance-Manager-product-icon.png"
                        alt="NGINX Instance Manager">
                    NGINX Instance Manager</a>
            </h3>
            <ul>
            
            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/fundamentals/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--fundamentals" aria-controls="nim--fundamentals">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Fundamentals</a>
                            </li>
                        </div>
                        <div id="nim--fundamentals" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/fundamentals/tech-specs/"
                                                                href="http://localhost:1313/nginx-instance-manager/fundamentals/tech-specs/">Technical Specifications</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/fundamentals/dashboard-overview/"
                                                                href="http://localhost:1313/nginx-instance-manager/fundamentals/dashboard-overview/">NGINX Instance Manager dashboard</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/fundamentals/api-overview/"
                                                                href="http://localhost:1313/nginx-instance-manager/fundamentals/api-overview/">Overview: NGINX Instance Manager REST API</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/deploy/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--deploy" aria-controls="nim--deploy">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Deploy</a>
                            </li>
                        </div>
                        <div id="nim--deploy" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/deploy/docker/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--deploy--docker">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Docker</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--deploy--docker" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/docker/deploy-nginx-instance-manager-docker-compose/" href="http://localhost:1313/nginx-instance-manager/deploy/docker/deploy-nginx-instance-manager-docker-compose/">Deploy using Docker Compose</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/docker/deploy-nginx-plus-and-agent-docker/" href="http://localhost:1313/nginx-instance-manager/deploy/docker/deploy-nginx-plus-and-agent-docker/">Deploy NGINX Plus in a container (data plane)</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/deploy/kubernetes/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--deploy--kubernetes">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Kubernetes</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--deploy--kubernetes" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/kubernetes/deploy-using-helm/" href="http://localhost:1313/nginx-instance-manager/deploy/kubernetes/deploy-using-helm/">Deploy using Helm</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/kubernetes/helm-config-settings/" href="http://localhost:1313/nginx-instance-manager/deploy/kubernetes/helm-config-settings/">Configurable Helm settings</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/kubernetes/frequently-used-helm-configs/" href="http://localhost:1313/nginx-instance-manager/deploy/kubernetes/frequently-used-helm-configs/">Frequently used Helm configurations</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/deploy/infrastructure-as-code/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--deploy--infrastructure-as-code">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Infrastructure as Code</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--deploy--infrastructure-as-code" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/infrastructure-as-code/overview/" href="http://localhost:1313/nginx-instance-manager/deploy/infrastructure-as-code/overview/">Overview</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/infrastructure-as-code/configuration/" href="http://localhost:1313/nginx-instance-manager/deploy/infrastructure-as-code/configuration/">Install with Ansible</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/infrastructure-as-code/build-and-deploy/" href="http://localhost:1313/nginx-instance-manager/deploy/infrastructure-as-code/build-and-deploy/">Build and deploy images</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/deploy/vm-bare-metal/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--deploy--virtual-machine-or-bare-metal">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Virtual Machine or Bare Metal</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--deploy--virtual-machine-or-bare-metal" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/vm-bare-metal/install/" href="http://localhost:1313/nginx-instance-manager/deploy/vm-bare-metal/install/">Install on a virtual machine or bare metal using a script</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/deploy/vm-bare-metal/install-nim-deprecated/" href="http://localhost:1313/nginx-instance-manager/deploy/vm-bare-metal/install-nim-deprecated/">Manually install on a virtual machine or bare metal (deprecated)</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/disconnected/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--disconnected-environments" aria-controls="nim--disconnected-environments">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Disconnected environments</a>
                            </li>
                        </div>
                        <div id="nim--disconnected-environments" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/disconnected/offline-install-guide/"
                                                                href="http://localhost:1313/nginx-instance-manager/disconnected/offline-install-guide/">Install in a disconnected environment using a script</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/disconnected/offline-install-guide-deprecated/"
                                                                href="http://localhost:1313/nginx-instance-manager/disconnected/offline-install-guide-deprecated/">Manually install in a disconnected environment (deprecated)</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/disconnected/add-license-disconnected-deployment/"
                                                                href="http://localhost:1313/nginx-instance-manager/disconnected/add-license-disconnected-deployment/">Add a license in a disconnected environment</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/disconnected/report-usage-disconnected-deployment/"
                                                                href="http://localhost:1313/nginx-instance-manager/disconnected/report-usage-disconnected-deployment/">Report usage to F5 in a disconnected environment</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/admin-guide/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--platform-administration" aria-controls="nim--platform-administration">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Platform administration</a>
                            </li>
                        </div>
                        <div id="nim--platform-administration" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/admin-guide/license/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--admin-guide--license-and-usage-reporting">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>License and usage reporting</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--admin-guide--license-and-usage-reporting" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/license/add-license/" href="http://localhost:1313/nginx-instance-manager/admin-guide/license/add-license/">Add license</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/license/report-usage-connected-deployment/" href="http://localhost:1313/nginx-instance-manager/admin-guide/license/report-usage-connected-deployment/">Report usage data to F5</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-management-suite/admin-guide/authentication/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--admin-guide--authentication">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Authentication</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--admin-guide--authentication" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <div class="accordion" id="Accordion3">
                                                            <div class="sidebar-l2-padding">
                                                                <div class="accordion-group sidebar-il-border">
                                                                    <div class="accordion-heading">
                                                                        <ul>
                                                                            <li class="nginx-toc-link l2">
                                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/authentication/basic-auth/" class="accordion-toggle"
                                                                                    aria-expanded="false" data-toggle="collapse"
                                                                                    href="#nim--authentication--basic-auth">
                                                                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Basic auth</a>
                                                                            </li>
                                                                        <ul>
                                                                    </div>
                                                                    <div id="nim--authentication--basic-auth" class="accordion-body collapse leaf">
                                                                        <div class="accordion-inner">
                                                                        
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/admin-guide/authentication/basic-auth/set-up-basic-authentication/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/basic-auth/set-up-basic-authentication/">Set up basic authentication</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    
                                                        
                                                        
                                                        <div class="accordion" id="Accordion3">
                                                            <div class="sidebar-l2-padding">
                                                                <div class="accordion-group sidebar-il-border">
                                                                    <div class="accordion-heading">
                                                                        <ul>
                                                                            <li class="nginx-toc-link l2">
                                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/authentication/oidc/" class="accordion-toggle"
                                                                                    aria-expanded="false" data-toggle="collapse"
                                                                                    href="#nim--authentication--oidc">
                                                                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>OIDC</a>
                                                                            </li>
                                                                        <ul>
                                                                    </div>
                                                                    <div id="nim--authentication--oidc" class="accordion-body collapse leaf">
                                                                        <div class="accordion-inner">
                                                                        
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/admin-guide/authentication/oidc/getting-started/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/getting-started/">Get started with OIDC</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/admin-guide/authentication/oidc/microsoft-entra-setup/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/microsoft-entra-setup/">Microsoft Entra: Set up OIDC authentication</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/admin-guide/authentication/oidc/microsoft-entra-automation/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/microsoft-entra-automation/">Automate OIDC with Microsoft Entra</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/admin-guide/authentication/oidc/keycloak-setup/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/keycloak-setup/">Keycloak: Set up OIDC authentication</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/admin-guide/authentication/oidc/scim-provisioning/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/scim-provisioning/">Provision users and groups using SCIM</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-management-suite/admin-guide/rbac/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--admin-guide--rbac">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>RBAC</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--admin-guide--rbac" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/rbac/overview-rbac/" href="http://localhost:1313/nginx-instance-manager/admin-guide/rbac/overview-rbac/">Overview: RBAC</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/rbac/create-roles/" href="http://localhost:1313/nginx-instance-manager/admin-guide/rbac/create-roles/">Create and manage roles</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/rbac/assign-roles/" href="http://localhost:1313/nginx-instance-manager/admin-guide/rbac/assign-roles/">Assign roles to users or user groups</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/rbac/manage-resource-groups/" href="http://localhost:1313/nginx-instance-manager/admin-guide/rbac/manage-resource-groups/">Manage resource groups</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/admin-guide/maintenance/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--admin-guide--maintenance">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Maintenance</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--admin-guide--maintenance" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/maintenance/backup-and-recovery/" href="http://localhost:1313/nginx-instance-manager/admin-guide/maintenance/backup-and-recovery/">Back up and restore</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/admin-guide/maintenance/sqlite-installation/" href="http://localhost:1313/nginx-instance-manager/admin-guide/maintenance/sqlite-installation/">Install SQLite (for NGINX Instance Manager 2.14.1 and earlier)</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/system-configuration/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--system-configuration" aria-controls="nim--system-configuration">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>System configuration</a>
                            </li>
                        </div>
                        <div id="nim--system-configuration" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/system-configuration/configure-with-config/"
                                                                href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-with-config/">Configure NGINX Instance Manager with nms.conf</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/system-configuration/configure-forward-proxy/"
                                                                href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-forward-proxy/">Configure NGINX Instance Manager to use a forward proxy</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/system-configuration/configure-high-availability/"
                                                                href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-high-availability/">Configure high availability (HA) for NGINX Instance Manager</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/system-configuration/configure-clickhouse/"
                                                                href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-clickhouse/">Configure ClickHouse</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/system-configuration/configure-vault/"
                                                                href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-vault/">Configure Vault for storing secrets</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/system-configuration/configure-selinux/"
                                                                href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-selinux/">Configure SELinux</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/system-configuration/configure-telemetry/"
                                                                href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-telemetry/">Configure telemetry and web analytics</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/system-configuration/configure-gateway/"
                                                                href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-gateway/">Optimize NGINX proxy gateway for large data planes</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/system-configuration/secure-traffic/"
                                                                href="http://localhost:1313/nginx-instance-manager/system-configuration/secure-traffic/">Secure Client Access and Network Traffic</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/monitoring/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--monitoring" aria-controls="nim--monitoring">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Monitoring</a>
                            </li>
                        </div>
                        <div id="nim--monitoring" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/monitoring/overview-metrics/"
                                                                href="http://localhost:1313/nginx-instance-manager/monitoring/overview-metrics/">Overview: NGINX instance metrics</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/monitoring/metrics-api/"
                                                                href="http://localhost:1313/nginx-instance-manager/monitoring/metrics-api/">Query the Metrics API</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/monitoring/view-events-metrics/"
                                                                href="http://localhost:1313/nginx-instance-manager/monitoring/view-events-metrics/">View events and metrics</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/monitoring/catalogs/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--monitoring--catalogs">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Catalogs</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--monitoring--catalogs" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/monitoring/catalogs/dimensions/" href="http://localhost:1313/nginx-instance-manager/monitoring/catalogs/dimensions/">Dimensions Catalog</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/monitoring/catalogs/events/" href="http://localhost:1313/nginx-instance-manager/monitoring/catalogs/events/">Events Catalog</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/monitoring/catalogs/metrics/" href="http://localhost:1313/nginx-instance-manager/monitoring/catalogs/metrics/">Metrics Catalog</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/nginx-configs/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--nginx-configs" aria-controls="nim--nginx-configs">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>NGINX configs</a>
                            </li>
                        </div>
                        <div id="nim--nginx-configs" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-configs/stage-configs/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-configs/stage-configs/">Stage NGINX configs</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-configs/publish-configs/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-configs/publish-configs/">Publish NGINX configs</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-configs/publish-configs-version-control/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-configs/publish-configs-version-control/">Publish NGINX configs with version control</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--nginx-configs--nginx-config-templates">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>NGINX config templates</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--nginx-configs--nginx-config-templates" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <div class="accordion" id="Accordion3">
                                                            <div class="sidebar-l2-padding">
                                                                <div class="accordion-group sidebar-il-border">
                                                                    <div class="accordion-heading">
                                                                        <ul>
                                                                            <li class="nginx-toc-link l2">
                                                                                <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/concepts/" class="accordion-toggle"
                                                                                    aria-expanded="false" data-toggle="collapse"
                                                                                    href="#nim--config-templates--overview">
                                                                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Overview</a>
                                                                            </li>
                                                                        <ul>
                                                                    </div>
                                                                    <div id="nim--config-templates--overview" class="accordion-body collapse leaf">
                                                                        <div class="accordion-inner">
                                                                        
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/concepts/config-templates/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/concepts/config-templates/">About NGINX config templates</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/concepts/default-base-template/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/concepts/default-base-template/">F5 Global Default base template</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/concepts/augment-templates/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/concepts/augment-templates/">Augment templates</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/concepts/template-resources/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/concepts/template-resources/">Template resource files</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    
                                                        
                                                        
                                                        <div class="accordion" id="Accordion3">
                                                            <div class="sidebar-l2-padding">
                                                                <div class="accordion-group sidebar-il-border">
                                                                    <div class="accordion-heading">
                                                                        <ul>
                                                                            <li class="nginx-toc-link l2">
                                                                                <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/how-to/" class="accordion-toggle"
                                                                                    aria-expanded="false" data-toggle="collapse"
                                                                                    href="#nim--config-templates--how-to">
                                                                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>How To</a>
                                                                            </li>
                                                                        <ul>
                                                                    </div>
                                                                    <div id="nim--config-templates--how-to" class="accordion-body collapse leaf">
                                                                        <div class="accordion-inner">
                                                                        
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/how-to/manage-nginx-configs-with-templates/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/how-to/manage-nginx-configs-with-templates/">Manage NGINX configs with templates</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/how-to/rbac-config-templates-and-submissions/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/how-to/rbac-config-templates-and-submissions/">RBAC for config templates and submissions</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    
                                                        
                                                        
                                                        <div class="accordion" id="Accordion3">
                                                            <div class="sidebar-l2-padding">
                                                                <div class="accordion-group sidebar-il-border">
                                                                    <div class="accordion-heading">
                                                                        <ul>
                                                                            <li class="nginx-toc-link l2">
                                                                                <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/tutorials/" class="accordion-toggle"
                                                                                    aria-expanded="false" data-toggle="collapse"
                                                                                    href="#nim--config-templates--tutorials">
                                                                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Tutorials</a>
                                                                            </li>
                                                                        <ul>
                                                                    </div>
                                                                    <div id="nim--config-templates--tutorials" class="accordion-body collapse leaf">
                                                                        <div class="accordion-inner">
                                                                        
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/tutorials/round-robin-reverse-proxy/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/tutorials/round-robin-reverse-proxy/">Round-robin reverse proxy with an augment template</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    
                                                        
                                                        
                                                        <div class="accordion" id="Accordion3">
                                                            <div class="sidebar-l2-padding">
                                                                <div class="accordion-group sidebar-il-border">
                                                                    <div class="accordion-heading">
                                                                        <ul>
                                                                            <li class="nginx-toc-link l2">
                                                                                <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/reference/" class="accordion-toggle"
                                                                                    aria-expanded="false" data-toggle="collapse"
                                                                                    href="#nim--config-templates--reference">
                                                                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Reference</a>
                                                                            </li>
                                                                        <ul>
                                                                    </div>
                                                                    <div id="nim--config-templates--reference" class="accordion-body collapse leaf">
                                                                        <div class="accordion-inner">
                                                                        
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx-instance-manager/nginx-configs/config-templates/reference/json-schema-reference/"
                                                                                        href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/reference/json-schema-reference/">JSON Schemas for Dynamic Web Forms</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/nginx-instances/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--nginx-instances" aria-controls="nim--nginx-instances">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>NGINX instances</a>
                            </li>
                        </div>
                        <div id="nim--nginx-instances" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-instances/scan-instances/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-instances/scan-instances/">Scan and discover NGINX instances</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-instances/manage-instance-groups/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-instances/manage-instance-groups/">Create and manage instance groups</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-instances/manage-certificates/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-instances/manage-certificates/">Manage SSL certificates</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-instances/add-tags/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-instances/add-tags/">Organize instances with tags</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/nginx-app-protect/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--nginx-app-protect-waf" aria-controls="nim--nginx-app-protect-waf">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>NGINX App Protect WAF</a>
                            </li>
                        </div>
                        <div id="nim--nginx-app-protect-waf" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-app-protect/overview-nap-waf-config-management/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/overview-nap-waf-config-management/">How WAF policy management works</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-app-protect/setup-waf-config-management/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/setup-waf-config-management/">Set up WAF configuration management</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-app-protect/manage-waf-security-policies/"
                                                                href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/manage-waf-security-policies/">Manage and deploy WAF policies and log profiles</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/nginx-app-protect/security-monitoring/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nim--nginx-app-protect--security-monitoring">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Security Monitoring</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nim--nginx-app-protect--security-monitoring" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/nginx-app-protect/security-monitoring/set-up-app-protect-instances/" href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/set-up-app-protect-instances/">Set up App Protect WAF instances for Security Monitoring</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/nginx-app-protect/security-monitoring/give-access-to-security-monitoring-dashboards/" href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/give-access-to-security-monitoring-dashboards/">Add user access to Security Monitoring dashboards</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/nginx-app-protect/security-monitoring/update-signatures/" href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/update-signatures/">Update the Attack Signature Database</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/nginx-app-protect/security-monitoring/update-geo-db/" href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/update-geo-db/">Update the geolocation database used in dashboards</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-instance-manager/nginx-app-protect/security-monitoring/troubleshooting/" href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/troubleshooting/">Troubleshooting</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/support/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--support" aria-controls="nim--support">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Support</a>
                            </li>
                        </div>
                        <div id="nim--support" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/support/support-package/"
                                                                href="http://localhost:1313/nginx-instance-manager/support/support-package/">Create a support package</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/support/k8s-support-package/"
                                                                href="http://localhost:1313/nginx-instance-manager/support/k8s-support-package/">Create a support package from a Helm installation</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/support/contact-support/"
                                                                href="http://localhost:1313/nginx-instance-manager/support/contact-support/">Where to go for support</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-instance-manager/releases/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nim--releases" aria-controls="nim--releases">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Releases</a>
                            </li>
                        </div>
                        <div id="nim--releases" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/releases/release-notes/"
                                                                href="http://localhost:1313/nginx-instance-manager/releases/release-notes/">Release notes</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-instance-manager/releases/known-issues/"
                                                                href="http://localhost:1313/nginx-instance-manager/releases/known-issues/">Known issues</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            

            </ul>
        
        </div>
    </div>
</div>

  </nav>

  
  
  <main class="content col d-block align-top content-has-toc" role="main">
  
    
  <section class="main-layout">
    <div class="sidebar-layout" id="sidebar-layout">
      <nav data-mf="true" id="sidebar-v2" class="sidebar" style="display:none;">
        


    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    





<atomic-search-interface id="search-standalone-sidebar" data-mf="true" style="display:none;">
    <atomic-search-box redirection-url="/search.html">
    </atomic-search-box>
</atomic-search-interface>
<button class="product-selector-button" id="product-selector-button">
    
    <div class="product-selector-name" id="product-selector-name">NGINX Instance Manager</div>
    <div class="product-selector-button-icon" id="product-selector-button-icon">
        <svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg" id="product-selector-chevron-icon">
            <path d="M1 13L7 7L0.999999 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="product-selector-chevron-icon"/>
        </svg>     
    </div>
</button>
<div class="product-selector" id="product-selector">
    
    
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX ONE</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-one">NGINX One Console</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx">NGINX Plus</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-instance-manager">NGINX Instance Manager</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-ingress-controller">NGINX Ingress Controller</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-gateway-fabric">NGINX Gateway Fabric</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="https://nginx.org/en/docs/">NGINX Open Source</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/solutions/">Subscription Licensing &amp; Solutions</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-agent">NGINX Agent</a>
                </li>
            
            </ul>
        </div>
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX APP PROTECT</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-app-protect-waf">NGINX App Protect WAF</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-app-protect-dos">NGINX App Protect DoS</a>
                </li>
            
            </ul>
        </div>
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX AS A SERVICE</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginxaas/azure/">NGINX as a Service for Azure</a>
                </li>
            
            </ul>
        </div>
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX OTHER</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="https://unit.nginx.org/">NGINX Unit</a>
                </li>
            
            </ul>
        </div>
    
</div>
<div class="scrollbar-container">
    <div class="sidebar-navigation">
        <ul class="parent-collapsible-content">
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-c8d053d5c70d1444836ac0a5b3f5ee1b" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-c8d053d5c70d1444836ac0a5b3f5ee1b" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Fundamentals 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/fundamentals/tech-specs/" style="">Technical Specifications </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/fundamentals/dashboard-overview/" style="">NGINX Instance Manager dashboard </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/fundamentals/api-overview/" style="">Overview: NGINX Instance Manager REST API </a>
            
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-fe36bf8a53e4024f5e40e85618c8f35e" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-fe36bf8a53e4024f5e40e85618c8f35e" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Deploy 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
            <input type="checkbox" id="toggle-dce668da7178480f803619d4a706feab" class="toggle-checkbox" style="display: none;">
            <label for="toggle-dce668da7178480f803619d4a706feab" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Docker 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/docker/deploy-nginx-instance-manager-docker-compose/" style="">Deploy using Docker Compose </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/docker/deploy-nginx-plus-and-agent-docker/" style="">Deploy NGINX Plus in a container (data plane) </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-bb9f0f08c35d20877b38f41d99cfc24b" class="toggle-checkbox" style="display: none;">
            <label for="toggle-bb9f0f08c35d20877b38f41d99cfc24b" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Kubernetes 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/kubernetes/deploy-using-helm/" style="">Deploy using Helm </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/kubernetes/helm-config-settings/" style="">Configurable Helm settings </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/kubernetes/frequently-used-helm-configs/" style="">Frequently used Helm configurations </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-2fe523d708f9be0f58e2f530ffd7b1d9" class="toggle-checkbox" style="display: none;">
            <label for="toggle-2fe523d708f9be0f58e2f530ffd7b1d9" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Infrastructure as Code 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/infrastructure-as-code/overview/" style="">Overview </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/infrastructure-as-code/configuration/" style="">Install with Ansible </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/infrastructure-as-code/build-and-deploy/" style="">Build and deploy images </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-93ad59b6de065c5117c1e37925daca3c" class="toggle-checkbox" style="display: none;">
            <label for="toggle-93ad59b6de065c5117c1e37925daca3c" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Virtual Machine or Bare Metal 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/vm-bare-metal/install/" style="">Install on a virtual machine or bare metal using a script </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/deploy/vm-bare-metal/install-nim-deprecated/" style="">Manually install on a virtual machine or bare metal (deprecated) </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-65f29a7c778f8b8767c9d88544534d7d" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-65f29a7c778f8b8767c9d88544534d7d" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Disconnected environments 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/disconnected/offline-install-guide/" style="">Install in a disconnected environment using a script </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/disconnected/offline-install-guide-deprecated/" style="">Manually install in a disconnected environment (deprecated) </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/disconnected/add-license-disconnected-deployment/" style="">Add a license in a disconnected environment </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/disconnected/report-usage-disconnected-deployment/" style="">Report usage to F5 in a disconnected environment </a>
            
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-72447c3a4519ae61b307c206f04a65ef" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-72447c3a4519ae61b307c206f04a65ef" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Platform administration 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
            <input type="checkbox" id="toggle-b9ae06a80c38ca79b4e5b5ba61bc84fc" class="toggle-checkbox" style="display: none;">
            <label for="toggle-b9ae06a80c38ca79b4e5b5ba61bc84fc" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                License and usage reporting 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/license/add-license/" style="">Add license </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/license/report-usage-connected-deployment/" style="">Report usage data to F5 </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-9076edd04c4b13092f66c377d726647b" class="toggle-checkbox" style="display: none;">
            <label for="toggle-9076edd04c4b13092f66c377d726647b" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Authentication 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
            <input type="checkbox" id="toggle-a237d5899034e25bb46299c8ac5fa55b" class="toggle-checkbox" style="display: none;">
            <label for="toggle-a237d5899034e25bb46299c8ac5fa55b" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Basic auth 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/basic-auth/set-up-basic-authentication/" style="">Set up basic authentication </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-46f16d98d33f96381177f8b365b9f3d8" class="toggle-checkbox" style="display: none;">
            <label for="toggle-46f16d98d33f96381177f8b365b9f3d8" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                OIDC 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/getting-started/" style="">Get started with OIDC </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/microsoft-entra-setup/" style="">Microsoft Entra: Set up OIDC authentication </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/microsoft-entra-automation/" style="">Automate OIDC with Microsoft Entra </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/keycloak-setup/" style="">Keycloak: Set up OIDC authentication </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/authentication/oidc/scim-provisioning/" style="">Provision users and groups using SCIM </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-9d482781ecf2376aa15bb88c8be3e729" class="toggle-checkbox" style="display: none;">
            <label for="toggle-9d482781ecf2376aa15bb88c8be3e729" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                RBAC 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/rbac/overview-rbac/" style="">Overview: RBAC </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/rbac/create-roles/" style="">Create and manage roles </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/rbac/assign-roles/" style="">Assign roles to users or user groups </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/rbac/manage-resource-groups/" style="">Manage resource groups </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-6630b69d7adce9d2343fe27ed1c31572" class="toggle-checkbox" style="display: none;">
            <label for="toggle-6630b69d7adce9d2343fe27ed1c31572" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Maintenance 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/maintenance/backup-and-recovery/" style="">Back up and restore </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/admin-guide/maintenance/sqlite-installation/" style="">Install SQLite (for NGINX Instance Manager 2.14.1 and earlier) </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-c6a850bd2e794fa2fc3da1f2033a0438" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-c6a850bd2e794fa2fc3da1f2033a0438" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        System configuration 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-with-config/" style="">Configure NGINX Instance Manager with nms.conf </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-forward-proxy/" style="">Configure NGINX Instance Manager to use a forward proxy </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-high-availability/" style="">Configure high availability (HA) for NGINX Instance Manager </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-clickhouse/" style="">Configure ClickHouse </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-vault/" style="">Configure Vault for storing secrets </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-selinux/" style="">Configure SELinux </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-telemetry/" style="">Configure telemetry and web analytics </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/system-configuration/configure-gateway/" style="">Optimize NGINX proxy gateway for large data planes </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/system-configuration/secure-traffic/" style="">Secure Client Access and Network Traffic </a>
            
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-1a9325bf0be37c95267cbfaaffea8045" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-1a9325bf0be37c95267cbfaaffea8045" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Monitoring 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/monitoring/overview-metrics/" style="">Overview: NGINX instance metrics </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/monitoring/metrics-api/" style="">Query the Metrics API </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/monitoring/view-events-metrics/" style="">View events and metrics </a>
            
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-8606a9b3afc19826993c87173b4e476c" class="toggle-checkbox" style="display: none;">
            <label for="toggle-8606a9b3afc19826993c87173b4e476c" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Catalogs 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/monitoring/catalogs/dimensions/" style="">Dimensions Catalog </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/monitoring/catalogs/events/" style="">Events Catalog </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/monitoring/catalogs/metrics/" style="">Metrics Catalog </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-f545c69239f33fe12c072014f3504d19" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-f545c69239f33fe12c072014f3504d19" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        NGINX configs 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/stage-configs/" style="">Stage NGINX configs </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/publish-configs/" style="">Publish NGINX configs </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/publish-configs-version-control/" style="">Publish NGINX configs with version control </a>
            
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-73bed6d1f6df5c748f2178228bc0401d" class="toggle-checkbox" style="display: none;">
            <label for="toggle-73bed6d1f6df5c748f2178228bc0401d" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                NGINX config templates 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
            <input type="checkbox" id="toggle-24c955002f0b0afc7193aac7bb218b77" class="toggle-checkbox" style="display: none;">
            <label for="toggle-24c955002f0b0afc7193aac7bb218b77" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Overview 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/concepts/config-templates/" style="">About NGINX config templates </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/concepts/default-base-template/" style="">F5 Global Default base template </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/concepts/augment-templates/" style="">Augment templates </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/concepts/template-resources/" style="">Template resource files </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-166eeceee9771d6cfa511e9b77b3e914" class="toggle-checkbox" style="display: none;">
            <label for="toggle-166eeceee9771d6cfa511e9b77b3e914" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                How To 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/how-to/manage-nginx-configs-with-templates/" style="">Manage NGINX configs with templates </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/how-to/rbac-config-templates-and-submissions/" style="">RBAC for config templates and submissions </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-b7c4a9c17891b5c105063fb0cdb74912" class="toggle-checkbox" style="display: none;">
            <label for="toggle-b7c4a9c17891b5c105063fb0cdb74912" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Tutorials 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/tutorials/round-robin-reverse-proxy/" style="">Round-robin reverse proxy with an augment template </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-f6e2ab057dc732ae407b606d0e35c5b1" class="toggle-checkbox" style="display: none;">
            <label for="toggle-f6e2ab057dc732ae407b606d0e35c5b1" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Reference 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-configs/config-templates/reference/json-schema-reference/" style="">JSON Schemas for Dynamic Web Forms </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-a506a3447f9b0f286ca1220041a6fb59" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-a506a3447f9b0f286ca1220041a6fb59" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        NGINX instances 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-instances/scan-instances/" style="">Scan and discover NGINX instances </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-instances/manage-instance-groups/" style="">Create and manage instance groups </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-instances/manage-certificates/" style="">Manage SSL certificates </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-instances/add-tags/" style="">Organize instances with tags </a>
            
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-c35c7589df87f4af336e1054d525ce49" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-c35c7589df87f4af336e1054d525ce49" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        NGINX App Protect WAF 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/overview-nap-waf-config-management/" style="">How WAF policy management works </a>
            
        
    </li>
    
    <li>
        
                                  
                <span class="box current partial" id="current-page"></span>                 
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/setup-waf-config-management/" style="font-weight: bold;">Set up WAF configuration management </a>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a>
      <ul>
        <li><a href="#before-you-begin">Before you begin</a></li>
        <li><a href="#limitations">Limitations</a></li>
      </ul>
    </li>
    <li><a href="#install-the-waf-compiler">Install the WAF compiler</a>
      <ul>
        <li><a href="#nap-waf-compiler-compatibility">WAF compiler and supported NGINX App Protect WAF versions</a></li>
        <li><a href="#debian-or-ubuntu">Debian or Ubuntu</a></li>
        <li><a href="#rhel-81-or-later">RHEL 8.1 or later</a></li>
        <li><a href="#rhel-74-or-later-centos">RHEL 7.4 or later; CentOS</a></li>
        <li><a href="#amazon-linux-2-lts">Amazon Linux 2 LTS</a></li>
        <li><a href="#oracle-linux-74-or-later">Oracle Linux 7.4 or later</a></li>
        <li><a href="#download-from-myf5">Download from MyF5</a></li>
        <li><a href="#automatically-download-and-install-new-waf-compiler">Automatically download and install new WAF compiler</a></li>
      </ul>
    </li>
    <li><a href="#set-up-attack-signatures-and-threat-campaigns">Set up attack signatures and threat campaigns</a>
      <ul>
        <li><a href="#automatically-download-latest-packages">Automatically Download Latest Packages</a></li>
        <li><a href="#manually-update-packages">Manually update packages</a></li>
        <li><a href="#update-the-security-monitoring-signature-database">Update the Security Monitoring signature database</a></li>
      </ul>
    </li>
    <li><a href="#set-up-compiler-resource-pruning">Set up compiler resource pruning</a></li>
    <li><a href="#onboard-nginx-app-protect-waf-instances">Onboard NGINX App Protect WAF instances</a>
      <ul>
        <li><a href="#install-nginx-agent">Install NGINX Agent</a></li>
        <li><a href="#configure-nginx-agent">Configure NGINX Agent</a></li>
        <li><a href="#verify-installation">Verify installation</a></li>
        <li><a href="#configure-docker-compose-for-nginx-app-protect-waf-v5">Configure Docker Compose for NGINX App Protect WAF v5</a></li>
      </ul>
    </li>
    <li><a href="#onboard-security-policies">Onboard security policies</a>
      <ul>
        <li><a href="#upload-custom-security-policies">Upload custom security policies</a></li>
      </ul>
    </li>
    <li><a href="#add-waf-config">Add WAF configuration to NGINX instances</a>
      <ul>
        <li><a href="#edit-the-nginx-configuration">Edit the NGINX configuration</a></li>
        <li><a href="#verify-configuration">Verify configuration</a></li>
      </ul>
    </li>
    <li><a href="#troubleshooting">Troubleshooting</a>
      <ul>
        <li><a href="#check-that-nginx-app-protect-waf-is-not-installed-on-the-nginx-instance-manager-host">Check that NGINX App Protect WAF is not installed on the NGINX Instance Manager host</a></li>
        <li><a href="#check-that-the-waf-compiler-version-matches-the-nginx-app-protect-waf-version">Check that the WAF compiler version matches the NGINX App Protect WAF version</a></li>
        <li><a href="#confirm-the-waf-compiler-is-working-correctly">Confirm the WAF compiler is working correctly</a></li>
        <li><a href="#confirm-nginx-agent-configuration-on-the-nginx-app-protect-waf-instance">Confirm NGINX Agent configuration on the NGINX App Protect WAF instance</a></li>
        <li><a href="#confirm-access-to-the-nginx-packages-repository">Confirm access to the NGINX packages repository</a></li>
      </ul>
    </li>
    <li><a href="#whats-next">What&rsquo;s Next</a></li>
  </ul>
</nav>
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/manage-waf-security-policies/" style="">Manage and deploy WAF policies and log profiles </a>
            
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-2f7c6e943241264aa8030bf3361ad47d" class="toggle-checkbox" style="display: none;">
            <label for="toggle-2f7c6e943241264aa8030bf3361ad47d" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Security Monitoring 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/set-up-app-protect-instances/" style="">Set up App Protect WAF instances for Security Monitoring </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/give-access-to-security-monitoring-dashboards/" style="">Add user access to Security Monitoring dashboards </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/update-signatures/" style="">Update the Attack Signature Database </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/update-geo-db/" style="">Update the geolocation database used in dashboards </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/troubleshooting/" style="">Troubleshooting </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-3e38183d9060ec6a265583df7cd66dd7" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-3e38183d9060ec6a265583df7cd66dd7" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Support 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/support/support-package/" style="">Create a support package </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/support/k8s-support-package/" style="">Create a support package from a Helm installation </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/support/contact-support/" style="">Where to go for support </a>
            
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-c7ac451ae80afe212c8a626f92268b53" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-c7ac451ae80afe212c8a626f92268b53" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Releases 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/releases/release-notes/" style="">Release notes </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-instance-manager/releases/known-issues/" style="">Known issues </a>
            
        
    </li>
    
</ul>
                
            </li>
        
        </ul>
    </div>
</div>
      </nav>
    </div>

    <section class="content-layout">
      <div data-cms-edit="content" class="text-content">
        <section class="breadcrumb-layout" data-mf="true" style="display: none;">
          
            
            <nav aria-label="breadcrumb" class="breadcrumb navbar">
    <div class="nav flex-md-row">
        <ol class="breadcrumb">
            
            
            
            
                
            
            
                
            
            
                
            
            
                
            
            
            
                <li><a href="/">Home</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-instance-manager/">NGINX Instance Manager</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-instance-manager/nginx-app-protect/">NGINX App Protect WAF</a><i class="fas fa-chevron-right"></i></li>
                
            
                Set up WAF configuration management
        </ol>
    </div>
</nav>
  
            
          
        </section>
        <h1>Set up WAF configuration management</h1>
        <h2 
id="overview">Overview  <a class="headerlink float-right" href="#overview" title="Overview"><i class="fas fa-link fa-xs"></i></a>
</h2><p>F5 NGINX Instance Manager helps you manage your NGINX App Protect WAF configurations, making it easier to stay secure. This guide walks you through how to set up NGINX Instance Manager to configure and manage NGINX App Protect WAF.</p>
<h3 
id="before-you-begin">Before you begin  <a class="headerlink float-right" href="#before-you-begin" title="Before you begin"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Make sure you&rsquo;ve completed the following prerequisites before you get started:</p>
<ul>
<li>
<p>You have one or more <a href="http://localhost:1313/nginx-app-protect-waf/">NGINX App Protect WAF</a> instances running. For supported versions, see <a href="http://localhost:1313/nginx-instance-manager/fundamentals/tech-specs/#support-for-nginx-app-protect-waf">Support for NGINX App Protect WAF</a>.</p>
<blockquote class="note">
  <div><strong>Note:</strong><br/> If you&rsquo;re using configuration management and Security Monitoring, follow the steps in the <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/set-up-app-protect-instances/" target="_blank" rel="noopener">setup guide</a> to set up your NGINX App Protect WAF instances first.</div>
</blockquote>

</li>
<li>
<p>You&rsquo;re running NGINX Instance Manager v2.6.0 or later. Make sure it&rsquo;s <a href="http://localhost:1313/nginx-instance-manager/deploy/vm-bare-metal/">installed</a>, licensed, and running.</p>
<p>If you have a subscription to NGINX App Protect WAF, you can find your license in the subscription details section of <a href="https://my.f5.com" target="_blank" rel="noopener">MyF5</a>.</p>
</li>
</ul>
<h3 
id="limitations">Limitations  <a class="headerlink float-right" href="#limitations" title="Limitations"><i class="fas fa-link fa-xs"></i></a>
</h3><p>NGINX Instance Manager doesnt support the following NGINX App Protect WAF features:</p>
<ul>
<li><a href="http://localhost:1313/nginx-app-protect-waf/v4/configuration-guide/configuration/#external-references">Policies with external references</a></li>
<li>Custom signatures</li>
</ul>
<hr>
<h2 
id="install-the-waf-compiler">Install the WAF compiler  <a class="headerlink float-right" href="#install-the-waf-compiler" title="Install the WAF compiler"><i class="fas fa-link fa-xs"></i></a>
</h2><p>NGINX Instance Manager can use the WAF compiler to precompile security configurations before deploying them to NGINX App Protect WAF instances. Precompiling configurations improves performance and reduces the risk of runtime errors.</p>
<p>Install the WAF compiler on the NGINX Instance Manager host only if you plan to compile configurations on the management plane. If youll compile on the data plane, you can skip this step.</p>
<p>Each version of NGINX App Protect WAF has a matching WAF compiler version. If you&rsquo;re managing multiple versions, install the corresponding WAF compiler for each one on the NGINX Instance Manager host.</p>
<p>The WAF compiler installs to the <code>/opt</code> directory. Make sure this directory has the correct permissions so the owner can write to it. A permission setting like <code>0755</code> is typically sufficient.</p>
<p>To keep track of instances running the same version, you can create <a href="http://localhost:1313/nginx-instance-manager/nginx-instances/manage-instance-groups/">instance groups</a>.</p>
<p>For an overview of how the WAF compiler works, see the <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/overview-nap-waf-config-management/#security-bundle">Security bundle compilation</a> topic.</p>
<h3 
id="nap-waf-compiler-compatibility">WAF compiler and supported NGINX App Protect WAF versions  <a class="headerlink float-right" href="#nap-waf-compiler-compatibility" title="WAF compiler and supported NGINX App Protect WAF versions"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The table below shows which WAF compiler version to use for each version of NGINX App Protect WAF:</p>





<table class="table table-striped table-bordered table-v1">
  <thead>
      <tr>
          <th style="text-align: left">NGINX App Protect WAF version</th>
          <th style="text-align: left">WAF compiler version</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">5.6.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.342.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.5.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.264.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.4.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.210.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.3.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.144.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.2.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.48.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.1.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.17.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.14.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.342.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.13.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.264.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.12.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.210.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.11.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.144.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.10.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.48.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.9.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.17.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.8.1</td>
          <td style="text-align: left">nms-nap-compiler-v4.815.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.8.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.762.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.7.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.641.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.6.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.583.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.5.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.457.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.4.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.402.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.3.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.279.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.2.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.218.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.1.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.100.1</td>
      </tr>
      <tr>
          <td style="text-align: left">4.0.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.2.0</td>
      </tr>
      <tr>
          <td style="text-align: left">3.12.2</td>
          <td style="text-align: left">nms-nap-compiler-v3.1088.2</td>
      </tr>
  </tbody>
</table>






  


<div data-mf="true" style="display: none;" class="table-v2 table table-striped table-bordered narrow">
    <table>
  <thead>
      <tr>
          <th style="text-align: left">NGINX App Protect WAF version</th>
          <th style="text-align: left">WAF compiler version</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">5.6.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.342.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.5.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.264.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.4.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.210.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.3.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.144.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.2.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.48.0</td>
      </tr>
      <tr>
          <td style="text-align: left">5.1.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.17.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.14.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.342.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.13.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.264.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.12.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.210.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.11.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.144.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.10.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.48.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.9.0</td>
          <td style="text-align: left">nms-nap-compiler-v5.17.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.8.1</td>
          <td style="text-align: left">nms-nap-compiler-v4.815.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.8.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.762.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.7.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.641.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.6.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.583.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.5.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.457.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.4.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.402.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.3.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.279.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.2.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.218.0</td>
      </tr>
      <tr>
          <td style="text-align: left">4.1.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.100.1</td>
      </tr>
      <tr>
          <td style="text-align: left">4.0.0</td>
          <td style="text-align: left">nms-nap-compiler-v4.2.0</td>
      </tr>
      <tr>
          <td style="text-align: left">3.12.2</td>
          <td style="text-align: left">nms-nap-compiler-v3.1088.2</td>
      </tr>
  </tbody>
</table>

</div>
<h3 
id="debian-or-ubuntu">Debian or Ubuntu  <a class="headerlink float-right" href="#debian-or-ubuntu" title="Debian or Ubuntu"><i class="fas fa-link fa-xs"></i></a>
</h3><p>To install the WAF compiler on Debian or Ubuntu, run the following command:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbdddde8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcbdddde8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
</div><p>If you want to install more than one version of the WAF compiler on the same system, append the <code>--force-overwrite</code> option to the install command after the first installation:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbe13178&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcbe13178">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install nms-nap-compiler-v5.342.0 -o Dpkg::Options::<span class="o">=</span><span class="s2">&#34;--force-overwrite&#34;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install nms-nap-compiler-v5.342.0 -o Dpkg::Options::<span class="o">=</span><span class="s2">&#34;--force-overwrite&#34;</span></span></span></code></pre></div>
</div><p>Restart the <code>nms-integrations</code> service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc825f30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc825f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
</div>
<h3 
id="rhel-81-or-later">RHEL 8.1 or later  <a class="headerlink float-right" href="#rhel-81-or-later" title="RHEL 8.1 or later"><i class="fas fa-link fa-xs"></i></a>
</h3><p>To install the WAF compiler on RHEL 8.1 or later:</p>
<ol>
<li>
<p>Download the <code>dependencies.repo</code> file to the <code>/etc/yum.repos.d</code> directory:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbe436e8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcbe436e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Enable the CodeReady Builder repository:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbe79630&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcbe79630">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms</span></span></code></pre></div>
</div></li>
<li>
<p>Install the WAF compiler:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbea68d8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcbea68d8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
</div></li>
<li>
<p>Restart the <code>nms-integrations</code> service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc825f30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc825f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
</div>
</li>
</ol>
<h3 
id="rhel-74-or-later-centos">RHEL 7.4 or later; CentOS  <a class="headerlink float-right" href="#rhel-74-or-later-centos" title="RHEL 7.4 or later; CentOS"><i class="fas fa-link fa-xs"></i></a>
</h3><p>To install the WAF compiler on RHEL 7.4 or later or CentOS:</p>
<ol>
<li>
<p>Download the <code>dependencies.repo</code> file to the <code>/etc/yum.repos.d</code> directory:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbedcc08&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcbedcc08">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Enable the RHEL 7 server repositories:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbf10ff8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcbf10ff8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum-config-manager --enable rhui-REGION-rhel-server-optional rhui-REGION-rhel-server-releases rhel-7-server-optional-rpms</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum-config-manager --enable rhui-REGION-rhel-server-optional rhui-REGION-rhel-server-releases rhel-7-server-optional-rpms</span></span></code></pre></div>
</div></li>
<li>
<p>Install the WAF compiler:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbf3fdf8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcbf3fdf8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
</div></li>
<li>
<p>Restart the <code>nms-integrations</code> service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc825f30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc825f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
</div>
</li>
</ol>
<h3 
id="amazon-linux-2-lts">Amazon Linux 2 LTS  <a class="headerlink float-right" href="#amazon-linux-2-lts" title="Amazon Linux 2 LTS"><i class="fas fa-link fa-xs"></i></a>
</h3><p>To install the WAF compiler on Amazon Linux 2 LTS:</p>
<ol>
<li>
<p>Download the required repo files to the <code>/etc/yum.repos.d</code> directory:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbf90320&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcbf90320">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/nms-amazon2.repo
</span></span><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-7.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/nms-amazon2.repo
</span></span><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-7.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Enable the Extra Packages for Enterprise Linux (EPEL) repository:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbfdf4c0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcbfdf4c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo amazon-linux-extras <span class="nb">enable</span> epel
</span></span><span class="line"><span class="cl">sudo yum clean metadata
</span></span><span class="line"><span class="cl">sudo yum install epel-release</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo amazon-linux-extras <span class="nb">enable</span> epel
</span></span><span class="line"><span class="cl">sudo yum clean metadata
</span></span><span class="line"><span class="cl">sudo yum install epel-release</span></span></code></pre></div>
</div></li>
<li>
<p>Install the WAF compiler:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc01bd80&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc01bd80">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
</div></li>
<li>
<p>Restart the <code>nms-integrations</code> service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc825f30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc825f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
</div>
</li>
</ol>
<h3 
id="oracle-linux-74-or-later">Oracle Linux 7.4 or later  <a class="headerlink float-right" href="#oracle-linux-74-or-later" title="Oracle Linux 7.4 or later"><i class="fas fa-link fa-xs"></i></a>
</h3><p>To install the WAF compiler on Oracle Linux 7.4 or later:</p>
<ol>
<li>
<p>Download the <code>dependencies.repo</code> file to the <code>/etc/yum.repos.d</code> directory:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc05c8a8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc05c8a8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Enable the <code>ol8_codeready_builder</code> repository:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc073fa8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc073fa8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum-config-manager --enable ol8_codeready_builder</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum-config-manager --enable ol8_codeready_builder</span></span></code></pre></div>
</div></li>
<li>
<p>Install the WAF compiler:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc0a2da8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc0a2da8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install nms-nap-compiler-v5.342.0</span></span></code></pre></div>
</div></li>
<li>
<p>Restart the <code>nms-integrations</code> service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc825f30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc825f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
</div>
</li>
</ol>
<h3 
id="download-from-myf5">Download from MyF5  <a class="headerlink float-right" href="#download-from-myf5" title="Download from MyF5"><i class="fas fa-link fa-xs"></i></a>
</h3><p>If you cant access the public NGINX repository, you can manually download the WAF compiler from <a href="https://my.f5.com/" target="_blank" rel="noopener">MyF5</a>.</p>
<p>To install the WAF compiler manually:</p>
<ol>
<li>
<p>Log in to <a href="https://my.f5.com" target="_blank" rel="noopener">MyF5</a>.</p>
</li>
<li>
<p>Go to <strong>Resources</strong> &gt; <strong>Downloads</strong>.</p>
</li>
<li>
<p>Select the following:</p>
<ul>
<li><strong>Group/Product Family</strong>: <strong>NGINX</strong></li>
<li><strong>Product Line</strong>: <strong>NGINX App Protect</strong></li>
<li>Choose a <strong>Product version</strong> that matches your environment</li>
<li>Select the <strong>Linux distribution</strong>, <strong>version</strong>, and <strong>architecture</strong></li>
</ul>
</li>
<li>
<p>Download the appropriate <code>.deb</code> or <code>.rpm</code> WAF compiler file.</p>
</li>
<li>
<p>Transfer the file to your NGINX Instance Manager host.</p>
</li>
<li>
<p>Install the WAF compiler:</p>
<ul>
<li>
<p><strong>Debian or Ubuntu</strong></p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc0c3530&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc0c3530">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install -f /path/to/nms-nap-compiler-&lt;version&gt;_focal_amd64.deb</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install -f /path/to/nms-nap-compiler-&lt;version&gt;_focal_amd64.deb</span></span></code></pre></div>
</div><p>To install multiple versions, use:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc0e40a0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc0e40a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install -f /path/to/nms-nap-compiler-&lt;version&gt;_focal_amd64.deb -o Dpkg::Options::<span class="o">=</span><span class="s2">&#34;--force-overwrite&#34;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install -f /path/to/nms-nap-compiler-&lt;version&gt;_focal_amd64.deb -o Dpkg::Options::<span class="o">=</span><span class="s2">&#34;--force-overwrite&#34;</span></span></span></code></pre></div>
</div></li>
<li>
<p><strong>RHEL, CentOS, or Oracle Linux</strong></p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc11f9c0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc11f9c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install -f /path/to/nms-nap-compiler-&lt;version&gt;_el8.ngx.x86_64.rpm</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install -f /path/to/nms-nap-compiler-&lt;version&gt;_el8.ngx.x86_64.rpm</span></span></code></pre></div>
</div></li>
</ul>
</li>
<li>
<p>Restart the <code>nms-integrations</code> service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc825f30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc825f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
</div>
</li>
</ol>
<h3 
id="automatically-download-and-install-new-waf-compiler">Automatically download and install new WAF compiler  <a class="headerlink float-right" href="#automatically-download-and-install-new-waf-compiler" title="Automatically download and install new WAF compiler"><i class="fas fa-link fa-xs"></i></a>
</h3><p>After you manually install at least one version of the NGINX App Protect WAF compiler, NGINX Instance Manager can automatically download and install additional versions as needed.</p>
<p>This typically happens when:</p>
<ul>
<li>A managed instance is upgraded to a new NGINX App Protect WAF version.</li>
<li>You add a new instance running a different version of NGINX App Protect WAF.</li>
</ul>
<p>To enable this automatic download feature, you need to <a href="#upload-the-nginx-app-protect-waf-certificate-and-key">upload your NGINX App Protect WAF certificate and key</a> to NGINX Instance Manager. This step allows Instance Manager to securely connect to the NGINX package repository and retrieve the necessary files. You only need to upload the certificate and key once.</p>
<p>If the certificate is missing or invalid, or if NGINX Instance Manager cant connect to the repository, youll see an error like:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc1604e8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc1604e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">missing the specific compiler, please install it and try again.</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">missing the specific compiler, please install it and try again.</span></span></code></pre></div>
</div><p>This usually means the certificate and key are missing or incorrect, or that NGINX Instance Manager cant connect to the NGINX repository.</p>
<p>Check the log file for errors:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc179740&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc179740">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">/var/log/nms/nms.log</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">/var/log/nms/nms.log</span></span></code></pre></div>
</div><p>If you see the following message, your certificate and key might be invalid or expired:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc189cf8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc189cf8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">error when creating the nginx repo retriever - NGINX repo certificates not found</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">error when creating the nginx repo retriever - NGINX repo certificates not found</span></span></code></pre></div>
</div><p>If needed, you can also <a href="#install-the-waf-compiler">install the WAF compiler manually</a>.</p>
<hr>
<h2 
id="set-up-attack-signatures-and-threat-campaigns">Set up attack signatures and threat campaigns  <a class="headerlink float-right" href="#set-up-attack-signatures-and-threat-campaigns" title="Set up attack signatures and threat campaigns"><i class="fas fa-link fa-xs"></i></a>
</h2><p>NGINX App Protect WAF protects your applications using predefined and regularly updated detection patterns:</p>
<ul>
<li>
<p><strong>Attack signatures</strong>: Known threat patterns used to detect common vulnerabilities and exploits. These are included with NGINX App Protect WAF and updated frequently to reflect the latest security threats. See the <a href="http://localhost:1313/nginx-app-protect-waf/v5/configuration-guide/configuration/#attack-signatures-overview">attack signatures documentation</a> for more information.</p>
</li>
<li>
<p><strong>Threat campaigns</strong>: Context-aware threat intelligence based on attack campaigns observed by F5 Threat Labs. These are updated even more frequently than attack signatures and require installation to take effect. Learn more in the <a href="http://localhost:1313/nginx-app-protect-waf/v5/configuration-guide/configuration/#threat-campaigns">threat campaigns documentation</a>.</p>
</li>
</ul>
<p>To take advantage of the latest updates, you must upload the attack signature and threat campaign packages to NGINX Instance Manager.</p>
<p>You can either:</p>
<ul>
<li>Configure NGINX Instance Manager to automatically download new versions, or</li>
<li>Manually download packages from MyF5 and upload them to NGINX Instance Manager using the REST API.</li>
</ul>
<h3 
id="automatically-download-latest-packages">Automatically Download Latest Packages  <a class="headerlink float-right" href="#automatically-download-latest-packages" title="Automatically Download Latest Packages"><i class="fas fa-link fa-xs"></i></a>
</h3><h4 
id="upload-the-nginx-app-protect-waf-certificate-and-key">Upload the NGINX App Protect WAF certificate and key  <a class="headerlink float-right" href="#upload-the-nginx-app-protect-waf-certificate-and-key" title="Upload the NGINX App Protect WAF certificate and key"><i class="fas fa-link fa-xs"></i></a>
</h4><p>To enable automatic downloads, NGINX Instance Manager must authenticate with the NGINX repository. You do this by uploading the NGINX repository certificate and private key that come with your NGINX App Protect WAF subscription. Once uploaded, NGINX Instance Manager can securely retrieve the latest attack signature and threat campaign packages on your behalf.</p>
<p>Follow these steps to get and upload the certificate and key:</p>
<ol>
<li>
<p>Log in to <a href="https://account.f5.com/myf5" target="_blank" rel="noopener">MyF5</a>.</p>
</li>
<li>
<p>Go to <strong>My Products and Plans &gt; Subscriptions</strong>.</p>
</li>
<li>
<p>Download the following files from your NGINX App Protect WAF subscription:</p>
<ul>
<li><code>nginx-repo.crt</code> (certificate)</li>
<li><code>nginx-repo.key</code> (private key)</li>
</ul>
</li>
<li>
<p>Create a JSON file that includes the contents of both files. Replace newlines (<code>\n</code>) in each file with literal <code>\n</code> characters so the certificate and key can be formatted correctly inside the JSON.</p>
<details open>
<summary>Example request</summary>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">json</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc23fb20&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc23fb20">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;nginx-repo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;nginxResourceType&#34;</span><span class="p">:</span> <span class="s2">&#34;NginxRepo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;certPEMDetails&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;caCerts&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;privateKey&#34;</span><span class="p">:</span> <span class="s2">&#34;-----BEGIN PRIVATE KEY-----\n[content snipped]\n-----END PRIVATE KEY-----\n&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;publicCert&#34;</span><span class="p">:</span> <span class="s2">&#34;-----BEGIN CERTIFICATE-----\n[content snipped]\n-----END CERTIFICATE-----&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;PEM&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;nginx-repo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;nginxResourceType&#34;</span><span class="p">:</span> <span class="s2">&#34;NginxRepo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;certPEMDetails&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;caCerts&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;privateKey&#34;</span><span class="p">:</span> <span class="s2">&#34;-----BEGIN PRIVATE KEY-----\n[content snipped]\n-----END PRIVATE KEY-----\n&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;publicCert&#34;</span><span class="p">:</span> <span class="s2">&#34;-----BEGIN CERTIFICATE-----\n[content snipped]\n-----END CERTIFICATE-----&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;PEM&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span></span></span></code></pre></div>
</div></details>
</li>
<li>
<p>Upload the file to NGINX Instance Manager using the REST API:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc2b03e8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc2b03e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST <span class="s1">&#39;https://{{NIM_FQDN}}/api/platform/v1/certs&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--header <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--header <span class="s2">&#34;Content-Type: application/json&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d @nginx-repo-certs.json</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST <span class="s1">&#39;https://{{NIM_FQDN}}/api/platform/v1/certs&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--header <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--header <span class="s2">&#34;Content-Type: application/json&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d @nginx-repo-certs.json</span></span></code></pre></div>
</div></li>
<li>
<p>If successful, you should see a response similar to this:</p>
 <details open>
 <summary>Example response</summary>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">json</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc36b800&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc36b800">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;certAssignmentDetails&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;certMetadata&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;authorityKeyIdentifier&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;fingerprint&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;commonName&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;subscription name&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;expired&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;expiry&#34;</span><span class="p">:</span> <span class="mi">59789838</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;issuer&#34;</span><span class="p">:</span> <span class="s2">&#34;C=US, ST=Washington, L=Seattle, Inc., O=F5 Networks\\, OU=Certificate Authority, CN=F5 PRD Issuing Certificate Authority TEEM V1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;publicKeyType&#34;</span><span class="p">:</span> <span class="s2">&#34;RSA (2048 bit)&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;serialNumber&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;serial number&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;signatureAlgorithm&#34;</span><span class="p">:</span> <span class="s2">&#34;SHA256-RSA&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;subject&#34;</span><span class="p">:</span> <span class="s2">&#34;CN=&lt;subscription name&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;subjectAlternativeName&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;subjectKeyIdentifier&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;fingerprint&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;thumbprint&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;thumbprint&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;thumbprintAlgorithm&#34;</span><span class="p">:</span> <span class="s2">&#34;SHA256-RSA&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;validFrom&#34;</span><span class="p">:</span> <span class="s2">&#34;2021-12-21T16:57:55Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;validTo&#34;</span><span class="p">:</span> <span class="s2">&#34;2024-12-20T00:00:00Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;certPEMDetails&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;caCerts&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;**********&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;privateKey&#34;</span><span class="p">:</span> <span class="s2">&#34;**********&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;publicCert&#34;</span><span class="p">:</span> <span class="s2">&#34;[content snipped]&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;PEM&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;created&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-01-27T23:42:41.587760092Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;modified&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-01-27T23:42:41.587760092Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;nginx-repo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;serialNumber&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;serial number&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;uid&#34;</span><span class="p">:</span> <span class="s2">&#34;d08d9f54-58dd-447a-a71d-6fa5aa0d880c&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;validFrom&#34;</span><span class="p">:</span> <span class="s2">&#34;2021-12-21T16:57:55Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;validTo&#34;</span><span class="p">:</span> <span class="s2">&#34;2024-12-20T00:00:00Z&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;certAssignmentDetails&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;certMetadata&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;authorityKeyIdentifier&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;fingerprint&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;commonName&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;subscription name&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;expired&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;expiry&#34;</span><span class="p">:</span> <span class="mi">59789838</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;issuer&#34;</span><span class="p">:</span> <span class="s2">&#34;C=US, ST=Washington, L=Seattle, Inc., O=F5 Networks\\, OU=Certificate Authority, CN=F5 PRD Issuing Certificate Authority TEEM V1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;publicKeyType&#34;</span><span class="p">:</span> <span class="s2">&#34;RSA (2048 bit)&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;serialNumber&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;serial number&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;signatureAlgorithm&#34;</span><span class="p">:</span> <span class="s2">&#34;SHA256-RSA&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;subject&#34;</span><span class="p">:</span> <span class="s2">&#34;CN=&lt;subscription name&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;subjectAlternativeName&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;subjectKeyIdentifier&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;fingerprint&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;thumbprint&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;thumbprint&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;thumbprintAlgorithm&#34;</span><span class="p">:</span> <span class="s2">&#34;SHA256-RSA&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;validFrom&#34;</span><span class="p">:</span> <span class="s2">&#34;2021-12-21T16:57:55Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;validTo&#34;</span><span class="p">:</span> <span class="s2">&#34;2024-12-20T00:00:00Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;certPEMDetails&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;caCerts&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;**********&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;privateKey&#34;</span><span class="p">:</span> <span class="s2">&#34;**********&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;publicCert&#34;</span><span class="p">:</span> <span class="s2">&#34;[content snipped]&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;PEM&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;created&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-01-27T23:42:41.587760092Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;modified&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-01-27T23:42:41.587760092Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;nginx-repo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;serialNumber&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;serial number&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;uid&#34;</span><span class="p">:</span> <span class="s2">&#34;d08d9f54-58dd-447a-a71d-6fa5aa0d880c&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;validFrom&#34;</span><span class="p">:</span> <span class="s2">&#34;2021-12-21T16:57:55Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;validTo&#34;</span><span class="p">:</span> <span class="s2">&#34;2024-12-20T00:00:00Z&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div></li>
</ol>
<h4 
id="enable-automatic-downloads">Enable automatic downloads  <a class="headerlink float-right" href="#enable-automatic-downloads" title="Enable automatic downloads"><i class="fas fa-link fa-xs"></i></a>
</h4><p>NGINX Instance Manager can automatically download the latest Attack Signatures and Threat Campaign versions. To enable automatic downloads:</p>
<ol>
<li>
<p>Log in to the NGINX Instance Manager host using SSH.</p>
</li>
<li>
<p>Open the <code>/etc/nms/nms.conf</code> file in a text editor.</p>
</li>
<li>
<p>Adjust the <code>app_protect_security_update</code> settings, as shown in the example below:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">yaml</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc39ffd8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc39ffd8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">integrations</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># enable this for integrations on tcp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># address: 127.0.0.1:8037</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l">unix:/var/run/nms/integrations.sock</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">dqlite</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="m">127.0.0.1</span><span class="p">:</span><span class="m">7892</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">app_protect_security_update</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># enable this to automatically retrieve the latest Attack Signatures and Threat Campaigns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># how often, in hours, to check for updates; default is 6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="m">6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># how many updates to download; default is 10, max is 20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">number_of_updates</span><span class="p">:</span><span class="w"> </span><span class="m">10</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">integrations</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># enable this for integrations on tcp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># address: 127.0.0.1:8037</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l">unix:/var/run/nms/integrations.sock</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">dqlite</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="m">127.0.0.1</span><span class="p">:</span><span class="m">7892</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">app_protect_security_update</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># enable this to automatically retrieve the latest Attack Signatures and Threat Campaigns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># how often, in hours, to check for updates; default is 6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="m">6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># how many updates to download; default is 10, max is 20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">number_of_updates</span><span class="p">:</span><span class="w"> </span><span class="m">10</span></span></span></code></pre></div>
</div></li>
<li>
<p>Save the changes and close the file.</p>
</li>
<li>
<p>Restart the <code>nms-integrations</code> service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc825f30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc825f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
</div>
</li>
</ol>
<p>If the NGINX App Protect WAF certificate and key are missing, invalid, or expired, youll see the following error:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc3b0978&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc3b0978">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">error when creating the nginx repo retriever - NGINX repo certificates not found</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">error when creating the nginx repo retriever - NGINX repo certificates not found</span></span></code></pre></div>
</div><p>This means NGINX Instance Manager cant connect to the NGINX repository to retrieve the packages. You may need to re-upload a valid certificate and key to resolve the issue.</p>
<h3 
id="manually-update-packages">Manually update packages  <a class="headerlink float-right" href="#manually-update-packages" title="Manually update packages"><i class="fas fa-link fa-xs"></i></a>
</h3><p>If you prefer not to enable automatic updates, you can manually update the Attack Signature and Threat Campaign packages by downloading them from MyF5 and uploading them to NGINX Instance Manager.</p>
<h4 
id="download-packages-from-myf5">Download packages from MyF5  <a class="headerlink float-right" href="#download-packages-from-myf5" title="Download packages from MyF5"><i class="fas fa-link fa-xs"></i></a>
</h4><ol>
<li>
<p>Log in to <a href="https://my.f5.com" target="_blank" rel="noopener">MyF5</a>, then go to <strong>Resources &gt; Downloads</strong>.</p>
</li>
<li>
<p>Select the following options in the product menu:</p>
<ul>
<li><strong>Group/Product Family</strong>: <em>NGINX</em></li>
<li><strong>Product Line</strong>: <em>NGINX App Protect</em></li>
<li><strong>Product Version</strong>: Choose a version that matches your WAF compiler version.</li>
<li>Select your <strong>Linux Distribution</strong>, <strong>Version</strong>, and <strong>Architecture</strong>.</li>
</ul>
</li>
<li>
<p>Download the <code>.deb</code> or <code>.rpm</code> packages:</p>
<ul>
<li>For Attack Signatures: package starts with <code>app-protect-attack-signatures</code></li>
<li>For Threat Campaigns: package starts with <code>app-protect-threat-campaigns</code></li>
</ul>
</li>
<li>
<p>Extract the following three files from the package:</p>
<ul>
<li><code>signatures.bin.tgz</code> (or <code>threat_campaigns.bin.tgz</code>)</li>
<li><code>signature_update.yaml</code> (or <code>threat_campaign_update.yaml</code>)</li>
<li><code>version</code></li>
</ul>
<p>Use tools like <code>rpm2cpio | cpio</code> or <code>ar</code> (for <code>.deb</code>) to extract the files.</p>
</li>
<li>
<p>Create a <code>.tgz</code> bundle that includes the three files. For example:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc3eca68&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc3eca68">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">tar -czvf attack-signatures.tgz signatures.bin.tgz signature_update.yaml version</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">tar -czvf attack-signatures.tgz signatures.bin.tgz signature_update.yaml version</span></span></code></pre></div>
</div></li>
</ol>
<h4 
id="upload-packages-to-nginx-instance-manager">Upload packages to NGINX Instance Manager  <a class="headerlink float-right" href="#upload-packages-to-nginx-instance-manager" title="Upload packages to NGINX Instance Manager"><i class="fas fa-link fa-xs"></i></a>
</h4><p>Use the NGINX Instance Manager REST API to upload the <code>.tgz</code> files.</p>
<p><strong>Upload Attack Signatures:</strong></p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc41c808&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc41c808">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST <span class="s1">&#39;https://{{NIM_FQDN}}/api/platform/v1/security/attack-signatures&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --form <span class="s1">&#39;revisionTimestamp=&#34;2022.11.16&#34;&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --form <span class="s1">&#39;filename=@&#34;/attack-signatures.tgz&#34;&#39;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST <span class="s1">&#39;https://{{NIM_FQDN}}/api/platform/v1/security/attack-signatures&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --form <span class="s1">&#39;revisionTimestamp=&#34;2022.11.16&#34;&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --form <span class="s1">&#39;filename=@&#34;/attack-signatures.tgz&#34;&#39;</span></span></span></code></pre></div>
</div><p><strong>Upload Threat Campaigns:</strong></p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc46c178&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc46c178">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST <span class="s1">&#39;https://{{NIM_FQDN}}/api/platform/v1/security/threat-campaigns&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --form <span class="s1">&#39;revisionTimestamp=&#34;2022.11.15&#34;&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --form <span class="s1">&#39;filename=@&#34;/threat-campaigns.tgz&#34;&#39;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST <span class="s1">&#39;https://{{NIM_FQDN}}/api/platform/v1/security/threat-campaigns&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --form <span class="s1">&#39;revisionTimestamp=&#34;2022.11.15&#34;&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --form <span class="s1">&#39;filename=@&#34;/threat-campaigns.tgz&#34;&#39;</span></span></span></code></pre></div>
</div><blockquote class="important call-out">
  <div><strong class="call-out-type">Important</strong><br/> The bundle you upload must match the OS of your NGINX Instance Manager host. For example, if the host is running Ubuntu 20.04, create the <code>.tgz</code> from the Ubuntu 20.04 package.</div>
</blockquote>

<h3 
id="update-the-security-monitoring-signature-database">Update the Security Monitoring signature database  <a class="headerlink float-right" href="#update-the-security-monitoring-signature-database" title="Update the Security Monitoring signature database"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The Security Monitoring dashboards in NGINX Instance Manager rely on a Signature Database to show more information about triggered security violations, such as the signature&rsquo;s name, accuracy, and risk level.</p>
<p>To keep the dashboards accurate and up to date, you need to update the Security Monitoring signature database.</p>
<p>For instructions, see the <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/update-signatures/">update signatures guide</a>.</p>
<hr>
<h2 
id="set-up-compiler-resource-pruning">Set up compiler resource pruning  <a class="headerlink float-right" href="#set-up-compiler-resource-pruning" title="Set up compiler resource pruning"><i class="fas fa-link fa-xs"></i></a>
</h2><p>You can configure NGINX Instance Manager to automatically remove unused compiler resources:</p>
<ul>
<li>Compiled security policies</li>
<li>Compiled security log profiles</li>
<li>Attack Signatures</li>
<li>Threat Campaigns</li>
</ul>
<p>Only the compiled bundles are removed. NGINX Instance Manager does not delete the definitions for security policies or log profiles.</p>
<p>To enable compiler resource pruning:</p>
<ol>
<li>
<p>Log in to the NGINX Instance Manager host using SSH.</p>
</li>
<li>
<p>Open the <code>/etc/nms/nms.conf</code> file in a text editor.</p>
</li>
<li>
<p>Update the <code>policy_manager</code> section under <code>integrations</code> with time-to-live (TTL) values for each resource type:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">yaml</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc4ab918&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc4ab918">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">integrations</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l">unix:/var/run/nms/integrations.sock</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">dqlite</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="m">127.0.0.1</span><span class="p">:</span><span class="m">7892</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">policy_manager</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Time to live for attack signatures. If the attack signatures exceed their TTL and are not</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># deployed to an instance or instance group, they will be deleted from the database.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Duration unit can be seconds (s), minutes (m), or hours (h).</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">attack_signatures_ttl</span><span class="p">:</span><span class="w"> </span><span class="l">336h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Time to live for compiled bundles, including compiled security policies and log profiles.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># If a compiled bundle exceeds its TTL and is not deployed to an instance or instance group,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># it will be deleted from the database. The bundle is deleted, not the resource definition.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">compiled_bundles_ttl</span><span class="p">:</span><span class="w"> </span><span class="l">336h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Time to live for threat campaigns. If the threat campaigns exceed their TTL and are not</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># deployed to an instance or instance group, they will be deleted from the database.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">threat_campaigns_ttl</span><span class="p">:</span><span class="w"> </span><span class="l">1440h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">app_protect_security_update</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="m">6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">number_of_updates</span><span class="p">:</span><span class="w"> </span><span class="m">10</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">integrations</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l">unix:/var/run/nms/integrations.sock</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">dqlite</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="m">127.0.0.1</span><span class="p">:</span><span class="m">7892</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">policy_manager</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Time to live for attack signatures. If the attack signatures exceed their TTL and are not</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># deployed to an instance or instance group, they will be deleted from the database.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Duration unit can be seconds (s), minutes (m), or hours (h).</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">attack_signatures_ttl</span><span class="p">:</span><span class="w"> </span><span class="l">336h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Time to live for compiled bundles, including compiled security policies and log profiles.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># If a compiled bundle exceeds its TTL and is not deployed to an instance or instance group,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># it will be deleted from the database. The bundle is deleted, not the resource definition.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">compiled_bundles_ttl</span><span class="p">:</span><span class="w"> </span><span class="l">336h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Time to live for threat campaigns. If the threat campaigns exceed their TTL and are not</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># deployed to an instance or instance group, they will be deleted from the database.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">threat_campaigns_ttl</span><span class="p">:</span><span class="w"> </span><span class="l">1440h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">app_protect_security_update</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="m">6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">number_of_updates</span><span class="p">:</span><span class="w"> </span><span class="m">10</span></span></span></code></pre></div>
</div></li>
<li>
<p>Save the file and close the editor.</p>
</li>
<li>
<p>Restart the <code>nms-integrations</code> service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc825f30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc825f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nms-integrations</span></span></code></pre></div>
</div>
</li>
</ol>
<p>NGINX Instance Manager runs the pruning process at startup and every 24 hours after the <code>nms-integrations</code> service starts.</p>
<hr>
<h2 
id="onboard-nginx-app-protect-waf-instances">Onboard NGINX App Protect WAF instances  <a class="headerlink float-right" href="#onboard-nginx-app-protect-waf-instances" title="Onboard NGINX App Protect WAF instances"><i class="fas fa-link fa-xs"></i></a>
</h2><p>To onboard your NGINX App Protect WAF instances to NGINX Instance Manager, install and configure the NGINX Agent on each instance.</p>
<h3 
id="install-nginx-agent">Install NGINX Agent  <a class="headerlink float-right" href="#install-nginx-agent" title="Install NGINX Agent"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>Use SSH to connect to the NGINX App Protect WAF instance. Repeat these steps for each instance you want to onboard.</p>
</li>
<li>
<p>Download the NGINX Agent package from the NGINX Instance Manager host and run the installation script.</p>
<p>You can group instances that use the same version of NGINX App Protect WAF by using the optional <code>--instance-group</code> flag in the install command.</p>
<blockquote class="note">
     <div><strong>Note:</strong><br/> Make sure <code>gpg</code> is installed on your system before continuing. You can install NGINX Agent using command-line tools like <code>curl</code> or <code>wget</code>.</div>
   </blockquote>
   
   <p>If your NGINX Instance Manager host doesn&rsquo;t use valid TLS certificates, you can use the insecure flags to bypass verification. Here are some example commands:</p>
   <div class="tabs-container">
   	<ul class="nav nav-tabs" id="install-agent-api" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#install-agent-api-0" role="tab" aria-controls="install-agent-api-0" aria-selected="true">curl</a></li>
   		
   			<li class="nav-item"><a data-toggle="tab" class="nav-link" href="#install-agent-api-1" role="tab" aria-controls="install-agent-api-1">wget</a></li></ul>
   </div>
   <div class="tab-content" id="install-agent-api"><div id="install-agent-api-0" class="tab-pane show active" role="tabpanel" aria-labelledby="install-agent-api-0">
   <ul>
   <li>
   <p><strong>Secure:</strong></p>
   
   
   
   <div class="code-block" data-mf="true" style="display: none;">
       <div class="code-container chroma">
           <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbaf09a0&#34;)" class="code-copy-button" type="button">Copy</button>
           <div class="highlight-v2 single-line" id="id-18440f1fcbaf09a0">
               <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl https://&lt;NIM_FQDN&gt;/install/nginx-agent <span class="p">|</span> sudo sh</span></span></code></pre></div>
           </div>
       </div>
   </div><div id="code-block-v1" data-mf="false">
   <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl https://&lt;NIM_FQDN&gt;/install/nginx-agent <span class="p">|</span> sudo sh</span></span></code></pre></div>
   </div></li>
   <li>
   <p><strong>Insecure:</strong></p>
   
   
   
   <div class="code-block" data-mf="true" style="display: none;">
       <div class="code-container chroma">
           <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbb25178&#34;)" class="code-copy-button" type="button">Copy</button>
           <div class="highlight-v2 single-line" id="id-18440f1fcbb25178">
               <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --insecure https://&lt;NIM_FQDN&gt;/install/nginx-agent <span class="p">|</span> sudo sh</span></span></code></pre></div>
           </div>
       </div>
   </div><div id="code-block-v1" data-mf="false">
   <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --insecure https://&lt;NIM_FQDN&gt;/install/nginx-agent <span class="p">|</span> sudo sh</span></span></code></pre></div>
   </div></li>
   </ul>
   <p>To add the instance to a specific instance group during installation, use the <code>--instance-group</code> (or <code>-g</code>) flag:</p>
   
   
   
   <div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
           <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbb7b848&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
           <div class="highlight-v2" id="id-18440f1fcbb7b848">
               <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl https://&lt;NIM_FQDN&gt;/install/nginx-agent -o install.sh
   </span></span><span class="line"><span class="cl">chmod u+x install.sh
   </span></span><span class="line"><span class="cl">sudo ./install.sh --instance-group &lt;instance group&gt;</span></span></code></pre></div>
           </div>
       </div>
   </div><div id="code-block-v1" data-mf="false">
   <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl https://&lt;NIM_FQDN&gt;/install/nginx-agent -o install.sh
   </span></span><span class="line"><span class="cl">chmod u+x install.sh
   </span></span><span class="line"><span class="cl">sudo ./install.sh --instance-group &lt;instance group&gt;</span></span></code></pre></div>
   </div><p>By default, the install script uses a secure connection to download packages. If it cant establish one, it falls back to an insecure connection and logs this message:</p>
   
   
   
   <div class="code-block" data-mf="true" style="display: none;">
       <div class="code-container chroma">
           <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbba44a0&#34;)" class="code-copy-button" type="button">Copy</button>
           <div class="highlight-v2 single-line" id="id-18440f1fcbba44a0">
               <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Warning: An insecure connection will be used during this nginx-agent installation</span></span></code></pre></div>
           </div>
       </div>
   </div><div id="code-block-v1" data-mf="false">
   <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Warning: An insecure connection will be used during this nginx-agent installation</span></span></code></pre></div>
   </div><p>To enforce a secure connection, set the <code>--skip-verify</code> flag to false:</p>
   
   
   
   <div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
           <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbc014e8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
           <div class="highlight-v2" id="id-18440f1fcbc014e8">
               <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl https://&lt;NIM_FQDN&gt;/install/nginx-agent -o install.sh
   </span></span><span class="line"><span class="cl">chmod u+x install.sh
   </span></span><span class="line"><span class="cl">sudo ./install.sh --skip-verify false</span></span></code></pre></div>
           </div>
       </div>
   </div><div id="code-block-v1" data-mf="false">
   <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl https://&lt;NIM_FQDN&gt;/install/nginx-agent -o install.sh
   </span></span><span class="line"><span class="cl">chmod u+x install.sh
   </span></span><span class="line"><span class="cl">sudo ./install.sh --skip-verify false</span></span></code></pre></div>
   </div></div>
     <div id="install-agent-api-1" class="tab-pane" role="tabpanel" aria-labelledby="install-agent-api-1">
   <ul>
   <li>
   <p><strong>Secure:</strong></p>
   
   
   
   <div class="code-block" data-mf="true" style="display: none;">
       <div class="code-container chroma">
           <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbc6f6a0&#34;)" class="code-copy-button" type="button">Copy</button>
           <div class="highlight-v2 single-line" id="id-18440f1fcbc6f6a0">
               <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget https://&lt;NIM_FQDN&gt;/install/nginx-agent -O - <span class="p">|</span> sudo sh -s --skip-verify false</span></span></code></pre></div>
           </div>
       </div>
   </div><div id="code-block-v1" data-mf="false">
   <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget https://&lt;NIM_FQDN&gt;/install/nginx-agent -O - <span class="p">|</span> sudo sh -s --skip-verify false</span></span></code></pre></div>
   </div></li>
   <li>
   <p><strong>Insecure:</strong></p>
   
   
   
   <div class="code-block" data-mf="true" style="display: none;">
       <div class="code-container chroma">
           <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbcc5988&#34;)" class="code-copy-button" type="button">Copy</button>
           <div class="highlight-v2 single-line" id="id-18440f1fcbcc5988">
               <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget --no-check-certificate https://&lt;NIM_FQDN&gt;/install/nginx-agent -O - <span class="p">|</span> sudo sh</span></span></code></pre></div>
           </div>
       </div>
   </div><div id="code-block-v1" data-mf="false">
   <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget --no-check-certificate https://&lt;NIM_FQDN&gt;/install/nginx-agent -O - <span class="p">|</span> sudo sh</span></span></code></pre></div>
   </div></li>
   </ul>
   <p>To add your instance to a group during installation, use the <code>--instance-group</code> (or <code>-g</code>) flag:</p>
   
   
   
   <div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
           <button onclick="copyToClipBoard(this, &#34;id-18440f1fcbd1f320&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
           <div class="highlight-v2" id="id-18440f1fcbd1f320">
               <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget https://&lt;NIM_FQDN&gt;/install/nginx-agent -O install.sh
   </span></span><span class="line"><span class="cl">chmod u+x install.sh
   </span></span><span class="line"><span class="cl">sudo ./install.sh --instance-group &lt;instance group&gt;</span></span></code></pre></div>
           </div>
       </div>
   </div><div id="code-block-v1" data-mf="false">
   <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget https://&lt;NIM_FQDN&gt;/install/nginx-agent -O install.sh
   </span></span><span class="line"><span class="cl">chmod u+x install.sh
   </span></span><span class="line"><span class="cl">sudo ./install.sh --instance-group &lt;instance group&gt;</span></span></code></pre></div>
   </div></div></div>
   

</li>
</ol>
<h3 
id="configure-nginx-agent">Configure NGINX Agent  <a class="headerlink float-right" href="#configure-nginx-agent" title="Configure NGINX Agent"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>Edit the NGINX Agent configuration file to enable support for NGINX App Protect WAF:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc4c6e98&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc4c6e98">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo vi /etc/nginx-agent/nginx-agent.conf</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo vi /etc/nginx-agent/nginx-agent.conf</span></span></code></pre></div>
</div></li>
<li>
<p>Update or confirm the following settings:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">yaml</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc4e4740&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc4e4740">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">config_dirs</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/etc/nginx:/usr/local/etc/nginx:/usr/share/nginx/modules:/etc/nms:/etc/app_protect&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">extensions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">nginx-app-protect</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">nginx_app_protect</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">report_interval</span><span class="p">:</span><span class="w"> </span><span class="l">15s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">precompiled_publication</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">config_dirs</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/etc/nginx:/usr/local/etc/nginx:/usr/share/nginx/modules:/etc/nms:/etc/app_protect&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">extensions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">nginx-app-protect</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">nginx_app_protect</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">report_interval</span><span class="p">:</span><span class="w"> </span><span class="l">15s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">precompiled_publication</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span></span></span></code></pre></div>
</div><p>These settings:</p>
<ul>
<li>Allow the agent to access NGINX App Protect WAF configuration directories.</li>
<li>Enable the agent to detect changes in security configurations.</li>
<li>Enable support for precompiled publication of WAF configurations from NGINX Instance Manager.</li>
</ul>
<p>You can also apply these settings automatically during installation by using the <code>--nginx-app-protect-mode</code> flag:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc502ba0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc502ba0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl https://&lt;NMS_FQDN&gt;/install/nginx-agent &gt; install.sh
</span></span><span class="line"><span class="cl">sudo sh ./install.sh --nginx-app-protect-mode precompiled-publication</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl https://&lt;NMS_FQDN&gt;/install/nginx-agent &gt; install.sh
</span></span><span class="line"><span class="cl">sudo sh ./install.sh --nginx-app-protect-mode precompiled-publication</span></span></code></pre></div>
</div></li>
<li>
<p>Restart NGINX Agent:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc518f18&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc518f18">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nginx-agent</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nginx-agent</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="verify-installation">Verify installation  <a class="headerlink float-right" href="#verify-installation" title="Verify installation"><i class="fas fa-link fa-xs"></i></a>
</h3><p>After installing and configuring the NGINX Agent, verify that your NGINX App Protect WAF instances appear in NGINX Instance Manager.</p>
<div class="tabs-container">
	<ul class="nav nav-tabs" id="agent-verify" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#agent-verify-0" role="tab" aria-controls="agent-verify-0" aria-selected="true">UI</a></li>
		
			<li class="nav-item"><a data-toggle="tab" class="nav-link" href="#agent-verify-1" role="tab" aria-controls="agent-verify-1">API</a></li></ul>
</div>
<div class="tab-content" id="agent-verify"><div id="agent-verify-0" class="tab-pane show active" role="tabpanel" aria-labelledby="agent-verify-0">
<p>You should now be able to view your NGINX App Protect WAF instances in the Instance Manager user interface. Take the steps below to verify that NGINX Agent is installed and reporting data to Instance Manager.</p>
<ol>
<li>
<p>In a web browser, go to the FQDN for your NGINX Instance Manager host and log in. Then, select <strong>Instance Manager</strong> from the Launchpad menu.</p>
</li>
<li>
<p>In the left menu, select <strong>Instances</strong>.</p>
</li>
<li>
<p>Confirm that each instance shows an NGINX App Protect WAF version in the <strong>NGINX App Protect</strong> column.</p>
</li>
<li>
<p>Select an instance and scroll to the <strong>App Protect Details</strong> section to confirm status and build information.</p>
</li>
</ol>
</div>
  <div id="agent-verify-1" class="tab-pane" role="tabpanel" aria-labelledby="agent-verify-1">
<blockquote class="tip">
  <div><strong>See Also:</strong><br/> You can use tools like <code>curl</code> or <a href="https://www.postman.com" target="_blank" rel="noopener">Postman</a> to interact with the NGINX Instance Manager REST API. The API URL is <code>https://&lt;NIM-FQDN&gt;/api/[nim|platform]/&lt;API_VERSION&gt;</code>, and each request requires authentication. For more details on authentication options, see the <a href="http://localhost:1313/nginx-instance-manager/fundamentals/api-overview/">API Overview</a>.</div>
</blockquote>
<p>Use the REST API to confirm the version and status of NGINX App Protect WAF:</p>
<table class="table table-v1">
  <thead>
      <tr>
          <th style="text-align: left">Method</th>
          <th style="text-align: left">Endpoint</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/api/platform/v1/instances</code></td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/api/platform/v1/systems</code></td>
      </tr>
  </tbody>
</table>
<div data-mf="true" style="display: none;" class="table-v2 table narrow">
    <table>
  <thead>
      <tr>
          <th style="text-align: left">Method</th>
          <th style="text-align: left">Endpoint</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/api/platform/v1/instances</code></td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/api/platform/v1/systems</code></td>
      </tr>
  </tbody>
</table>
</div>
<ul>
<li>
<p>Send a <code>GET</code> request to <code>/api/platform/v1/systems</code> to check version info:</p>
<p><strong>Example response:</strong></p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">json</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc924198&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc924198">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;count&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;items&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;appProtect&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;attackSignatureVersion&#34;</span><span class="p">:</span> <span class="s2">&#34;2022.11.16&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;status&#34;</span><span class="p">:</span> <span class="s2">&#34;active&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;threatCampaignVersion&#34;</span><span class="p">:</span> <span class="s2">&#34;2022.11.15&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;build-3.954.0&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;count&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;items&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;appProtect&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;attackSignatureVersion&#34;</span><span class="p">:</span> <span class="s2">&#34;2022.11.16&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;status&#34;</span><span class="p">:</span> <span class="s2">&#34;active&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;threatCampaignVersion&#34;</span><span class="p">:</span> <span class="s2">&#34;2022.11.15&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;build-3.954.0&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div></li>
<li>
<p>Send a <code>GET</code> request to <code>/api/platform/v1/instances</code> to check how many instances have NGINX App Protect WAF installed:</p>
<p><strong>Example response:</strong></p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">json</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc93e390&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc93e390">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;count&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;items&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="err">...</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;nginxAppProtectWAFCount&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;nginxPlusCount&#34;</span><span class="p">:</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;count&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;items&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="err">...</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;nginxAppProtectWAFCount&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;nginxPlusCount&#34;</span><span class="p">:</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div></li>
</ul>
</div></div>

<h3 
id="configure-docker-compose-for-nginx-app-protect-waf-v5">Configure Docker Compose for NGINX App Protect WAF v5  <a class="headerlink float-right" href="#configure-docker-compose-for-nginx-app-protect-waf-v5" title="Configure Docker Compose for NGINX App Protect WAF v5"><i class="fas fa-link fa-xs"></i></a>
</h3><h4 
id="before-you-begin-1">Before you begin  <a class="headerlink float-right" href="#before-you-begin-1" title="Before you begin"><i class="fas fa-link fa-xs"></i></a>
</h4><p>Before configuring Docker Compose, make sure youve completed the following steps:</p>
<ul>
<li>Installed NGINX App Protect WAF v5 using the <a href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/install/">official installation guide</a>.</li>
<li>Created a <code>docker-compose.yaml</code> file during the installation process.</li>
</ul>
<p>This section explains how to modify that file so NGINX App Protect WAF can work with NGINX Instance Manager.</p>
<h4 
id="edit-the-docker-compose-file">Edit the Docker Compose file  <a class="headerlink float-right" href="#edit-the-docker-compose-file" title="Edit the Docker Compose file"><i class="fas fa-link fa-xs"></i></a>
</h4><ol>
<li>
<p>Edit the <code>docker-compose.yaml</code> file created during installation.</p>
<p>To give NGINX App Protect WAF access to the policy and log profile bundles written by NGINX Instance Manager, make the following changes:</p>
<ul>
<li>
<p>Add the line <code>user: 101:&lt;group-id&gt;</code> to each service. The group ID should match the NGINX Agent group on your system. You can find the group ID by running:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc534c68&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc534c68">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cat /etc/group</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cat /etc/group</span></span></code></pre></div>
</div></li>
<li>
<p>Add <code>/etc/nms</code> to the volume maps for both services.</p>
<p><strong>Example:</strong></p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">yaml</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc585960&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc585960">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;3.9&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">waf-enforcer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">waf-enforcer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">private-registry.nginx.com/nap/waf-enforcer:5.2.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="m">101</span><span class="p">:</span><span class="m">1002</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">ENFORCER_PORT=50000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;50000:50000&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/opt/app_protect/bd_config:/opt/app_protect/bd_config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/etc/nms:/etc/nms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">waf_network</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">waf-config-mgr</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">waf-config-mgr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">private-registry.nginx.com/nap/waf-config-mgr:5.2.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="m">101</span><span class="p">:</span><span class="m">1002</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/opt/app_protect/bd_config:/opt/app_protect/bd_config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/opt/app_protect/config:/opt/app_protect/config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/etc/app_protect/conf:/etc/app_protect/conf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/etc/nms:/etc/nms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">network_mode</span><span class="p">:</span><span class="w"> </span><span class="l">none</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">waf-enforcer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l">service_started</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">waf_network</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l">bridge</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;3.9&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">waf-enforcer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">waf-enforcer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">private-registry.nginx.com/nap/waf-enforcer:5.2.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="m">101</span><span class="p">:</span><span class="m">1002</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">ENFORCER_PORT=50000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;50000:50000&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/opt/app_protect/bd_config:/opt/app_protect/bd_config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/etc/nms:/etc/nms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">waf_network</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">waf-config-mgr</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">waf-config-mgr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">private-registry.nginx.com/nap/waf-config-mgr:5.2.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="m">101</span><span class="p">:</span><span class="m">1002</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/opt/app_protect/bd_config:/opt/app_protect/bd_config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/opt/app_protect/config:/opt/app_protect/config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/etc/app_protect/conf:/etc/app_protect/conf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/etc/nms:/etc/nms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">network_mode</span><span class="p">:</span><span class="w"> </span><span class="l">none</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">waf-enforcer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l">service_started</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">waf_network</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l">bridge</span></span></span></code></pre></div>
</div></li>
</ul>
</li>
<li>
<p>Restart the containers:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc59ad38&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc59ad38">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker compose restart</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker compose restart</span></span></code></pre></div>
</div></li>
</ol>
<hr>
<h2 
id="onboard-security-policies">Onboard security policies  <a class="headerlink float-right" href="#onboard-security-policies" title="Onboard security policies"><i class="fas fa-link fa-xs"></i></a>
</h2><p>NGINX Instance Manager provides the same <a href="https://docs.nginx.com/nginx-app-protect/configuration-guide/configuration/#policy-configuration" target="_blank" rel="noopener">default security policies</a> as NGINX App Protect WAF:</p>
<ul>
<li><strong>NGINX Default Policy</strong>: Provides <a href="https://owasp.org/www-project-top-ten/" target="_blank" rel="noopener">OWASP Top 10</a> and Bot protection.</li>
<li><strong>NGINX Strict Policy</strong>: Contains more restrictive blocking criteria than the default policy.</li>
</ul>
<p>If you plan to use these built-in policies, you can skip to <a href="#add-waf-config">Add WAF configuration to NGINX instances</a>.</p>
<p>If youve created custom security policies on your NGINX App Protect WAF instances, you can upload them to NGINX Instance Manager using the REST API. These policies must be uploaded so NGINX Instance Manager can compile and publish them across your data plane.</p>
<h3 
id="upload-custom-security-policies">Upload custom security policies  <a class="headerlink float-right" href="#upload-custom-security-policies" title="Upload custom security policies"><i class="fas fa-link fa-xs"></i></a>
</h3><p>To upload a policy, follow these steps:</p>
<ol>
<li>
<p>Encode the JSON policy using <code>base64</code>.</p>
<p><strong>Example:</strong></p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc5b6e70&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc5b6e70">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">base64 -i ./ignore-xss-policy-example.json</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">base64 -i ./ignore-xss-policy-example.json</span></span></code></pre></div>
</div></li>
<li>
<p>Create a JSON request that includes the base64-encoded policy from step 1 as the value for the <code>content</code> field.</p>
<p>Replace the example string below with the actual base64-encoded output you generated.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">json</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc5d6270&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc5d6270">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;metadata&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ignore-xss-example&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="s2">&#34;Ignore cross-site scripting example&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Security policy that intentionally ignores cross-site scripting&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;base64-encoded-policy&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;metadata&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ignore-xss-example&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="s2">&#34;Ignore cross-site scripting example&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Security policy that intentionally ignores cross-site scripting&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;base64-encoded-policy&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div></li>
<li>
<p>Send the request to the Instance Manager REST API to create the policy:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc5f69f8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc5f69f8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST https://&lt;NIM_FQDN&gt;/api/platform/v1/security/policies <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s2">&#34;Content-Type: application/json&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d @policy.json</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST https://&lt;NIM_FQDN&gt;/api/platform/v1/security/policies <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s2">&#34;Content-Type: application/json&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d @policy.json</span></span></code></pre></div>
</div><p>You should receive a success response with the policy metadata.</p>
</li>
<li>
<p>To verify that your policy was successfully onboarded, send a GET request:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc612360&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc612360">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X GET https://&lt;NIM_FQDN&gt;/api/platform/v1/security/policies <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X GET https://&lt;NIM_FQDN&gt;/api/platform/v1/security/policies <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span></span></span></code></pre></div>
</div><p>The response includes a list of all security policies managed by NGINX Instance Manager.</p>
</li>
</ol>
<hr>
<h2 
id="add-waf-config">Add WAF configuration to NGINX instances  <a class="headerlink float-right" href="#add-waf-config" title="Add WAF configuration to NGINX instances"><i class="fas fa-link fa-xs"></i></a>
</h2><p>The <a href="https://docs.nginx.com/nginx-app-protect/configuration-guide/configuration/#policy-configuration-overview" target="_blank" rel="noopener">NGINX App Protect WAF configuration guide</a> shows where and how to add security directives to your NGINX configuration. NGINX Instance Manager includes the same default security policies as NGINX App Protect WAF:</p>
<ul>
<li><strong>NGINX Default Policy</strong>: Provides <a href="https://owasp.org/www-project-top-ten/" target="_blank" rel="noopener">OWASP Top 10</a> and bot protection out of the box.</li>
<li><strong>NGINX Strict Policy</strong>: Contains more restrictive criteria for blocking traffic, with a higher risk of false positives.</li>
</ul>
<p>You can use these default policies as-is or customize them for your app. Security Monitoring dashboards can help you fine-tune policy settings.</p>
<p>Keep the following in mind when configuring NGINX App Protect WAF through NGINX Instance Manager:</p>
<ul>
<li>
<p>Instance Manager compiles JSON security policies into <code>.tgz</code> bundles.</p>
</li>
<li>
<p>Use the <code>app_protect_policy_file</code> directive to reference custom policies.</p>
<p>If you&rsquo;re using precompiled publication with NGINX Agent, make sure to change the file extension from <code>.json</code> to <code>.tgz</code>. The filename remains the same. NGINX Instance Manager doesn&rsquo;t support referencing both <code>.json</code> and <code>.tgz</code> in the same NGINX configuration.</p>
</li>
<li>
<p>If you&rsquo;re using custom policies, make sure NGINX Agent has permission to access the directories where those policy files are stored. Update the <code>config_dirs</code> setting in the NGINX Agent&rsquo;s configuration file if needed.</p>
</li>
<li>
<p>NGINX Instance Manager uses the default log profiles that come with NGINX App Protect WAF. You can reference them with the <code>app_protect_security_log</code> directive. Custom log profiles aren&rsquo;t supported.</p>
</li>
</ul>
<p>If you&rsquo;re using different directories on the data plane, update paths accordingly in your NGINX configuration.</p>
<h3 
id="edit-the-nginx-configuration">Edit the NGINX configuration  <a class="headerlink float-right" href="#edit-the-nginx-configuration" title="Edit the NGINX configuration"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Add the NGINX App Protect WAF directives in the appropriate context (<code>http</code>, <code>server</code>, or <code>location</code>). Here&rsquo;s an example:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc6428d0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc6428d0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kn">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="s">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Enable NGINX App Protect WAF
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">app_protect_enable</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Reference a custom security policy bundle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">app_protect_policy_file</span> <span class="s">/etc/nms/ignore-xss.tgz</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Enable security logging
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">app_protect_security_log_enable</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Reference the log profile bundle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">app_protect_security_log</span> <span class="s">/etc/nms/log-default.tgz</span> <span class="s">/var/log/nginx/security-violations.log</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">...</span>
</span></span><span class="line"><span class="cl">  <span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="err">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kn">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="s">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Enable NGINX App Protect WAF
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">app_protect_enable</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Reference a custom security policy bundle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">app_protect_policy_file</span> <span class="s">/etc/nms/ignore-xss.tgz</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Enable security logging
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">app_protect_security_log_enable</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Reference the log profile bundle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">app_protect_security_log</span> <span class="s">/etc/nms/log-default.tgz</span> <span class="s">/var/log/nginx/security-violations.log</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">...</span>
</span></span><span class="line"><span class="cl">  <span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="err">}</span></span></span></code></pre></div>
</div><p>If youre using NGINX Instance Manager with Security Monitoring, your configuration may already include the following directive:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc6551b0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc6551b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_security_log</span> <span class="s">&#34;/etc/nms/secops_dashboard.tgz&#34;</span> <span class="s">syslog:server=127.0.0.1:514</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_security_log</span> <span class="s">&#34;/etc/nms/secops_dashboard.tgz&#34;</span> <span class="s">syslog:server=127.0.0.1:514</span><span class="p">;</span></span></span></code></pre></div>
</div><p><strong>Dont change this value.</strong> See the <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/security-monitoring/set-up-app-protect-instances/">Security Monitoring setup guide</a> for more details.</p>
<p>If youre using NGINX App Protect WAF v5:</p>
<ul>
<li>
<p>You must add the <code>app_protect_enforcer_address</code> directive to the <code>http</code> context:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc6672c0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc6672c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enforcer_address</span> <span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">50000</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enforcer_address</span> <span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">50000</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>JSON policies and log profiles arent supported. You must precompile and publish them using NGINX Instance Manager. Make sure the precompiled_publication setting in the NGINX Agent configuration is set to true.</p>
<p>See the <a href="http://localhost:1313/nginx-app-protect-waf/v5/configuration-guide/configuration/">NGINX App Protect WAF configuration guide</a> for details.</p>
</li>
</ul>
<div class="tabs-container">
	<ul class="nav nav-tabs" id="add_security" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#add_security-0" role="tab" aria-controls="add_security-0" aria-selected="true">UI</a></li>
		
			<li class="nav-item"><a data-toggle="tab" class="nav-link" href="#add_security-1" role="tab" aria-controls="add_security-1">API</a></li></ul>
</div>
<div class="tab-content" id="add_security"><div id="add_security-0" class="tab-pane show active" role="tabpanel" aria-labelledby="add_security-0">
<ol>
<li>
<p>In a web browser, go to the FQDN for your NGINX Instance Manager host and log in. Then, select <strong>Instance Manager</strong> from the Launchpad menu.</p>
</li>
<li>
<p>In the left menu, select <strong>Instances</strong> or <strong>Instance Groups</strong>.</p>
</li>
<li>
<p>From the <strong>Actions</strong> menu (<strong>&hellip;</strong>), select <strong>Edit Config</strong> for the instance or group.</p>
</li>
<li>
<p>If youre using precompiled publication, change any <code>.json</code> file extensions to <code>.tgz</code>.</p>
</li>
<li>
<p>If you want to apply a default policy, select <strong>Apply Security</strong>, then copy the policy snippet and paste it into your configuration.</p>
</li>
<li>
<p>Add the directives inside an <code>http</code>, <code>server</code>, or <code>location</code> block.</p>
</li>
<li>
<p>Select <strong>Publish</strong> to push the configuration.</p>
</li>
</ol>
</div>
  <div id="add_security-1" class="tab-pane" role="tabpanel" aria-labelledby="add_security-1">
<blockquote class="tip">
  <div><strong>See Also:</strong><br/> You can use tools like <code>curl</code> or <a href="https://www.postman.com" target="_blank" rel="noopener">Postman</a> to interact with the NGINX Instance Manager REST API. The API URL is <code>https://&lt;NIM-FQDN&gt;/api/[nim|platform]/&lt;API_VERSION&gt;</code>, and each request requires authentication. For more details on authentication options, see the <a href="http://localhost:1313/nginx-instance-manager/fundamentals/api-overview/">API Overview</a>.</div>
</blockquote>
<p>You can use the NGINX Instance Manager REST API to deploy your NGINX App Protect WAF configuration.</p>
<table class="table table-v1">
  <thead>
      <tr>
          <th style="text-align: left">Method</th>
          <th style="text-align: left">Endpoint</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/api/platform/v1/systems/{systemUID}/instances</code></td>
      </tr>
      <tr>
          <td style="text-align: left">POST</td>
          <td style="text-align: left"><code>/api/platform/v1/security/{systemUID}/instances/{nginxUID}/config</code></td>
      </tr>
  </tbody>
</table>
<div data-mf="true" style="display: none;" class="table-v2 table narrow">
    <table>
  <thead>
      <tr>
          <th style="text-align: left">Method</th>
          <th style="text-align: left">Endpoint</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/api/platform/v1/systems/{systemUID}/instances</code></td>
      </tr>
      <tr>
          <td style="text-align: left">POST</td>
          <td style="text-align: left"><code>/api/platform/v1/security/{systemUID}/instances/{nginxUID}/config</code></td>
      </tr>
  </tbody>
</table>
</div>
<blockquote class="important call-out">
  <div><strong class="call-out-type">Important</strong><br/> Before deploying a configuration to an instance group, make sure all instances in the group are running the same version of NGINX App Protect WAF. Otherwise, the deployment may fail.</div>
</blockquote>
<ol>
<li>
<p>Send a <code>GET</code> request to the <code>/api/platform/v1/systems/{systemUID}/instances</code> endpoint to list all instances. This response includes the unique identifier (UID) of the instance that you want to update.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc9bc718&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc9bc718">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X GET https://<span class="o">{{</span>NMS_FQDN<span class="o">}}</span>/api/platform/v1/systems/<span class="o">{</span>systemUID<span class="o">}</span>/instances <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> -H <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X GET https://<span class="o">{{</span>NMS_FQDN<span class="o">}}</span>/api/platform/v1/systems/<span class="o">{</span>systemUID<span class="o">}</span>/instances <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> -H <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Add the NGINX App Protect WAF configuration to your NGINX config file (<code>nginx.conf</code> or another config file located in a valid <code>config_dirs</code> path on the data plane host):</p>
<ul>
<li>
<p>At a minimum, add the following directive:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc9ceff8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc9ceff8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>If precompiled publication is enabled, change any <code>.json</code> policy references to <code>.tgz</code>.</p>
</li>
<li>
<p>If you want to apply a default policy, you can use:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc9e3048&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc9e3048">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_policy_file</span> <span class="s">/etc/nms/NginxDefaultPolicy.tgz</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_policy_file</span> <span class="s">/etc/nms/NginxDefaultPolicy.tgz</span><span class="p">;</span></span></span></code></pre></div>
</div><p>or</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc9f4d70&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc9f4d70">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_policy_file</span> <span class="s">/etc/nms/NginxStrictPolicy.tgz</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_policy_file</span> <span class="s">/etc/nms/NginxStrictPolicy.tgz</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Add the directives to an <code>http</code>, <code>server</code>, or <code>location</code> context.</p>
</li>
</ul>
</li>
<li>
<p>Encode the updated NGINX configuration file using base64.</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcca0b0e8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcca0b0e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">base64 -i /etc/nginx/nginx.conf</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">base64 -i /etc/nginx/nginx.conf</span></span></code></pre></div>
</div></li>
<li>
<p>Send a <code>POST</code> request to the <code>/api/platform/v1/security/{systemUID}/instances/{nginxUID}/config</code> endpoint to deploy the configuration. Replace <code>&lt;base64-encoded-content&gt;</code> with your encoded config:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcca36450&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcca36450">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST https://<span class="o">{{</span>NMS_FQDN<span class="o">}}</span>/api/platform/v1/security/<span class="o">{</span>systemUID<span class="o">}</span>/instances/<span class="o">{</span>nginxUID<span class="o">}</span>/config <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--header <span class="s2">&#34;Content-Type: application/json&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">&#34;configFiles&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">  &#34;rootDir&#34;: &#34;/etc/nginx&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">  &#34;files&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">    {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;name&#34;: &#34;nginx.conf&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;contents&#34;: &#34;&lt;base64-encoded-content&gt;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  ]
</span></span></span><span class="line"><span class="cl"><span class="s1">},
</span></span></span><span class="line"><span class="cl"><span class="s1">&#34;validateConfig&#34;: true
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST https://<span class="o">{{</span>NMS_FQDN<span class="o">}}</span>/api/platform/v1/security/<span class="o">{</span>systemUID<span class="o">}</span>/instances/<span class="o">{</span>nginxUID<span class="o">}</span>/config <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s2">&#34;Authorization: Bearer &lt;access token&gt;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--header <span class="s2">&#34;Content-Type: application/json&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">&#34;configFiles&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">  &#34;rootDir&#34;: &#34;/etc/nginx&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">  &#34;files&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">    {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;name&#34;: &#34;nginx.conf&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;contents&#34;: &#34;&lt;base64-encoded-content&gt;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  ]
</span></span></span><span class="line"><span class="cl"><span class="s1">},
</span></span></span><span class="line"><span class="cl"><span class="s1">&#34;validateConfig&#34;: true
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span></span></span></code></pre></div>
</div></li>
</ol>
</div></div>

<h3 
id="verify-configuration">Verify configuration  <a class="headerlink float-right" href="#verify-configuration" title="Verify configuration"><i class="fas fa-link fa-xs"></i></a>
</h3><p>After you add NGINX App Protect WAF directives to your NGINX configuration, you can verify the setup in the NGINX Instance Manager web interface.</p>
<p>To confirm that the NGINX App Protect WAF configuration was applied:</p>
<ol>
<li><p>In a web browser, go to the FQDN for your NGINX Instance Manager host and log in. Then, select <strong>Instance Manager</strong> from the Launchpad menu.</p>
</li>
<li>In the left navigation menu, select <strong>Instances</strong>.</li>
<li>In the <strong>NGINX App Protect</strong> column, confirm that the correct version is listed.</li>
<li>Select the instance. Then, scroll to the <strong>App Protect Details</strong> section.</li>
<li>Confirm that the <strong>App Protect WAF</strong> status is <strong>Active</strong>, and the <strong>Build</strong> matches the version installed on the instance.</li>
</ol>
<hr>
<h2 
id="troubleshooting">Troubleshooting  <a class="headerlink float-right" href="#troubleshooting" title="Troubleshooting"><i class="fas fa-link fa-xs"></i></a>
</h2><p>If you&rsquo;re having trouble with NGINX App Protect WAF, try the steps below. If these don&rsquo;t solve the issue, reach out to F5 NGINX Customer Support.</p>
<h3 
id="check-that-nginx-app-protect-waf-is-not-installed-on-the-nginx-instance-manager-host">Check that NGINX App Protect WAF is not installed on the NGINX Instance Manager host  <a class="headerlink float-right" href="#check-that-nginx-app-protect-waf-is-not-installed-on-the-nginx-instance-manager-host" title="Check that NGINX App Protect WAF is not installed on the NGINX Instance Manager host"><i class="fas fa-link fa-xs"></i></a>
</h3><p>NGINX App Protect WAF and the WAF compiler shouldn&rsquo;t run on the same host. To check:</p>
<ol>
<li>
<p>Log in to the NGINX Instance Manager host from a terminal.</p>
</li>
<li>
<p>Run the command that matches your operating system:</p>
<ul>
<li>
<p>For Debian-based systems:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc6833f8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc6833f8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">dpkg -s app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">dpkg -s app-protect</span></span></code></pre></div>
</div></li>
<li>
<p>For RPM-based systems:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc697060&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc697060">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">rpm -qi <span class="p">|</span> grep app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">rpm -qi <span class="p">|</span> grep app-protect</span></span></code></pre></div>
</div></li>
</ul>
</li>
</ol>
<p>If NGINX App Protect WAF is installed, follow the <a href="http://localhost:1313/nginx-app-protect-waf/v4/admin-guide/install/#uninstall-app-protect">uninstall instructions</a>.</p>
<h3 
id="check-that-the-waf-compiler-version-matches-the-nginx-app-protect-waf-version">Check that the WAF compiler version matches the NGINX App Protect WAF version  <a class="headerlink float-right" href="#check-that-the-waf-compiler-version-matches-the-nginx-app-protect-waf-version" title="Check that the WAF compiler version matches the NGINX App Protect WAF version"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Each NGINX App Protect WAF version has a matching WAF compiler version. To confirm:</p>
<ol>
<li>
<p>Log in to the NGINX Instance Manager host.</p>
</li>
<li>
<p>Run the following command to see installed compiler versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc6ad3d8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc6ad3d8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ls -l /opt/nms-nap-compiler</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ls -l /opt/nms-nap-compiler</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="confirm-the-waf-compiler-is-working-correctly">Confirm the WAF compiler is working correctly  <a class="headerlink float-right" href="#confirm-the-waf-compiler-is-working-correctly" title="Confirm the WAF compiler is working correctly"><i class="fas fa-link fa-xs"></i></a>
</h3><p>You can verify that the WAF compiler is installed and responding:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc6c4ad8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc6c4ad8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo /opt/nms-nap-compiler/app_protect-&lt;version&gt;/bin/apcompile -h</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo /opt/nms-nap-compiler/app_protect-&lt;version&gt;/bin/apcompile -h</span></span></code></pre></div>
</div><p><strong>Example:</strong></p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc6d6030&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc6d6030">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -h</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -h</span></span></code></pre></div>
</div><p><strong>Expected output:</strong></p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">text</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc6ea080&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc6ea080">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">USAGE:
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile &lt;options&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Examples:
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -p /path/to/policy.json -o mypolicy.tgz
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -p policyA.json -g myglobal.json -o /path/to/policyA_bundle.tgz
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -g myglobalsettings.json --global-state-outfile /path/to/myglobalstate.tgz
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -b /path/to/policy_bundle.tgz --dump
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -l logprofA.json -o /path/to/logprofA_bundle.tgz</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">USAGE:
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile &lt;options&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Examples:
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -p /path/to/policy.json -o mypolicy.tgz
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -p policyA.json -g myglobal.json -o /path/to/policyA_bundle.tgz
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -g myglobalsettings.json --global-state-outfile /path/to/myglobalstate.tgz
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -b /path/to/policy_bundle.tgz --dump
</span></span><span class="line"><span class="cl">    /opt/nms-nap-compiler/app_protect-5.342.0/bin/apcompile -l logprofA.json -o /path/to/logprofA_bundle.tgz</span></span></code></pre></div>
</div><h3 
id="confirm-nginx-agent-configuration-on-the-nginx-app-protect-waf-instance">Confirm NGINX Agent configuration on the NGINX App Protect WAF instance  <a class="headerlink float-right" href="#confirm-nginx-agent-configuration-on-the-nginx-app-protect-waf-instance" title="Confirm NGINX Agent configuration on the NGINX App Protect WAF instance"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Open the <code>/etc/nginx-agent/nginx-agent.conf</code> file and make sure it includes the right settings.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">yaml</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc726940&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc726940">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># List of directories the agent monitors for config files</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">config_dirs</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/etc/nginx:/usr/local/etc/nginx:/usr/share/nginx/modules:/etc/nms:/etc/app_protect&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Enable necessary NGINX App Protect extensions</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">extensions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">nginx-app-protect</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">nap-monitoring</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">nginx_app_protect</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Report interval for NGINX App Protect details  how often the agent checks for changes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">report_interval</span><span class="p">:</span><span class="w"> </span><span class="l">15s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Set to true to publish precompiled policies and log profiles from NGINX Instance Manager</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">precompiled_publication</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">nap_monitoring</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Buffer size for the collector  holds log lines and parsed entries</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">collector_buffer_size</span><span class="p">:</span><span class="w"> </span><span class="m">50000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Buffer size for the processor  processes log lines from the buffer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">processor_buffer_size</span><span class="p">:</span><span class="w"> </span><span class="m">50000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># IP address where the agent listens for syslog messages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">syslog_ip</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;127.0.0.1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Port number for receiving syslog messages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">syslog_port</span><span class="p">:</span><span class="w"> </span><span class="m">514</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># List of directories the agent monitors for config files</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">config_dirs</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/etc/nginx:/usr/local/etc/nginx:/usr/share/nginx/modules:/etc/nms:/etc/app_protect&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Enable necessary NGINX App Protect extensions</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">extensions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">nginx-app-protect</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">nap-monitoring</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">nginx_app_protect</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Report interval for NGINX App Protect details  how often the agent checks for changes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">report_interval</span><span class="p">:</span><span class="w"> </span><span class="l">15s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Set to true to publish precompiled policies and log profiles from NGINX Instance Manager</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">precompiled_publication</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">nap_monitoring</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Buffer size for the collector  holds log lines and parsed entries</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">collector_buffer_size</span><span class="p">:</span><span class="w"> </span><span class="m">50000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Buffer size for the processor  processes log lines from the buffer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">processor_buffer_size</span><span class="p">:</span><span class="w"> </span><span class="m">50000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># IP address where the agent listens for syslog messages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">syslog_ip</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;127.0.0.1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Port number for receiving syslog messages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">syslog_port</span><span class="p">:</span><span class="w"> </span><span class="m">514</span></span></span></code></pre></div>
</div><h3 
id="confirm-access-to-the-nginx-packages-repository">Confirm access to the NGINX packages repository  <a class="headerlink float-right" href="#confirm-access-to-the-nginx-packages-repository" title="Confirm access to the NGINX packages repository"><i class="fas fa-link fa-xs"></i></a>
</h3><p>If automatic downloads for Attack Signatures or Threat Campaigns are failing, check whether the repo certificate and key are set up correctly.</p>
<p>Run this command to test access:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc741308&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fcc741308">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl --key /etc/ssl/nginx/nginx-repo.key --cert /etc/ssl/nginx/nginx-repo.crt https://pkgs.nginx.com/app-protect-security-updates/index.xml</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl --key /etc/ssl/nginx/nginx-repo.key --cert /etc/ssl/nginx/nginx-repo.crt https://pkgs.nginx.com/app-protect-security-updates/index.xml</span></span></code></pre></div>
</div><p><strong>Expected output:</strong></p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">text</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fcc755f10&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fcc755f10">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">&lt;repositories&gt;
</span></span><span class="line"><span class="cl">&lt;repository distro=&#34;centos&#34; version=&#34;6&#34; arch=&#34;x86_64&#34; prefix=&#34;centos/6/x86_64/&#34;&gt;
</span></span><span class="line"><span class="cl">&lt;/repository&gt;
</span></span><span class="line"><span class="cl">&lt;repository distro=&#34;centos&#34; version=&#34;7&#34; arch=&#34;x86_64&#34; prefix=&#34;centos/7/x86_64/&#34;&gt;
</span></span><span class="line"><span class="cl">&lt;package type=&#34;rpm&#34;&gt;
</span></span><span class="line"><span class="cl">  &lt;name&gt;app-protect-attack-signatures&lt;/name&gt;
</span></span><span class="line"><span class="cl">  &lt;arch&gt;x86_64&lt;/arch&gt;
</span></span><span class="line"><span class="cl">  &lt;version epoch=&#34;0&#34; ver=&#34;2019.07.16&#34; rel=&#34;1.el7.ngx&#34;/&gt;
</span></span><span class="line"><span class="cl">  &lt;location href=&#34;RPMS/app-protect-attack-signatures-2019.07.16-1.el7.ngx.x86_64.rpm&#34;/&gt;
</span></span><span class="line"><span class="cl">&lt;/package&gt;
</span></span><span class="line"><span class="cl">...</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">&lt;repositories&gt;
</span></span><span class="line"><span class="cl">&lt;repository distro=&#34;centos&#34; version=&#34;6&#34; arch=&#34;x86_64&#34; prefix=&#34;centos/6/x86_64/&#34;&gt;
</span></span><span class="line"><span class="cl">&lt;/repository&gt;
</span></span><span class="line"><span class="cl">&lt;repository distro=&#34;centos&#34; version=&#34;7&#34; arch=&#34;x86_64&#34; prefix=&#34;centos/7/x86_64/&#34;&gt;
</span></span><span class="line"><span class="cl">&lt;package type=&#34;rpm&#34;&gt;
</span></span><span class="line"><span class="cl">  &lt;name&gt;app-protect-attack-signatures&lt;/name&gt;
</span></span><span class="line"><span class="cl">  &lt;arch&gt;x86_64&lt;/arch&gt;
</span></span><span class="line"><span class="cl">  &lt;version epoch=&#34;0&#34; ver=&#34;2019.07.16&#34; rel=&#34;1.el7.ngx&#34;/&gt;
</span></span><span class="line"><span class="cl">  &lt;location href=&#34;RPMS/app-protect-attack-signatures-2019.07.16-1.el7.ngx.x86_64.rpm&#34;/&gt;
</span></span><span class="line"><span class="cl">&lt;/package&gt;
</span></span><span class="line"><span class="cl">...</span></span></code></pre></div>
</div><hr>
<h2 
id="whats-next">What&rsquo;s Next  <a class="headerlink float-right" href="#whats-next" title="What&rsquo;s Next"><i class="fas fa-link fa-xs"></i></a>
</h2><p>Now that configuration management is set up, you can use the NGINX Instance Manager REST API to:</p>
<ul>
<li>Manage NGINX App Protect WAF security policies.</li>
<li>View system information about your NGINX App Protect WAF instances.</li>
<li>Update Attack Signatures and Threat Campaigns.</li>
</ul>
<p>To learn more, see <a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/manage-waf-security-policies/">Manage WAF Security Policies and Security Log Profiles</a>.</p>

        
        

        <hr>
  
        
        <div class="last-modified">
          
<div>
    <a href="https://github.com/nginx/documentation//tree/main/content/nim/nginx-app-protect/setup-waf-config-management.md" class="" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View source</a>
  </div>
  <div>
    <a href="https://github.com/nginx/documentation//edit/main/content/nim/nginx-app-protect/setup-waf-config-management.md" class="" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  </div>
  <div>
    <a href="https://github.com/nginx/documentation//issues/new?title=Set%20up%20WAF%20configuration%20management&amp;template=2-bug_report.md" class="" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create a new issue</a>
  </div>



        </div>
        

        
         
<script type='text/javascript'> 
    (function(){var g=function(e,h,f,g){ 
        this.get=function(a){
            for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){
                for(var d=c[b];" "==d.charAt(0);)
                    d=d.substring(1,d.length);
                    if(0==d.indexOf(a))
                        return d.substring(a.length,d.length)
            }
            return null
        }; 
        
        this.set=function(a,c){
            var b="",b=new Date;
            b.setTime(b.getTime()+6048E5);
            b="; expires="+b.toGMTString();
            document.cookie=a+"="+c+b+"; path=/; "
        }; 
        
        this.check=function(){
            var a=this.get(f);
            if(a)
                a=a.split(":");
            else if(100!=e)
                "v"==h&&(e=Math.random()>=e/100?0:100),
                a=[h,e,0],
                this.set(f,a.join(":"));
            else 
                return!0;
            var c=a[1];
            if(100==c)
                return!0;
            switch(a[0]){
                case "v":
                    return!1;
                case "r":
                    return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c
            }
            return!0
        }; 

        this.go=function(){
            if(this.check()){
                var a=document.createElement("script");
                a.type="text/javascript";
                a.src=g;
                document.body&&document.body.appendChild(a)
            }
        };

        this.start=function(){
            var t=this;
            "complete"!==document.readyState?window.addEventListener ?
                window.addEventListener("load",function(){t.go()},!1) : 
                window.attachEvent&&window.attachEvent("onload",function(){t.go()}):t.go()};
    }; 

    try{
        const project_id = window.location.hostname.includes("staging") ? "QSI_S_ZN_2YG73ads2zp5bN0" : "QSI_S_ZN_2QSTn2r41YlXrYk";
        const endpoint = window.location.hostname.includes("staging") ? "https://zn2yg73ads2zp5bn0-f5.siteintercept.qualtrics.com/SIE/?Q_ZID=ZN_2YG73ads2zp5bN0" : "https://zn2qstn2r41ylxryk-f5.siteintercept.qualtrics.com/SIE/?Q_ZID=ZN_2QSTn2r41YlXrYk";
        (new g(100,"r", project_id, endpoint)).start()
    }
    catch(i){}})();

    document.addEventListener("DOMContentLoaded", function () {
        document.querySelector(".qualtrics-feedback").id = window.location.hostname.includes("staging") ? "ZN_2YG73ads2zp5bN0" : "ZN_2QSTn2r41YlXrYk"
    });
</script>
<hr>
<div style="height: 60px;"></div>
<div class="qualtrics-feedback" id='ZN_2QSTn2r41YlXrYk'></div>


        

	
<div class="container flex">
	<ul class="next-prev-icon">

		
		
		<li style="flex:1; text-align: left; white-space: nowrap;"><a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/overview-nap-waf-config-management/" class="" title="Previous -- How WAF policy management works "><svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M23.378 46.5L1.94 25.06C1.80067 24.9209 1.69014 24.7556 1.61472 24.5738C1.53931 24.3919 1.50049 24.1969 1.50049 24C1.50049 23.8031 1.53931 23.6081 1.61472 23.4262C1.69014 23.2444 1.80067 23.0791 1.94 22.94L23.378 1.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M45.878 46.5L24.44 25.06C24.3007 24.9209 24.1901 24.7556 24.1147 24.5738C24.0393 24.3919 24.0005 24.1969 24.0005 24C24.0005 23.8031 24.0393 23.6081 24.1147 23.4262C24.1901 23.2444 24.3007 23.0791 24.44 22.94L45.878 1.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a></li>
		

		
			<li style="flex:1; text-align: right; white-space: nowrap;"><a href="http://localhost:1313/nginx-instance-manager/nginx-app-protect/manage-waf-security-policies/" class="" title="Next -- Manage and deploy WAF policies and log profiles"><svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.622 1.5L46.06 22.94C46.1993 23.0791 46.3099 23.2444 46.3853 23.4262C46.4607 23.6081 46.4995 23.8031 46.4995 24C46.4995 24.1969 46.4607 24.3919 46.3853 24.5738C46.3099 24.7556 46.1993 24.9209 46.06 25.06L24.622 46.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2.122 1.5L23.56 22.94C23.6993 23.0791 23.8099 23.2444 23.8853 23.4262C23.9607 23.6081 23.9995 23.8031 23.9995 24C23.9995 24.1969 23.9607 24.3919 23.8853 24.5738C23.8099 24.7556 23.6993 24.9209 23.56 25.06L2.122 46.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a></li>
		
		</ul>
	</div>

        </main>
        
          
            <div id="toc" class="col-md-3 d-none d-xl-block d-print-none nginx-toc align-top">
            <nav class="bd-links" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <h3 class="bd-toc-link">What's on This Page</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a>
      <ul>
        <li><a href="#before-you-begin">Before you begin</a></li>
        <li><a href="#limitations">Limitations</a></li>
      </ul>
    </li>
    <li><a href="#install-the-waf-compiler">Install the WAF compiler</a>
      <ul>
        <li><a href="#nap-waf-compiler-compatibility">WAF compiler and supported NGINX App Protect WAF versions</a></li>
        <li><a href="#debian-or-ubuntu">Debian or Ubuntu</a></li>
        <li><a href="#rhel-81-or-later">RHEL 8.1 or later</a></li>
        <li><a href="#rhel-74-or-later-centos">RHEL 7.4 or later; CentOS</a></li>
        <li><a href="#amazon-linux-2-lts">Amazon Linux 2 LTS</a></li>
        <li><a href="#oracle-linux-74-or-later">Oracle Linux 7.4 or later</a></li>
        <li><a href="#download-from-myf5">Download from MyF5</a></li>
        <li><a href="#automatically-download-and-install-new-waf-compiler">Automatically download and install new WAF compiler</a></li>
      </ul>
    </li>
    <li><a href="#set-up-attack-signatures-and-threat-campaigns">Set up attack signatures and threat campaigns</a>
      <ul>
        <li><a href="#automatically-download-latest-packages">Automatically Download Latest Packages</a></li>
        <li><a href="#manually-update-packages">Manually update packages</a></li>
        <li><a href="#update-the-security-monitoring-signature-database">Update the Security Monitoring signature database</a></li>
      </ul>
    </li>
    <li><a href="#set-up-compiler-resource-pruning">Set up compiler resource pruning</a></li>
    <li><a href="#onboard-nginx-app-protect-waf-instances">Onboard NGINX App Protect WAF instances</a>
      <ul>
        <li><a href="#install-nginx-agent">Install NGINX Agent</a></li>
        <li><a href="#configure-nginx-agent">Configure NGINX Agent</a></li>
        <li><a href="#verify-installation">Verify installation</a></li>
        <li><a href="#configure-docker-compose-for-nginx-app-protect-waf-v5">Configure Docker Compose for NGINX App Protect WAF v5</a></li>
      </ul>
    </li>
    <li><a href="#onboard-security-policies">Onboard security policies</a>
      <ul>
        <li><a href="#upload-custom-security-policies">Upload custom security policies</a></li>
      </ul>
    </li>
    <li><a href="#add-waf-config">Add WAF configuration to NGINX instances</a>
      <ul>
        <li><a href="#edit-the-nginx-configuration">Edit the NGINX configuration</a></li>
        <li><a href="#verify-configuration">Verify configuration</a></li>
      </ul>
    </li>
    <li><a href="#troubleshooting">Troubleshooting</a>
      <ul>
        <li><a href="#check-that-nginx-app-protect-waf-is-not-installed-on-the-nginx-instance-manager-host">Check that NGINX App Protect WAF is not installed on the NGINX Instance Manager host</a></li>
        <li><a href="#check-that-the-waf-compiler-version-matches-the-nginx-app-protect-waf-version">Check that the WAF compiler version matches the NGINX App Protect WAF version</a></li>
        <li><a href="#confirm-the-waf-compiler-is-working-correctly">Confirm the WAF compiler is working correctly</a></li>
        <li><a href="#confirm-nginx-agent-configuration-on-the-nginx-app-protect-waf-instance">Confirm NGINX Agent configuration on the NGINX App Protect WAF instance</a></li>
        <li><a href="#confirm-access-to-the-nginx-packages-repository">Confirm access to the NGINX packages repository</a></li>
      </ul>
    </li>
    <li><a href="#whats-next">What&rsquo;s Next</a></li>
  </ul>
</nav>
  </div>
</nav>
            </div>
          
        
        
      </div>
    </section>
  </section>
</div>




      </div>
  </section>

    <footer id="footer">
      
      <footer id="footer">
  <div class="container-fluid">
    <div class="row align-items-center">
      <div class="col-md-6 d-md-flex">
        <img class="nginx-logo-footer" src="http://localhost:1313/images/icons/NGINX-Part-of-F5-horiz-all-white-525x208@2x.png"/>
      </div>
    </div>

    
    <div class="row d-print-none d-none d-md-flex">
      <div class="col-md-3 d-none d-md-block">
        <span class="footer-head">Company</span>
        <ul class="footer-text">
          <li>
            <a
              href="https://www.f5.com/go/product/welcome-to-nginx"
              target="_blank"
              alt="Select to learn about F5 NGINX"
              >About F5 NGINX</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/company/events"
              target="_blank"
              alt="Select to learn about F5 events"
              >Events</a
            >
          </li>
        </ul>
        <br />
        <span class="footer-head">Resources</span>
        <ul class="footer-text">
          <li>
            <a
              href="https://www.f5.com/company/blog/nginx"
              target="_blank"
              alt="Select to visit the F5 NGINX blog"
              >Blog</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/go/faq/nginx-faq"
              target="_blank"
              alt="Select to visit the F5 NGINX frequently asked questions page"
              >FAQ</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/services"
              target="_blank"
              alt="Select to learn about F5 NGINX Support"
              >Professional Services</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/learn/training"
              target="_blank"
              alt="Select to learn about F5 training offerings"
              >Training</a
            >
          </li>
        </ul>
      </div>

      <div class="col-md-3 d-none d-md-block">
        <span class="footer-head">Products</span>
        <ul class="footer-text">
          <li>
            <a
              title="F5 NGINX One"
              aria-label="F5 NGINX One"
              href="https://www.f5.com/products/nginx/one"
              >F5 NGINX One</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Plus"
              aria-label="F5 NGINX Plus"
              href="https://www.f5.com/products/nginx/nginx-plus"
              >F5 NGINX Plus</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX App Protect"
              aria-label="F5 NGINX App Protect"
              href="https://www.f5.com/products/nginx/nginx-app-protect"
              >F5 NGINX App Protect</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Instance Manager"
              aria-label="F5 NGINX Instance Manager"
              href="https://www.f5.com/products/nginx/instance-manager"
              >F5 NGINX Instance Manager</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Ingress Controller"
              aria-label="F5 NGINX Ingress Controller"
              href="https://www.f5.com/products/nginx/nginx-ingress-controller"
              >F5 NGINX Ingress Controller</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Gateway Fabric"
              aria-label="F5 NGINX Gateway Fabric"
              href="https://www.f5.com/products/nginx/nginx-gateway-fabric"
              >F5 NGINX Gateway Fabric</a
            >
          </li>
          <li>
            <a
              title="F5 NGINXaaS for Azure"
              aria-label="F5 NGINXaaS for Azure"
              href="https://www.f5.com/products/nginx/f5-nginxaas-for-azure"
              >F5 NGINXaaS for Azure</a
            >
          </li>
        </ul>
      </div>

      <div class="col-md-3 d-none d-md-block">
        <span class="footer-head">NGINX on GitHub</span>
        <ul class="footer-text">
          <li>
            <a
              title="NGINX Open Source"
              aria-label="NGINX Open Source"
              href="https://github.com/nginx/nginx"
              ><span class="inner">NGINX Open Source</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Unit"
              aria-label="NGINX Unit"
              href="https://github.com/nginx/unit"
              ><span class="inner">NGINX Unit</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Amplify"
              aria-label="NGINX Amplify"
              href="https://github.com/nginxinc/nginx-amplify-agent"
              ><span class="inner">NGINX Amplify</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Agent"
              aria-label="NGINX Agent"
              href="https://github.com/nginx/Agent"
              ><span class="inner">NGINX Agent</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Kubernetes Ingress Controller"
              aria-label="NGINX Kubernetes Ingress Controller"
              href="https://github.com/nginxinc/kubernetes-ingress"
              ><span class="inner">NGINX Kubernetes Ingress Controller</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Gateway Fabric"
              aria-label="NGINX Gateway Fabric"
              href="https://github.com/nginxinc/nginx-gateway-fabric"
              ><span class="inner">NGINX Gateway Fabric</span></a
            >
          </li>
        </ul>
      </div>

      <div class="col-md-2 d-none d-md-block">
        <span class="footer-head">Social</span>
        <ul class="footer-social">
          <li>
            <a
              href="https://www.facebook.com/nginxinc"
              title="facebook"
              aria-label="facebook"
              target="_blank"
              rel="noreferrer"
              ><i class="fa-brands fa-facebook" aria-hidden="true"></i>
            </a>
          </li>
          <li>
            <a
              href="https://twitter.com/nginx"
              title="X"
              aria-label="x"
              target="_blank"
              rel="noreferrer"
              ><i class="fa-brands fa-x-twitter" aria-hidden="true"></i
            ></a>
          </li>
          <li>
            <a
              href="https://www.linkedin.com/company/nginx"
              title="linkedin"
              aria-label="linkedin"
              target="_blank"
              rel="noreferrer"
              ><i class="fa-brands fa-linkedin" aria-hidden="true"></i>
            </a>
          </li>
          <li>
            <a
              href="https://www.youtube.com/user/NginxInc"
              title="youtube"
              aria-label="youtube"
              target="_blank"
              rel="noreferrer"
              alt="NGINX Youtube Channel"
              ><i class="fa-brands fa-square-youtube" aria-hidden="true"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="site-info footer-text">
      <div class="text-center">
        <p>
          <a href="https://www.f5.com/"
            ><img class="f5-logo-footer" src="http://localhost:1313/images/icons/Logo_F5.svg" alt="F5 logo"></a
          >
          2025 F5, Inc. All rights reserved.
        </p>
        <p>
          <a
            href="https://www.f5.com/company/policies/trademarks"
            rel="noopener"
            target="_blank"
            >Trademarks</a
          >
          <a
            href="https://www.f5.com/company/policies"
            rel="noopener"
            target="_blank"
            >Policies</a
          >
          <a href="https://docs.nginx.com/ossc">Open Source Components</a>
          <a
            href="https://www.f5.com/company/policies/privacy-notice"
            rel="noopener"
            target="_blank"
            >Privacy</a
          >
          <a
            href="https://www.f5.com/company/policies/F5-California-privacy-summary"
            rel="noopener"
            target="_blank"
            >California Privacy</a
          >
          <a
            href="https://www.f5.com/company/policies/privacy-notice#no-sell"
            rel="noopener"
            target="_blank"
            >Do Not Sell My Personal Information</a
          >
          <span id="teconsent-v1"></span>
        </p>
      </div>
    </div>
    
  </div>
  
</footer>

      
    </footer>

    <footer data-mf="true" id="footer-v2" style="display:none;">
      
      <div class="footer-layout">
    <div class="footer-f5-trademark">
        <img class="f5-logo-footer" src="http://localhost:1313/images/icons/Logo_F5.svg" alt="F5 logo">
        <p>2025 F5, Inc. All rights reserved. NGINX is a registered trademark of F5, Inc.</p>
    </div>
    <div class="footer-useful-links">
        <a
            href="https://www.f5.com/company/policies/trademarks"
            rel="noopener"
            target="_blank"
            >Trademarks
        </a>
        <a
            href="https://www.f5.com/company/policies"
            rel="noopener"
            target="_blank"
            >Policies
        </a>
        <a
            href="https://www.f5.com/company/policies/privacy-notice"
            rel="noopener"
            target="_blank"
            >Privacy
        </a>
        <a
            href="https://www.f5.com/company/policies/F5-California-privacy-summary"
            rel="noopener"
            target="_blank"
            >California Privacy
        </a>
        <a
            href="https://www.f5.com/company/policies/privacy-notice#no-sell"
            rel="noopener"
            target="_blank"
            >Do Not Sell My Personal Information
        </a>
        <span id="teconsent-v2"></span>
    </div>
</div>

      
    </footer>
  
<script src="/js/jquery-3-6-4.min.js" type="text/javascript" integrity=""></script>


<script src="/js/kube.min.a3a07cceb64989e2f0bf41653ab4d8346ba4312270eb5cc80d6afad3bf30a0ca9768aaa2559cb582e663332c541edab6a4068ef2e88b739fa425e2e870eb0aff.js" type="text/javascript" integrity="sha512-o6B8zrZJieLwv0FlOrTYNGukMSJw61zIDWr6078woMqXaKqiVZy1guZjMyxUHtq2pAaO8uiLc5&#43;kJeLocOsK/w=="></script>



<script src="/js/bootstrap.bundle.min.c15ed88f56a52190ea645094409cbce5537eaaf108972f777c840037b8aa0c508f12e70b09e345cf8af7e450a8f6ce96ae974340f8bcd316e58d707c063b6f72.js" type="text/javascript"
  integrity="sha512-wV7Yj1alIZDqZFCUQJy85VN&#43;qvEIly93fIQAN7iqDFCPEucLCeNFz4r35FCo9s6WrpdDQPi80xbljXB8Bjtvcg=="></script>



<script src="/js/code-copy.bb21b72280613039f1fabb11acc6a901c07caaee454933031066fbda6b5406fd31077a80ec913ba32261224d138bcbb4a34d27c51efae571c68d59282943b9a4.js" type="text/javascript"></script>



<script src="/js/code-copy-v2.71bcaee23ab00cb45dc944f321264e21d25bc1ec1ae76f9596286cb408ea5654b4ee016e7914cc2554b237114eeb467d39df18735311f2d28480b3ccd2feb4ad.js" type="text/javascript"></script>





<script
  type="module"
  src="https://static.cloud.coveo.com/atomic/v3.19.0/atomic.esm.js"
  integrity="sha512-VA9k6iDWhwxl8bwKUYPD63l93lGX7daV60k3yFxEt9EuEq4iWvsu5COq1mZ8OXKl0KCOFlUSDXS32Cy+YwbufQ=="
  crossorigin="anonymous">
</script>


<script class="coveo-script" src="https://static.cloud.coveo.com/searchui/v2.10104/0/js/CoveoJsSearch.Lazy.min.js"
  integrity="sha512-HxdDBIp5snbqtu1TPkBnXLKEvN9IPz3PeZW8zT9KfsflV9Ck822XDroDlpVbfCfXeiu8C0RDVn0fdu7aGy/H1g=="
  crossorigin="anonymous"></script>

<script src="https://static.cloud.coveo.com/searchui/v2.10104/0/js/templates/templates.js"
  integrity="sha512-CR0Yk/LIwgh1MsKqjecDp/r6F9ipKc6gA+4+E1pplT3N3r1pk+la/HaqyDiKtjOFwrwIIbIYBFrUJgPql93QHw=="
  crossorigin="anonymous"></script>






<script src="/js/coveo.min.4acfd205930e2d31230100f345e0463332eb3e3af1b4aa9a6e3131b0b2bac53566ae4d18b390066fce94c0c75d39b5e121d1291f81e5accc1a82d93da9f11b7f.js" integrity="sha512-Ss/SBZMOLTEjAQDzReBGMzLrPjrxtKqabjExsLK6xTVmrk0Ys5AGb86UwMddObXhIdEpH4HlrMwagtk9qfEbfw=="
  type="text/javascript"></script>


















<script src="/js/sidebar.min.6fed0180a23d01103c68ffb054a183fba5e7ba673de8c56d85857af964dcc0c11623ee09f6185207a373127cb2547ff9247ae3516ed47c67e1b58dbe71e9d576.js" type="text/javascript" integrity="sha512-b&#43;0BgKI9ARA8aP&#43;wVKGD&#43;6Xnumc96MVthYV6&#43;WTcwMEWI&#43;4J9hhSB6NzEnyyVH/5JHrjUW7UfGfhtY2&#43;cenVdg=="></script>
  


<script src="/js/site-dropdown.min.3bb49b6f7d25bcd4a2b008525bb8538d84237348bf618b40970ff6eca87119d68c326ca7ba04854ad102be36495fe1d70f1cb239916555b67dd17683dc283333.js" type="text/javascript" integrity="sha512-O7Sbb30lvNSisAhSW7hTjYQjc0i/YYtAlw/27KhxGdaMMmynugSFStECvjZJX&#43;HXDxyyOZFlVbZ90XaD3CgzMw=="></script>



<script src="/js/product-selector.min.b588249327fb12c7602fa08eb618560171f54e7348d6c1bacfdbf541f5e13023493f64f78fb6d4b9014892e5e4f0aaaee95b859bb37aa53bbe8c0e27e65167d1.js" type="text/javascript" integrity="sha512-tYgkkyf7EsdgL6COthhWAXH1TnNI1sG6z9v1QfXhMCNJP2T3j7bUuQFIkuXk8Kqu6VuFm7N6pTu&#43;jA4n5lFn0Q=="></script>



<script src="/js/sidebar-v2.min.3f906631e696b2c88883bfcfc62371165359130cfd118ceb49893ae0d8760dc38177ee3bb94a61dee45023115de8445f0b9fe48f933618ef7ba7b3180a05adbd.js" type="text/javascript" integrity="sha512-P5BmMeaWssiIg7/PxiNxFlNZEwz9EYzrSYk64Nh2DcOBd&#43;47uUph3uRQIxFd6ERfC5/kj5M2GO97p7MYCgWtvQ=="></script> 
  <div id="consent_blackbar"></div>
</body>
</html>


