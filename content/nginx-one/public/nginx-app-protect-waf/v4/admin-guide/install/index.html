<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>  
  <style>
    body {
       
      visibility: hidden;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
  </style>
  
  <noscript>
    <style>
       
      body {
        visibility: visible;
      }
    </style>
  </noscript>
  


  <script>

    const setTheme = (isNewTheme) => {
      localStorage.setItem("useNewTheme", `${isNewTheme}`);
      
      const v1cssIds = [
        "cssFA1",
        "cssFA2",
        "cssFA3",
        "cssBootstrap",
        "css1",
        "css2",
        "css3",
        "css4",
        "css5",
        "css6",
      ];

      v1cssIds.forEach((cssId) => {
        const element = document.getElementById(cssId);
        if (element !== null) {
          element.disabled = isNewTheme;
        }
      });

      const v2cssIds = ["css7", "css9"];
      v2cssIds.forEach((cssId) => {
        const element = document.getElementById(cssId);
        if (element !== null) {
          element.disabled = !isNewTheme;
        }
      });

      
      const v1ElementIds = ["sidebar", "footer", "toc", "api", "search-v1", "breadcrumb-v1", "list-v1"]

      v1ElementIds.forEach((elementId) => {
        const element = document.getElementById(elementId);
        if (element !== null) {
          element.style.display = isNewTheme ? "none" : "";
        }

        const trustarc = document.getElementById("teconsent-v1");
        if (trustarc) {
          trustarc.id = isNewTheme ? "teconsent-v1" : "teconsent";
        }
      });

      document.querySelectorAll(".table-v1").forEach((table) => {
        table.style.display = isNewTheme ? "none" : "";
      });

      const notMfElements = ['[data-mf="false"]'];
      notMfElements.forEach((elementId) => {
        document.querySelectorAll(elementId).forEach((element) => {
          element.style.display = isNewTheme ? "none" : "";
        });
      })

      const mfElements = ['[data-mf="true"]'];
      mfElements.forEach((elementId) => {
        document.querySelectorAll(elementId).forEach((element) => {
          element.style.display = isNewTheme ? "" : "none";

          const trustarc = document.getElementById("teconsent-v2");
          if (trustarc) {
            trustarc.id = isNewTheme ? "teconsent" : "teconsent-v2";
          }
        });
      });

      document.getElementById("body").style.visibility = "visible";
    };

    const toggleTheme = () => {
      setTheme(!(localStorage.getItem("useNewTheme") === "true"));
    };

    
    const mf = toggleTheme;
    const useNewTheme = toggleTheme;

    document.addEventListener("DOMContentLoaded", () => {
      setTheme(localStorage.getItem("useNewTheme") === "true");
    });

    function gameCode(callback) {
      let kkeys = [];
      
      const code = "38,38,40,40,37,39,37,39,66,65";
      return (event) => {
        kkeys.push(event.keyCode);
        if (kkeys.toString().indexOf(code) >= 0) {
          callback(event);
          kkeys = [];
        }
      };
    }
    const handler = gameCode(() => {
      mf();
    });
    window.addEventListener("keydown", handler);

  </script>

  

  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>NGINX App Protect WAF Administration Guide | DEV -- docs-nginx-com</title>






<link rel="canonical" href="http://localhost:1313/nginx-app-protect-waf/v4/admin-guide/install/">







<meta property="article:publisher" content="https://www.facebook.com/nginxinc" />
<meta property="og:image" content="http://localhost:1313/images/icons/NGINX-Docs-new-docs-dark-1200x630.png" />
<meta property="og:image:width" content="500" />
<meta property="og:image:height" content="300" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="" />
<meta name="twitter:title" content="NGINX App Protect WAF Administration Guide" />
<meta name="twitter:site" content="@nginx" />
<meta name="twitter:image" content="http://localhost:1313/images/icons/NGINX-Docs-new-docs-dark-1200x630.png" />
<meta name="twitter:creator" content="@nginx" />

<meta http-equiv="last-modified" content="25/04/2025" />




<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'
    https://consent.trustarc.com/ https://mktg.tags.f5.com/basic/prod/utag.sync.js https://static.cloud.coveo.com/ https://*.f5.com/
    https://*.netlify.app https://gist.github.com
    https://tag.demandbase.com/pscSDsz4.min.js
    https://munchkin.brightfunnel.com/js/build/bf-munchkin.min.js
    https://www.googletagmanager.com/gtm.js
    https://www.google-analytics.com/
    https://www.google-analytics.com/analytics.js
    https://www.google-analytics.com/plugins/ua/linkid.js
    https://cdn.bizible.com/scripts/bizible.js
    https://cdn.bizible.com/xdc.js
    https://f5networksglobalprod.122.2o7.net/
    https://f5networksnginxdocs.122.2o7.net/
    https://*.siteintercept.qualtrics.com/SIE/?Q_ZID=*
    https://siteintercept.qualtrics.com/
    ;
    worker-src 'self' blob:">



<meta property="environment" type="development" />
<meta property="buildtype" type="webdocs" />
<meta property="isServer" type="true" />


<meta name="product" content="DEV -- docs-nginx-com">
<meta name="version" content="">
<meta name="doc_type" content="Manual">
  
  <link rel="shortcut icon" type="image/x-icon" href="http://localhost:1313/images/favicon-48x48.ico">

  
  










<link href="/css/v2/style.css" integrity="" rel="stylesheet" type="text/css" id="css7"
  disabled>


<link href="/css/inter/inter.987d1be34797653eabce3627efb116c263d4045fd5badfe003ff283c5a5da435d83a3fad6bfe524e3ce3cf8a41168a30e7aa42507961257eeb275024def0f9b9.css" integrity="sha512-mH0b40eXZT6rzjYn77EWwmPUBF/Vut/gA/8oPFpdpDXYOj&#43;ta/5STjzjz4pBFoow56pCUHlhJX7rJ1Ak3vD5uQ==" rel="stylesheet" type="text/css"
  id="cssInter">


<link href="/css/v2/highlight.min.9ef7c7ad221175216abc8a5827f967bcd7c0e035bfa91180acd26a2c36d54242ae5f485986c260d70b1bbdf225ad76cdbba3179afa7e4335282cc3080a17e337.css" rel="stylesheet" type="text/css" id="css9">





<link href="/fontawesome/css/all.min.4a71f958af9b67180f1ece38b96217f8b2c9009f7fd8f90f299e508808fa4daf3ac3e7ec6f64e47267d1c955f7a419cc15c57ba103c9925f507af4825abdd6e8.css" integrity="sha512-SnH5WK&#43;bZxgPHs44uWIX&#43;LLJAJ9/2PkPKZ5QiAj6Ta86w&#43;fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" rel="stylesheet" type="text/css"
  id="cssFA1">


<link href="/fontawesome/css/v4-font-face.min.5870089ba06cf03e9721f87919eaf15c961a65e071845949ed2da58c5bfbd18a714c5dab2c155f0455ebcd2f45bfd598a5e47ae19976e7aa3a51e22914eac1b6.css" integrity="sha512-WHAIm6Bs8D6XIfh5GerxXJYaZeBxhFlJ7S2ljFv70YpxTF2rLBVfBFXrzS9Fv9WYpeR64Zl256o6UeIpFOrBtg==" rel="stylesheet" type="text/css"
  id="cssFA2">


<link href="/fontawesome/css/v5-font-face.min.81bdf1c9f8ff16b1eda613d52d868a059f16c8c6045c3d7e0a0b771622a11666cdd94b8ea62b5edb0d4b826c3a3737ec3663065fe05b56b6b871e57de73f556b.css" integrity="sha512-gb3xyfj/FrHtphPVLYaKBZ8WyMYEXD1&#43;Cgt3FiKhFmbN2UuOpite2w1Lgmw6NzfsNmMGX&#43;BbVra4ceV95z9Vaw==" rel="stylesheet" type="text/css"
  id="cssFA3">



<link href="/css/bootstrap.min.3f9320327d6304dd356ac060534cfad10938431897a3cebec2515a84aaec41fdfb73d72ba39d7b5b35523cf575b432b3864bb6889d855602faef01b4dd21a734.css" integrity="sha512-P5MgMn1jBN01asBgU0z60Qk4QxiXo86&#43;wlFahKrsQf37c9cro517WzVSPPV1tDKzhku2iJ2FVgL67wG03SGnNA==" rel="stylesheet"
  type="text/css" id="cssBootstrap">



<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.10104/0/css/CoveoFullSearch.min.css"
  integrity="sha512-9/A9yVCU4GS6/iIwTRJKnan4Hf8gDKj3anwItN9QCsU8SixaT5xkjjWsZ/iq0TWaizhtqOLacadXJfxHlwYCcA=="
  crossorigin="anonymous" />


<link
  rel="stylesheet"
  href="https://static.cloud.coveo.com/atomic/v3.19.0/themes/coveo.css"
  integrity="sha512-m2BufPi8Tc6H2jcQfDj/PIl5H57C9jeqhbDFgFXKTtOhoC4S7ULXmx74FseZ8WXpfdT9uyccMHDBJDrIZlrUUQ=="
  crossorigin="anonymous"/>


<link href="/css/docs-nginx-com/nginx-site-header.min.80b10ed49ecfad93607ee771acca88d13dc958e6eecc642af3aa2b170c86b8dcce442e7b86c3e5298c95b0ab2b053a71074c2f15c28266c3a2c502275415b3a7.css" rel="stylesheet" type="text/css" id="css1">


<link href="/css/docs-nginx-com/style.min.2cd4748c438c49d012a5fdc6b98770223c4875fe0f89517b17423b6a5328af4d93d9d772207bfc51d9449781281e1eb8707dcc2f7467e6e24330c9b8c7c5f734.css" rel="stylesheet" type="text/css" id="css2">


<link href="/css/bootstrap-docs.min.8a70c94c72e3783cecd631bc1705c7843b2fdef99f1549f0bf7f774a4083173ee25974413a8206c2340c0fee9bb7a07acd41d41c78ae2280c96a2ce0faca2847.css" rel="stylesheet" type="text/css" id="css3">



<link href="/css/coveo.min.fce7d4df31de99e4f86510a90915820f236b8dcd02be030b27529af7ff10189f807c78cedacb91afa9d07f310a172c6046b1921832f199b9158898a7f74fa117.css" rel="stylesheet" type="text/css" id="css6">



<link href="/css/f5-hugo.min.42feae8b135e9380a66db9c3cb2803221888524a29f41cbc55790b5cb5a309ac7e6dd80e70ed0260370fd93c04b7aa8a5c3d6aca0964804341fad51cfcec963f.css" rel="stylesheet" type="text/css" id="css4">


<link href="/css/inline-overrides.min.495e6889d9955581580c654bad961bb33af6344b283af7e9a34648c5e8d5f1fe90efb8aac33359c4178efd36cd7cb92c7c6458d4175caff9c284b14bd9d2b97a.css" rel="stylesheet" type="text/css" id="css8">





<link href="/css/highlight.min.fe5647c4b67f4b3fcf0ea60b483479d567ba1b05ee6e816439207edfa3d310dbee79536278c67d89c1db5da275bde962a10163da375f05bd19743e2a80e1ad02.css" rel="stylesheet" type="text/css" id="css5">
  
  
  
  
  
  
        
  <script async="async" src="https://consent.trustarc.com/notice?domain=f5.com&c=teconsent&js=nj&noticeType=bb&text=true&gtm=1" crossorigin=""></script>
  
  

<script src="https://mktg.tags.f5.com/basic/prod/utag.sync.js"></script> 


  
  
  
  
  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-K5HG9JT');</script>
  
  </head>
  
  <body id="body">
    
   
<script type="text/javascript"> 
    (function(a,b,c,d) { 
        a='//mktg.tags.f5.com/basic/prod/utag.js'; 
        b=document;c='script';d=b.createElement(c);d.src=a; 
        d.type='text/java'+c;d.async=true; 
        a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a)})(); 
</script> 
    
  
    <header>
      
<div class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar navbar-fixed-top">
  <div class="container-fluid flex-md-row flex-column header-container">
    <a class="navbar-brand mr-0 mr-md-2" href="/" aria-label="NGINX Docs">
      <img class="navbar-img" src="http://localhost:1313/images/icons/NGINX-Docs-horiz-white-type.svg" alt="NGINX Docs">
    </a>
    
      <div class="navbar navbar-nav">
        
        <div id="searchbox">
          
          <div class="CoveoSearchbox" data-placeholder='Search NGINX Docs...'></div>
        </div>
        <atomic-search-interface id="search-standalone-header" data-mf="true" style="display:none;">
          <atomic-search-box redirection-url="/search.html">
          </atomic-search-box>
        </atomic-search-interface>
      </div>
    
    
    
    
    <ul class="navbar navbar-nav">
        <li class="nav-item-explore active">
          <button id="navbar-sites-button" class="button navbar-button">
              F5 Sites
              <i id="navbar-sites-button-icon" class="link-chevron-icon fa-solid fa-chevron-down"></i>
          </button>
          <div class="dropdown-content" id="dropdown-content">
            <ul>
              
                <li>
                  <a href="https://community.f5.com/" target="_blank" >DevCentral</a>
                  <p>Connect &amp; learn in our hosted community</p>
                </li>
              
                <li>
                  <a href="https://my.f5.com/" target="_blank" >MyF5</a>
                  <p>Your key to everything F5, including support, registration keys, and subscriptions</p>
                </li>
              
                <li>
                  <a href="https://nginx.org/" target="_blank" >NGINX</a>
                  <p>Learn more about NGINX Open Source and read the community blog</p>
                </li>
              
            </ul>
          </div>
        </li>
    </ul>
  </div>
</div>


    </header>
  
    <section class="base-layout" data-testid="base-layout">
      <section id="breadcrumb-v1">
        
          
          <nav aria-label="breadcrumb" class="breadcrumb navbar">
    <div class="nav flex-md-row">
        <ol class="breadcrumb">
            
            
            
            
                
            
            
                
            
            
                
            
            
                
            
            
                
            
            
            
                <li><a href="/">Home</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-app-protect-waf/">F5 NGINX App Protect WAF</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-app-protect-waf/v4/">Version 4 and Earlier</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-app-protect-waf/v4/admin-guide/">Administration Guides</a><i class="fas fa-chevron-right"></i></li>
                
            
                NGINX App Protect WAF Administration Guide
        </ol>
    </div>
</nav>
  
          
        
      </section>
  
      <div class="main container-fluid min-page-height" data-menu-id="/nginx-app-protect-waf/v4/admin-guide/install/">
        
<div class="docs-container row override-sidebar-collapse">
<div class="docs-container row override-sidebar-collapse">
  <nav id="sidebar" class="sidenav overflow-auto col-md-3 d-none d-xl-block d-print-none align-top">
    

<div id="sidebar-wrapper">
     <div id="sidebar" class="sidebar" aria-label="Sidebar navigation">
        <button id="sidebar-toggle-button" title="Toggle sidebar navigation" role="button" aria-controls="sidebar-content">
           <i class="fa fa-chevron-right sidebar-visible-collapsed"></i>
           <i class="fa fa-chevron-left sidebar-visible-expanded"></i>
        </button>
        <div id="sidebar-content">
            <h3>
                <a class="sidebar-title" href="http://localhost:1313/nginx-app-protect-waf/" alt="F5 NGINX App Protect WAF"><img
                        class="card-img-top" src="http://localhost:1313//images/icons/NGINX-App-Protect-WAF-product-icon.svg"
                        alt="F5 NGINX App Protect WAF">
                    F5 NGINX App Protect WAF</a>
            </h3>
            <ul>
            
            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-app-protect-waf/v4/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nap-waf--version-4-and-earlier" aria-controls="nap-waf--version-4-and-earlier">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Version 4 and Earlier</a>
                            </li>
                        </div>
                        <div id="nap-waf--version-4-and-earlier" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v4/admin-guide/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v4--administration-guides">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Administration Guides</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v4--administration-guides" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/admin-guide/install/" href="http://localhost:1313/nginx-app-protect-waf/v4/admin-guide/install/">NGINX App Protect WAF Administration Guide</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/admin-guide/install-nms/" href="http://localhost:1313/nginx-app-protect-waf/v4/admin-guide/install-nms/">Using NGINX App Protect WAF with NGINX Management Suite</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/admin-guide/upgrade-nap-waf/" href="http://localhost:1313/nginx-app-protect-waf/v4/admin-guide/upgrade-nap-waf/">Upgrade NGINX App Protect WAF on Managed Instances</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v4/configuration-guide/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v4--configuration-guides">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Configuration Guides</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v4--configuration-guides" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/configuration-guide/configuration/" href="http://localhost:1313/nginx-app-protect-waf/v4/configuration-guide/configuration/">NGINX App Protect WAF Configuration Guide</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v4/declarative-policy/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v4--declarative-policy">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Declarative Policy</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v4--declarative-policy" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/declarative-policy/policy/" href="http://localhost:1313/nginx-app-protect-waf/v4/declarative-policy/policy/">NGINX App Protect WAF Declarative Policy</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v4/logging-overview/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v4--logging-overview">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Logging Overview</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v4--logging-overview" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/logging-overview/logs-overview/" href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/logs-overview/">NGINX App Protect WAF Logs Overview</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/logging-overview/security-log/" href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/security-log/">NGINX App Protect WAF Security Log</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/logging-overview/operation-logs/" href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/operation-logs/">NGINX App Protect WAF Operation Log</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/logging-overview/debug-logs/" href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/debug-logs/">NGINX App Protect WAF Debug Log</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/logging-overview/access-log/" href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/access-log/">NGINX App Protect WAF Access Log</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v5/troubleshooting-guide/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v4--troubleshooting-guide">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Troubleshooting Guide</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v4--troubleshooting-guide" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/troubleshooting-guide/troubleshooting/" href="http://localhost:1313/nginx-app-protect-waf/v4/troubleshooting-guide/troubleshooting/">NGINX App Protect WAF Troubleshooting Guide</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v4/releases/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v4--releases">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Releases</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v4--releases" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.14/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.14/">NGINX App Protect WAF 4.14</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.13/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.13/">NGINX App Protect WAF 4.13</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.12/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.12/">NGINX App Protect WAF 4.12</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.11/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.11/">NGINX App Protect WAF 4.11</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.10/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.10/">NGINX App Protect WAF 4.10</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.9/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.9/">NGINX App Protect WAF 4.9</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.8.1/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.8.1/">NGINX App Protect WAF 4.8.1</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.8/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.8/">NGINX App Protect WAF 4.8</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.7/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.7/">NGINX App Protect WAF 4.7</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.6/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.6/">NGINX App Protect WAF 4.6</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.5/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.5/">NGINX App Protect WAF 4.5</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.4/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.4/">NGINX App Protect WAF 4.4</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.3/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.3/">NGINX App Protect WAF 4.3</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.2/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.2/">NGINX App Protect WAF 4.2</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.1/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.1/">NGINX App Protect WAF 4.1</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-4.0/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.0/">NGINX App Protect WAF 4.0</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.12.2/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.12.2/">NGINX App Protect WAF 3.12.2</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.12/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.12/">NGINX App Protect WAF 3.12</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.11/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.11/">NGINX App Protect WAF 3.11</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.10/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.10/">NGINX App Protect WAF 3.10</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.9.1/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.9.1/">NGINX App Protect WAF 3.9.1</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.9/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.9/">NGINX App Protect WAF 3.9</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.8/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.8/">NGINX App Protect WAF 3.8</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.7/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.7/">NGINX App Protect WAF 3.7</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.6/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.6/">NGINX App Protect WAF 3.6</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.5/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.5/">NGINX App Protect WAF 3.5</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.4/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.4/">NGINX App Protect WAF 3.4</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.3/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.3/">NGINX App Protect WAF 3.3</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.2/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.2/">NGINX App Protect WAF 3.2</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.1/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.1/">NGINX App Protect WAF 3.1</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-3.0/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.0/">NGINX App Protect WAF 3.0</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-2.3/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-2.3/">NGINX App Protect WAF 2.3</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-2.2/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-2.2/">NGINX App Protect WAF 2.2</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-2.1/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-2.1/">NGINX App Protect WAF 2.1</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-2.0/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-2.0/">NGINX App Protect WAF 2.0</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-1.3/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-1.3/">NGINX App Protect WAF 1.3</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-1.2/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-1.2/">NGINX App Protect WAF 1.2</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-1.1/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-1.1/">NGINX App Protect WAF 1.1</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v4/releases/about-1.0/" href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-1.0/">NGINX App Protect WAF 1.0</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx-app-protect-waf/v5/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nap-waf--version-5" aria-controls="nap-waf--version-5">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Version 5</a>
                            </li>
                        </div>
                        <div id="nap-waf--version-5" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v5/admin-guide/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v5--administration-guides">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Administration Guides</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v5--administration-guides" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/admin-guide/overview/" href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/overview/">NGINX App Protect WAF Administration Guide</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/admin-guide/install/" href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/install/">Installing NGINX App Protect WAF</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/admin-guide/deploy-with-helm/" href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/deploy-with-helm/">Deploy NGINX App Protect WAF with Helm</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/admin-guide/deploy-with-manifests/" href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/deploy-with-manifests/">Deploy NGINX App Protect WAF with Manifests</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/admin-guide/deploy-on-docker/" href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/deploy-on-docker/">Deploy NGINX App Protect WAF with Docker</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/admin-guide/compiler/" href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/compiler/">NGINX App Protect WAF Compiler</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/admin-guide/upgrade-nap-waf/" href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/upgrade-nap-waf/">Upgrade NGINX App Protect WAF on Managed Instances</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v5/configuration-guide/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v5--configuration-guides">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Configuration Guides</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v5--configuration-guides" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/configuration-guide/configuration/" href="http://localhost:1313/nginx-app-protect-waf/v5/configuration-guide/configuration/">NGINX App Protect WAF Configuration Guide</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v5/declarative-policy/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v5--declarative-policy">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Declarative Policy</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v5--declarative-policy" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/declarative-policy/policy/" href="http://localhost:1313/nginx-app-protect-waf/v5/declarative-policy/policy/">NGINX App Protect WAF Declarative Policy</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v5/logging-overview/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v5--logging-overview">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Logging Overview</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v5--logging-overview" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/logging-overview/security-log/" href="http://localhost:1313/nginx-app-protect-waf/v5/logging-overview/security-log/">NGINX App Protect WAF Security Log</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/logging-overview/access-log/" href="http://localhost:1313/nginx-app-protect-waf/v5/logging-overview/access-log/">NGINX App Protect WAF Access Log</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/logging-overview/logs-overview/" href="http://localhost:1313/nginx-app-protect-waf/v5/logging-overview/logs-overview/">NGINX App Protect WAF Logs Overview</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v5/troubleshooting-guide/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v5--troubleshooting">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Troubleshooting</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v5--troubleshooting" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/troubleshooting-guide/troubleshooting/" href="http://localhost:1313/nginx-app-protect-waf/v5/troubleshooting-guide/troubleshooting/">NGINX App Protect WAF Troubleshooting Guide</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx-app-protect-waf/v5/releases/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nap-waf--v5--releases">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Releases</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nap-waf--v5--releases" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/releases/about-5.6/" href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.6/">NGINX App Protect WAF 5.6</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/releases/about-5.5/" href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.5/">NGINX App Protect WAF 5.5</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/releases/about-5.4/" href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.4/">NGINX App Protect WAF 5.4</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/releases/about-5.3/" href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.3/">NGINX App Protect WAF 5.3</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/releases/about-5.2/" href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.2/">NGINX App Protect WAF 5.2</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/releases/about-5.1/" href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.1/">NGINX App Protect WAF 5.1</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx-app-protect-waf/v5/releases/about-5.0/" href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.0/">NGINX App Protect WAF 5.0</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            

            </ul>
        
        </div>
    </div>
</div>

  </nav>

  
  
  <main class="content col d-block align-top content-has-toc" role="main">
  
    
  <section class="main-layout">
    <div class="sidebar-layout" id="sidebar-layout">
      <nav data-mf="true" id="sidebar-v2" class="sidebar" style="display:none;">
        


    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    





<atomic-search-interface id="search-standalone-sidebar" data-mf="true" style="display:none;">
    <atomic-search-box redirection-url="/search.html">
    </atomic-search-box>
</atomic-search-interface>
<button class="product-selector-button" id="product-selector-button">
    
    <div class="product-selector-name" id="product-selector-name">NGINX App Protect WAF</div>
    <div class="product-selector-button-icon" id="product-selector-button-icon">
        <svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg" id="product-selector-chevron-icon">
            <path d="M1 13L7 7L0.999999 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="product-selector-chevron-icon"/>
        </svg>     
    </div>
</button>
<div class="product-selector" id="product-selector">
    
    
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX ONE</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-one">NGINX One Console</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx">NGINX Plus</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-instance-manager">NGINX Instance Manager</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-ingress-controller">NGINX Ingress Controller</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-gateway-fabric">NGINX Gateway Fabric</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="https://nginx.org/en/docs/">NGINX Open Source</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/solutions/">Subscription Licensing &amp; Solutions</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-agent">NGINX Agent</a>
                </li>
            
            </ul>
        </div>
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX APP PROTECT</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-app-protect-waf">NGINX App Protect WAF</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-app-protect-dos">NGINX App Protect DoS</a>
                </li>
            
            </ul>
        </div>
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX AS A SERVICE</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginxaas/azure/">NGINX as a Service for Azure</a>
                </li>
            
            </ul>
        </div>
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX OTHER</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="https://unit.nginx.org/">NGINX Unit</a>
                </li>
            
            </ul>
        </div>
    
</div>
<div class="scrollbar-container">
    <div class="sidebar-navigation">
        <ul class="parent-collapsible-content">
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-7f7c14e5eb8150745de8410de59a0b22" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-7f7c14e5eb8150745de8410de59a0b22" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Version 4 and Earlier 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
            <input type="checkbox" id="toggle-2d3851ebcca023e8402ffbd425902942" class="toggle-checkbox" style="display: none;">
            <label for="toggle-2d3851ebcca023e8402ffbd425902942" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Administration Guides 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                  
                <span class="box current partial" id="current-page"></span>                 
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/admin-guide/install/" style="font-weight: bold;">NGINX App Protect WAF Administration Guide </a>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a>
      <ul>
        <li><a href="#using-nginx-app-protect-with-nginx-instance-manager">Using NGINX App Protect with NGINX Instance Manager</a></li>
      </ul>
    </li>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#storage-io-performance">Storage I/O Performance</a></li>
    <li><a href="#platform-security-considerations">Platform Security Considerations</a></li>
    <li><a href="#user-permissions">User Permissions</a></li>
    <li><a href="#alpine-installation">Alpine Installation</a></li>
    <li><a href="#amazon-linux-installation">Amazon Linux Installation</a></li>
    <li><a href="#debian-installation">Debian Installation</a></li>
    <li><a href="#oracle-linux--rhel-81-installation">Oracle Linux / RHEL 8.1+ Installation</a></li>
    <li><a href="#rhel-9-installation">RHEL 9+ Installation</a></li>
    <li><a href="#ubuntu-installation">Ubuntu Installation</a></li>
    <li><a href="#docker-deployments">Docker Deployments</a>
      <ul>
        <li><a href="#common-instructions">Common instructions</a></li>
        <li><a href="#alpine-dockerfile-example">Alpine Dockerfile example</a></li>
        <li><a href="#amazon-linux-dockerfile-example">Amazon Linux Dockerfile example</a></li>
        <li><a href="#debian-dockerfile-example">Debian Dockerfile example</a></li>
        <li><a href="#rhel-ubi8-dockerfile-example">RHEL UBI8 Dockerfile example</a></li>
        <li><a href="#rhel-ubi9-dockerfile-example">RHEL UBI9 Dockerfile example</a></li>
        <li><a href="#oracle-linux-dockerfile-example">Oracle Linux Dockerfile example</a></li>
        <li><a href="#ubuntu-dockerfile-example">Ubuntu Dockerfile example</a></li>
      </ul>
    </li>
    <li><a href="#converter-tool-docker-image">Converter Tool Docker Image</a>
      <ul>
        <li><a href="#converter-docker-deployment-instructions">Converter Docker Deployment Instructions</a></li>
        <li><a href="#rhel-ubi7-converter-docker-deployment-example">RHEL UBI7 Converter Docker Deployment Example</a></li>
        <li><a href="#rhel-ubi8-converter-docker-deployment-example">RHEL UBI8 Converter Docker Deployment Example</a></li>
        <li><a href="#rhel-ubi9-converter-docker-deployment-example">RHEL UBI9 Converter Docker Deployment Example</a></li>
        <li><a href="#oracle-linux-8-converter-docker-deployment-example">Oracle Linux 8 Converter Docker Deployment Example</a></li>
        <li><a href="#amazon-linux-2-converter-docker-deployment-example">Amazon Linux 2 Converter Docker Deployment Example</a></li>
        <li><a href="#debian-11--debian-12-converter-docker-deployment-example">Debian 11 / Debian 12 Converter Docker Deployment Example</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204--ubuntu-2404-converter-docker-deployment-example">Ubuntu 20.04 / Ubuntu 22.04 / Ubuntu 24.04 Converter Docker Deployment Example</a></li>
        <li><a href="#alpine-316--alpine-317--alpine-319-converter-docker-deployment-example">Alpine 3.16 / Alpine 3.17 / Alpine 3.19 Converter Docker Deployment Example</a></li>
      </ul>
    </li>
    <li><a href="#offline-installation">Offline Installation</a>
      <ul>
        <li><a href="#example-deployment-for-rhel">Example Deployment for RHEL</a></li>
        <li><a href="#example-deployment-for-debianubuntu">Example Deployment for Debian/Ubuntu</a></li>
      </ul>
    </li>
    <li><a href="#post-installation-checks">Post-Installation Checks</a></li>
    <li><a href="#attack-signatures-dependency-change-in-nginx-app-protect-waf">Attack Signatures Dependency Change in NGINX App Protect WAF</a>
      <ul>
        <li><a href="#attack-signatures-package">Attack Signatures Package</a></li>
      </ul>
    </li>
    <li><a href="#updating-app-protect-attack-signatures">Updating App Protect Attack Signatures</a>
      <ul>
        <li><a href="#installing-attack-signature-update">Installing Attack Signature Update</a></li>
        <li><a href="#rhel-81--oracle-linux-81">RHEL 8.1+ / Oracle Linux 8.1+</a></li>
        <li><a href="#rhel-9">RHEL 9+</a></li>
        <li><a href="#debian-11--debian-12">Debian 11 / Debian 12</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204">Ubuntu 20.04 / Ubuntu 22.04</a></li>
        <li><a href="#alpine-319">Alpine 3.19</a></li>
        <li><a href="#attack-signatures-when-upgrading-nginx-app-protect-waf">Attack Signatures When Upgrading NGINX App Protect WAF</a></li>
        <li><a href="#threat-campaigns-dependency-change-in-nginx-app-protect-waf">Threat Campaigns Dependency Change in NGINX App Protect WAF</a></li>
        <li><a href="#installing-threat-campaigns-update">Installing Threat Campaigns Update</a></li>
      </ul>
    </li>
    <li><a href="#updating-app-protect-threat-campaigns">Updating App Protect Threat Campaigns</a>
      <ul>
        <li><a href="#rhel-81--oracle-linux-81-1">RHEL 8.1+ / Oracle Linux 8.1+</a></li>
        <li><a href="#rhel-9-1">RHEL 9+</a></li>
        <li><a href="#alpine-316--alpine-317--alpine-319">Alpine 3.16 / Alpine 3.17 / Alpine 3.19</a></li>
        <li><a href="#debian-11--debian-12-1">Debian 11 / Debian 12</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204-1">Ubuntu 20.04 / Ubuntu 22.04</a></li>
      </ul>
    </li>
    <li><a href="#updating-app-protect-bot-signatures">Updating App Protect Bot Signatures</a>
      <ul>
        <li><a href="#rhel-81--oracle-linux-81-2">RHEL 8.1+ / Oracle Linux 8.1+</a></li>
        <li><a href="#rhel-9-2">RHEL 9+</a></li>
        <li><a href="#alpine-316--alpine-317--alpine-319-1">Alpine 3.16 / Alpine 3.17 / Alpine 3.19</a></li>
        <li><a href="#debian-11--debian-12-2">Debian 11 / Debian 12</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204-2">Ubuntu 20.04 / Ubuntu 22.04</a></li>
      </ul>
    </li>
    <li><a href="#upgrading-app-protect">Upgrading App Protect</a></li>
    <li><a href="#uninstall-app-protect">Uninstall App Protect</a>
      <ul>
        <li><a href="#rhel-81--oracle-linux-81--rhel-9">RHEL 8.1+ / Oracle Linux 8.1+ / RHEL 9+</a></li>
        <li><a href="#debian-11--debian-12--ubuntu-2004--ubuntu-2204--ubuntu-2404">Debian 11 / Debian 12 / Ubuntu 20.04 / Ubuntu 22.04 / Ubuntu 24.04</a></li>
        <li><a href="#alpine-316--alpine-317--alpine-319-2">Alpine 3.16 / Alpine 3.17 / Alpine 3.19</a></li>
      </ul>
    </li>
    <li><a href="#upgrading-app-protect-to-a-specific-version">Upgrading App Protect to a Specific Version</a>
      <ul>
        <li><a href="#rhel-81--oracle-linux-81--rhel-9-1">RHEL 8.1+ / Oracle Linux 8.1+ / RHEL 9+</a></li>
        <li><a href="#debian-11--debian-12-3">Debian 11 / Debian 12</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204-3">Ubuntu 20.04 / Ubuntu 22.04</a></li>
      </ul>
    </li>
    <li><a href="#upgrading-app-protect-to-the-latest-version">Upgrading App Protect to the latest version</a>
      <ul>
        <li><a href="#rhel-81--rhel-9--oracle-linux-81">RHEL 8.1+ / RHEL 9+ / Oracle Linux 8.1+</a></li>
        <li><a href="#debian-11--debian-12--ubuntu-2004--ubuntu-2204">Debian 11 / Debian 12 / Ubuntu 20.04 / Ubuntu 22.04</a></li>
      </ul>
    </li>
    <li><a href="#selinux-configuration">SELinux Configuration</a>
      <ul>
        <li><a href="#modifying-file-labels">Modifying File Labels</a></li>
        <li><a href="#syslog-to-custom-port">Syslog to Custom Port</a></li>
      </ul>
    </li>
  </ul>
</nav>
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/admin-guide/install-nms/" style="">Using NGINX App Protect WAF with NGINX Management Suite </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/admin-guide/upgrade-nap-waf/" style="">Upgrade NGINX App Protect WAF on Managed Instances </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-d8399080ca68c88dee77f413d6c6eb8b" class="toggle-checkbox" style="display: none;">
            <label for="toggle-d8399080ca68c88dee77f413d6c6eb8b" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Configuration Guides 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/configuration-guide/configuration/" style="">NGINX App Protect WAF Configuration Guide </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-f2ecd5f5767c08c757f1f5db3fc8034e" class="toggle-checkbox" style="display: none;">
            <label for="toggle-f2ecd5f5767c08c757f1f5db3fc8034e" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Declarative Policy 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/declarative-policy/policy/" style="">NGINX App Protect WAF Declarative Policy </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-a84be0ddf4e66485eba4d708591c4721" class="toggle-checkbox" style="display: none;">
            <label for="toggle-a84be0ddf4e66485eba4d708591c4721" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Logging Overview 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/logs-overview/" style="">NGINX App Protect WAF Logs Overview </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/security-log/" style="">NGINX App Protect WAF Security Log </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/operation-logs/" style="">NGINX App Protect WAF Operation Log </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/debug-logs/" style="">NGINX App Protect WAF Debug Log </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/logging-overview/access-log/" style="">NGINX App Protect WAF Access Log </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-785457d0d85be3768066ec502a32c93e" class="toggle-checkbox" style="display: none;">
            <label for="toggle-785457d0d85be3768066ec502a32c93e" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Troubleshooting Guide 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/troubleshooting-guide/troubleshooting/" style="">NGINX App Protect WAF Troubleshooting Guide </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-32e6e6a300adaf7bc875f71de9e14393" class="toggle-checkbox" style="display: none;">
            <label for="toggle-32e6e6a300adaf7bc875f71de9e14393" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Releases 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.14/" style="">NGINX App Protect WAF 4.14 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.13/" style="">NGINX App Protect WAF 4.13 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.12/" style="">NGINX App Protect WAF 4.12 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.11/" style="">NGINX App Protect WAF 4.11 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.10/" style="">NGINX App Protect WAF 4.10 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.9/" style="">NGINX App Protect WAF 4.9 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.8.1/" style="">NGINX App Protect WAF 4.8.1 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.8/" style="">NGINX App Protect WAF 4.8 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.7/" style="">NGINX App Protect WAF 4.7 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.6/" style="">NGINX App Protect WAF 4.6 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.5/" style="">NGINX App Protect WAF 4.5 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.4/" style="">NGINX App Protect WAF 4.4 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.3/" style="">NGINX App Protect WAF 4.3 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.2/" style="">NGINX App Protect WAF 4.2 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.1/" style="">NGINX App Protect WAF 4.1 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-4.0/" style="">NGINX App Protect WAF 4.0 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.12.2/" style="">NGINX App Protect WAF 3.12.2 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.12/" style="">NGINX App Protect WAF 3.12 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.11/" style="">NGINX App Protect WAF 3.11 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.10/" style="">NGINX App Protect WAF 3.10 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.9.1/" style="">NGINX App Protect WAF 3.9.1 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.9/" style="">NGINX App Protect WAF 3.9 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.8/" style="">NGINX App Protect WAF 3.8 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.7/" style="">NGINX App Protect WAF 3.7 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.6/" style="">NGINX App Protect WAF 3.6 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.5/" style="">NGINX App Protect WAF 3.5 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.4/" style="">NGINX App Protect WAF 3.4 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.3/" style="">NGINX App Protect WAF 3.3 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.2/" style="">NGINX App Protect WAF 3.2 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.1/" style="">NGINX App Protect WAF 3.1 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-3.0/" style="">NGINX App Protect WAF 3.0 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-2.3/" style="">NGINX App Protect WAF 2.3 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-2.2/" style="">NGINX App Protect WAF 2.2 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-2.1/" style="">NGINX App Protect WAF 2.1 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-2.0/" style="">NGINX App Protect WAF 2.0 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-1.3/" style="">NGINX App Protect WAF 1.3 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-1.2/" style="">NGINX App Protect WAF 1.2 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-1.1/" style="">NGINX App Protect WAF 1.1 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v4/releases/about-1.0/" style="">NGINX App Protect WAF 1.0 </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-b15959597292934ffe771956f825d77b" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-b15959597292934ffe771956f825d77b" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Version 5 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
            <input type="checkbox" id="toggle-f569a7fa0e4d3de9c70dae244b27b695" class="toggle-checkbox" style="display: none;">
            <label for="toggle-f569a7fa0e4d3de9c70dae244b27b695" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Administration Guides 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/overview/" style="">NGINX App Protect WAF Administration Guide </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/install/" style="">Installing NGINX App Protect WAF </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/deploy-with-helm/" style="">Deploy NGINX App Protect WAF with Helm </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/deploy-with-manifests/" style="">Deploy NGINX App Protect WAF with Manifests </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/deploy-on-docker/" style="">Deploy NGINX App Protect WAF with Docker </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/compiler/" style="">NGINX App Protect WAF Compiler </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/admin-guide/upgrade-nap-waf/" style="">Upgrade NGINX App Protect WAF on Managed Instances </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-ba5280a2dc88e2ef839cbdf99dd63718" class="toggle-checkbox" style="display: none;">
            <label for="toggle-ba5280a2dc88e2ef839cbdf99dd63718" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Configuration Guides 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/configuration-guide/configuration/" style="">NGINX App Protect WAF Configuration Guide </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-32298ec202b6ded814ea2044cb7b2329" class="toggle-checkbox" style="display: none;">
            <label for="toggle-32298ec202b6ded814ea2044cb7b2329" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Declarative Policy 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/declarative-policy/policy/" style="">NGINX App Protect WAF Declarative Policy </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-44f8e13744a3277f9d094e0ab4e169e0" class="toggle-checkbox" style="display: none;">
            <label for="toggle-44f8e13744a3277f9d094e0ab4e169e0" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Logging Overview 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/logging-overview/security-log/" style="">NGINX App Protect WAF Security Log </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/logging-overview/access-log/" style="">NGINX App Protect WAF Access Log </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/logging-overview/logs-overview/" style="">NGINX App Protect WAF Logs Overview </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-aceec0e2fe4ec190c9b41c79e11e4032" class="toggle-checkbox" style="display: none;">
            <label for="toggle-aceec0e2fe4ec190c9b41c79e11e4032" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Troubleshooting 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/troubleshooting-guide/troubleshooting/" style="">NGINX App Protect WAF Troubleshooting Guide </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-0e34ddcd46826354bb34b18a381baf59" class="toggle-checkbox" style="display: none;">
            <label for="toggle-0e34ddcd46826354bb34b18a381baf59" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Releases 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.6/" style="">NGINX App Protect WAF 5.6 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.5/" style="">NGINX App Protect WAF 5.5 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.4/" style="">NGINX App Protect WAF 5.4 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.3/" style="">NGINX App Protect WAF 5.3 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.2/" style="">NGINX App Protect WAF 5.2 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.1/" style="">NGINX App Protect WAF 5.1 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx-app-protect-waf/v5/releases/about-5.0/" style="">NGINX App Protect WAF 5.0 </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
                
            </li>
        
        </ul>
    </div>
</div>
      </nav>
    </div>

    <section class="content-layout">
      <div data-cms-edit="content" class="text-content">
        <section class="breadcrumb-layout" data-mf="true" style="display: none;">
          
            
            <nav aria-label="breadcrumb" class="breadcrumb navbar">
    <div class="nav flex-md-row">
        <ol class="breadcrumb">
            
            
            
            
                
            
            
                
            
            
                
            
            
                
            
            
                
            
            
            
                <li><a href="/">Home</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-app-protect-waf/">F5 NGINX App Protect WAF</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-app-protect-waf/v4/">Version 4 and Earlier</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-app-protect-waf/v4/admin-guide/">Administration Guides</a><i class="fas fa-chevron-right"></i></li>
                
            
                NGINX App Protect WAF Administration Guide
        </ol>
    </div>
</nav>
  
            
          
        </section>
        <h1>NGINX App Protect WAF Administration Guide</h1>
        <h2 
id="overview">Overview  <a class="headerlink float-right" href="#overview" title="Overview"><i class="fas fa-link fa-xs"></i></a>
</h2><p>F5 NGINX App Protect WAF provides web application firewall (WAF) security protection for your web applications, including OWASP Top 10; response inspection; Meta characters check; HTTP protocol compliance; evasion techniques; disallowed file types; JSON &amp; XML well-formedness; sensitive parameters &amp; Data Guard. Refer to <a href="http://localhost:1313/nginx-app-protect-waf/v4/configuration-guide/configuration/#supported-security-policy-features">Supported Security Policy Features</a> section for a more detailed description.</p>
<p>This guide explains how to deploy NGINX App Protect WAF as well as upgrade App Protect and the App Protect signature sets.<br></p>
<h3 
id="using-nginx-app-protect-with-nginx-instance-manager">Using NGINX App Protect with NGINX Instance Manager  <a class="headerlink float-right" href="#using-nginx-app-protect-with-nginx-instance-manager" title="Using NGINX App Protect with NGINX Instance Manager"><i class="fas fa-link fa-xs"></i></a>
</h3><p>NGINX Instance Manager provides centralized configuration management and visibility for your NGINX App Protect WAF fleet.
After completing the NGINX App Protect WAF installation, refer to the <a href="https://docs.nginx.com/nginx-instance-manager/deploy/" target="_blank" rel="noopener">NGINX Instance Manager Installation Guide</a> for the deployment instructions.</p>
<h2 
id="prerequisites">Prerequisites  <a class="headerlink float-right" href="#prerequisites" title="Prerequisites"><i class="fas fa-link fa-xs"></i></a>
</h2><p>NGINX App Protect WAF is available to customers as a downloadable dynamic module at an additional cost. To purchase or add NGINX App Protect WAF to an existing NGINX Plus subscription, contact the NGINX sales team.</p>
<p>NGINX Plus Release 22 and later supports NGINX App Protect WAF.</p>
<p>NGINX App Protect WAF supports the following operating systems:</p>
<ul>
<li><a href="#alpine-installation">Alpine 3.19</a></li>
<li><a href="#amazon-linux-installation">Amazon Linux 2023</a></li>
<li><a href="#debian-10--debian-11--debian-12-installation">Debian 11 (Bullseye) &amp; 12 (Bookworm)</a></li>
<li><a href="#oracle-linux-81-installation">Oracle Linux 8.1.x and above</a></li>
<li><a href="#rhel-81-installation">RHEL 8.1.x and above</a></li>
<li><a href="#rhel-9-installation">RHEL 9 and above</a></li>
<li><a href="#ubuntu-installation">Ubuntu 20.04 (Focal), 22.04 (Jammy) &amp; 24.04 (Noble)</a></li>
</ul>
<p>The NGINX App Protect WAF package has the following dependencies:</p>
<ol>
<li><strong>nginx-plus-module-appprotect</strong> - NGINX Plus dynamic module for App Protect</li>
<li><strong>app-protect-engine</strong> - The App Protect enforcement engine</li>
<li><strong>app-protect-plugin</strong> - The App Protect connector API between the engine and the NGINX Plus dynamic module</li>
<li><strong>app-protect-compiler</strong> - The App Protect enforcement engine compiler agent</li>
<li><strong>app-protect-common</strong> - The App Protect shared libraries package</li>
<li><strong>app-protect-geoip</strong> - The App Protect geolocation update package</li>
<li><strong>app-protect-graphql</strong> - The App Protect shared library package for GraphQL protection</li>
<li><strong>app-protect-attack-signatures</strong> - The App Protect attack signatures update package</li>
<li><strong>app-protect-threat-campaigns</strong> - The App Protect threat campaigns update package</li>
<li><strong>app-protect-bot-signatures</strong> - The App Protect bot signatures update package</li>
<li><strong>app-protect-selinux</strong> - The prebuilt SELinux policy module for NGINX App Protect WAF (optional dependency)</li>
</ol>
<p>See the NGINX Plus full list of prerequisites for more details. NGINX App Protect WAF can be installed as a module to an existing NGINX Plus installation or as a complete NGINX Plus with App Protect installation in a clean environment.</p>
<h2 
id="storage-io-performance">Storage I/O Performance  <a class="headerlink float-right" href="#storage-io-performance" title="Storage I/O Performance"><i class="fas fa-link fa-xs"></i></a>
</h2><p>When deploying App Protect on NGINX Plus take into consideration the performance of storage on which it is going to be installed.
The storage performance may greatly affect the time it takes NGINX Plus to reload whenever there is a configuration change, especially when NGINX App Protect WAF policies are being added or updated.
In order to assess the storage performance you can use a tool called <a href="https://fio.readthedocs.io/en/latest/fio_doc.html" target="_blank" rel="noopener">fio</a>. An example of usage follows: (you may need to use <code>sudo</code>):</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f1ce8c0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f1ce8c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">fio --filename<span class="o">=</span>/opt/tst --size<span class="o">=</span>100MB --direct<span class="o">=</span><span class="m">1</span> --rw<span class="o">=</span>randrw --bs<span class="o">=</span>4k --ioengine<span class="o">=</span>libaio --iodepth<span class="o">=</span><span class="m">256</span> --runtime<span class="o">=</span><span class="m">120</span> --numjobs<span class="o">=</span><span class="m">4</span> --time_based --group_reporting --name<span class="o">=</span>iops-test-job --eta-newline<span class="o">=</span><span class="m">1</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">fio --filename<span class="o">=</span>/opt/tst --size<span class="o">=</span>100MB --direct<span class="o">=</span><span class="m">1</span> --rw<span class="o">=</span>randrw --bs<span class="o">=</span>4k --ioengine<span class="o">=</span>libaio --iodepth<span class="o">=</span><span class="m">256</span> --runtime<span class="o">=</span><span class="m">120</span> --numjobs<span class="o">=</span><span class="m">4</span> --time_based --group_reporting --name<span class="o">=</span>iops-test-job --eta-newline<span class="o">=</span><span class="m">1</span></span></span></code></pre></div>
</div><p>The output fields relevant in this context are: <code>read: IOPS=</code> and <code>write: IOPS=</code>.
Below is a table showing how many seconds it takes a reload to complete, when NGINX Plus is reloaded with an updated policy of an average size, in environments of varying I/O performance, and comparable CPU/memory specs:</p>





<table class="table table-striped table-bordered table-v1">
  <thead>
      <tr>
          <th style="text-align: left">Read IOPS</th>
          <th style="text-align: left">Write IOPS</th>
          <th style="text-align: left">Reload Time</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">675</td>
          <td style="text-align: left">678</td>
          <td style="text-align: left">18</td>
      </tr>
      <tr>
          <td style="text-align: left">1575</td>
          <td style="text-align: left">1575</td>
          <td style="text-align: left">12</td>
      </tr>
      <tr>
          <td style="text-align: left">13400</td>
          <td style="text-align: left">13400</td>
          <td style="text-align: left">8</td>
      </tr>
  </tbody>
</table>






  


<div data-mf="true" style="display: none;" class="table-v2 table table-striped table-bordered narrow">
    <table>
  <thead>
      <tr>
          <th style="text-align: left">Read IOPS</th>
          <th style="text-align: left">Write IOPS</th>
          <th style="text-align: left">Reload Time</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">675</td>
          <td style="text-align: left">678</td>
          <td style="text-align: left">18</td>
      </tr>
      <tr>
          <td style="text-align: left">1575</td>
          <td style="text-align: left">1575</td>
          <td style="text-align: left">12</td>
      </tr>
      <tr>
          <td style="text-align: left">13400</td>
          <td style="text-align: left">13400</td>
          <td style="text-align: left">8</td>
      </tr>
  </tbody>
</table>

</div>
<h2 
id="platform-security-considerations">Platform Security Considerations  <a class="headerlink float-right" href="#platform-security-considerations" title="Platform Security Considerations"><i class="fas fa-link fa-xs"></i></a>
</h2><p>When deploying App Protect on NGINX Plus take the following precautions to secure the platform. This avoids the risk of causing a Denial of Service condition or compromising the platform security.</p>
<ul>
<li>Restrict permissions to the files on the NGINX App Protect WAF platform to user <strong>nginx</strong> and group <strong>nginx</strong>, especially for the sensitive areas containing the configuration.</li>
<li>Remove unnecessary remote access services on the platform.</li>
<li>Configure a Syslog destination on the same machine as App Protect and proxy to an external destination. This avoids eavesdropping and <a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" target="_blank" rel="noopener">man-in-the-middle</a> attacks on the Syslog channel.</li>
<li>Regularly update the Operating System (OS) to avoid known OS vulnerabilities which may impact the service.</li>
</ul>
<h2 
id="user-permissions">User Permissions  <a class="headerlink float-right" href="#user-permissions" title="User Permissions"><i class="fas fa-link fa-xs"></i></a>
</h2><p>If a user other than <strong>nginx</strong> is to be used, note the following:</p>
<ul>
<li>
<p>If <strong>nginx</strong> user creation is disallowed on the platform, the following warning may be seen during installation:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f227a88&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f227a88">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">warning: user nginx does not exist - using root</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">warning: user nginx does not exist - using root</span></span></code></pre></div>
</div></li>
<li>
<p>After first installation, upgrade, or security update installation, perform the following steps <strong>before</strong> starting/restarting/reloading NGINX:</p>
<ul>
<li>
<p>Modify user permissions on all installed NGINX App Protect WAF files:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f25ce18&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f25ce18">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">chown -R &lt;user&gt;:&lt;group&gt; /usr/share/ts /var/log/app_protect /opt/app_protect /etc/app_protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">chown -R &lt;user&gt;:&lt;group&gt; /usr/share/ts /var/log/app_protect /opt/app_protect /etc/app_protect</span></span></code></pre></div>
</div></li>
<li>
<p>Modify user of NGINX App Protect WAF processes:</p>
<p>For service startup modify the <strong>User</strong> in the following files on your platform:</p>
<p><code>nginx-app-protect.service</code></p>
<p>For <a href="#general-docker-deployment-instructions">docker deployment</a>, modify the <code>entrypoint.sh</code> script to use the correct user instead of <strong>nginx</strong> when starting up the <code>bd-socket-plugin</code> process.</p>
</li>
</ul>
</li>
</ul>
<h2 
id="alpine-installation">Alpine Installation  <a class="headerlink float-right" href="#alpine-installation" title="Alpine Installation"><i class="fas fa-link fa-xs"></i></a>
</h2><ol>
<li>
<p>If you already have NGINX packages in your system, back up your configs and logs:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f2a2b48&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f2a2b48">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
</div></li>
<li>
<p>Log in to the <a href="https://my.f5.com" target="_blank" rel="noopener">Customer Portal</a> and download the following two files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f2cfa08&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f2cfa08">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
</div></li>
<li>
<p>Upload <code>nginx-repo.key</code> to <code>/etc/apk/cert.key</code> and <code>nginx-repo.crt</code> to <code>/etc/apk/cert.pem</code>. Make sure that files do not contain other certificates and keys, as Alpine Linux does not support mixing client certificates for different repositories.</p>
</li>
<li>
<p>Add the NGINX public signing key to the directory <code>/etc/apk/keys</code>:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f311ca0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f311ca0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/nginx_signing.rsa.pub  https://cs.nginx.com/static/keys/nginx_signing.rsa.pub
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/nginx_signing.rsa.pub  https://cs.nginx.com/static/keys/nginx_signing.rsa.pub
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub</span></span></code></pre></div>
</div></li>
<li>
<p>Remove any previously configured NGINX Plus repository:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f33bc80&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f33bc80">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sed <span class="s2">&#34;/plus-pkgs.nginx.com/d&#34;</span> /etc/apk/repositories</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sed <span class="s2">&#34;/plus-pkgs.nginx.com/d&#34;</span> /etc/apk/repositories</span></span></code></pre></div>
</div></li>
<li>
<p>Add the NGINX Plus repository to <code>/etc/apk/repositories</code> file:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f380a10&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f380a10">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/plus/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/plus/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
</div></li>
<li>
<p>Add the NGINX App Protect WAF repository to <code>/etc/apk/repositories</code> file:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f3e3048&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f3e3048">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
</div></li>
<li>
<p>We recommend removing all community-supported NGINX packages. Note that all NGINX modules will be removed as well.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f42cfe0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f42cfe0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk del -r app-protect
</span></span><span class="line"><span class="cl">sudo apk del -r nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk del -r app-protect
</span></span><span class="line"><span class="cl">sudo apk del -r nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Update the repository and install the most recent version of the NGINX Plus and NGINX App Protect WAF:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f464e68&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f464e68">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update
</span></span><span class="line"><span class="cl">sudo apk add app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update
</span></span><span class="line"><span class="cl">sudo apk add app-protect</span></span></code></pre></div>
</div><p>Alternatively, use the following commands to install the most recent version of NGINX App Protect WAF for NGINX Plus R28:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f4a1340&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f4a1340">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update
</span></span><span class="line"><span class="cl">sudo apk add app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update
</span></span><span class="line"><span class="cl">sudo apk add app-protect</span></span></code></pre></div>
</div><p>Alternatively, use the following commands to list available versions:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f4dcc60&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f4dcc60">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update
</span></span><span class="line"><span class="cl">sudo apk info app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update
</span></span><span class="line"><span class="cl">sudo apk info app-protect</span></span></code></pre></div>
</div><p>Finally, install a specific version from the output of command above. For example:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f50c230&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f50c230">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk add app-protect<span class="o">=</span>30.4.457.0-r1</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk add app-protect<span class="o">=</span>30.4.457.0-r1</span></span></code></pre></div>
</div></li>
<li>
<p>Check the NGINX binary version to ensure that you have NGINX Plus installed correctly:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f532778&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f532778">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
</div></li>
<li>
<p>Load the NGINX App Protect WAF module on the main context in the <code>nginx.conf</code> file:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f55cf28&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f55cf28">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Enable NGINX App Protect WAF on an <code>http/server/location</code> context in the <code>nginx.conf</code> via:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f57d2c8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f57d2c8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Start the App Protect and NGINX services:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f5b68c0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f5b68c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo service nginx-app-protect start
</span></span><span class="line"><span class="cl">sudo service nginx start</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo service nginx-app-protect start
</span></span><span class="line"><span class="cl">sudo service nginx start</span></span></code></pre></div>
</div></li>
</ol>
<hr>
<h2 
id="amazon-linux-installation">Amazon Linux Installation  <a class="headerlink float-right" href="#amazon-linux-installation" title="Amazon Linux Installation"><i class="fas fa-link fa-xs"></i></a>
</h2><ol>
<li>
<p>If you already have NGINX packages in your system, back up your configuration and log files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f64bb78&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f64bb78">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
</div></li>
<li>
<p>Create the <code>/etc/ssl/nginx/</code> directory:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f6cb670&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f6cb670">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Log into <a href="https://my.f5.com" target="_blank" rel="noopener">MyF5</a> and download the following two files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f7184e8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5f7184e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
</div></li>
<li>
<p>Copy <code>nginx-repo.key</code> and <code>nginx-repo.crt</code> to the RHEL server&rsquo;s <code>/etc/ssl/nginx/</code> directory. Use an SCP client or another secure file transfer tool to perform this task.</p>
</li>
<li>
<p>Install prerequisite packages:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f73e648&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f73e648">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install ca-certificates wget</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install ca-certificates wget</span></span></code></pre></div>
</div></li>
<li>
<p>Remove any previously downloaded NGINX Plus repository files from <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f780cc8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f780cc8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/yum.repos.d/plus-*.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/yum.repos.d/plus-*.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Add the NGINX Plus repository by downloading the file <code>plus-amazonlinux2023.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f7a3390&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f7a3390">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/plus-amazonlinux2023.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/plus-amazonlinux2023.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Add the NGINX App Protect WAF repository by downloading the file <code>app-protect-amazonlinux2023.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f7e36e8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f7e36e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-amazonlinux2023.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-amazonlinux2023.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Enable Yum repositories to pull App Protect dependencies:</p>
<p>Download the file <code>dependencies.amazonlinux2023.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f890c58&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f890c58">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.amazonlinux2023.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.amazonlinux2023.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f8bfa58&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f8bfa58">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect</span></span></code></pre></div>
</div><p>Alternatively, you can use the following command to list available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f90ebf8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f90ebf8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect</span></span></code></pre></div>
</div><p>Then, install a specific version from the output of command above. For example:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f94fef0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f94fef0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-31+4.641.0</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-31+4.641.0</span></span></code></pre></div>
</div></li>
<li>
<p>Check the NGINX binary version to ensure that you have NGINX Plus installed correctly:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f98d750&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f98d750">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
</div></li>
<li>
<p>Load the NGINX App Protect WAF module on the main context in the <code>nginx.conf</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f9c7518&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f9c7518">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Enable NGINX App Protect WAF on an <code>http/server/location</code> context in the <code>nginx.conf</code> file:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5f9fb520&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5f9fb520">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Optionally, install a prebuilt SELinux policy module for NGINX App Protect WAF (or configure SELinux as appropriate per your organization&rsquo;s security policies):</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fa3acc0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5fa3acc0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-selinux</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-selinux</span></span></code></pre></div>
</div><p>If you encounter any issues, check the <a href="http://localhost:1313/nginx-app-protect-waf/v4/troubleshooting-guide/troubleshooting/#selinux">Troubleshooting Guide</a>.</p>
</li>
<li>
<p>To enable the NGINX/App Protect WAF service start at boot, run the command:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fa7db10&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5fa7db10">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> nginx.service</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> nginx.service</span></span></code></pre></div>
</div></li>
<li>
<p>Start the NGINX service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fabe638&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5fabe638">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
</div></li>
</ol>
<h2 
id="debian-installation">Debian Installation  <a class="headerlink float-right" href="#debian-installation" title="Debian Installation"><i class="fas fa-link fa-xs"></i></a>
</h2><ol>
<li>
<p>If you already have NGINX packages in your system, back up your configs and logs:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fc01a18&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5fc01a18">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
</div></li>
<li>
<p>Create the <code>/etc/ssl/nginx/</code> directory and change the directory to the SSL certificate directory after creating the folder:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fc292e8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5fc292e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /etc/ssl/nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /etc/ssl/nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Log in to the <a href="https://my.f5.com" target="_blank" rel="noopener">Customer Portal</a> and download the following two files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fc83450&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5fc83450">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
</div></li>
<li>
<p>Copy the above two files to the Debian server&rsquo;s <code>/etc/ssl/nginx/</code> directory. Use an SCP client or another secure file transfer tool to perform this task.</p>
</li>
<li>
<p>Install prerequisite packages:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fcb35d8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5fcb35d8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install apt-transport-https lsb-release ca-certificates wget gnupg2</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install apt-transport-https lsb-release ca-certificates wget gnupg2</span></span></code></pre></div>
</div><blockquote class="note">
  <div><strong>Note:</strong><br/> In case the apt installation or database update fails due to release info change, run the below command before you install.</div>
</blockquote>




<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fcd2dc0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5fcd2dc0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update --allow-releaseinfo-change</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update --allow-releaseinfo-change</span></span></code></pre></div>
</div></li>
<li>
<p>Download and add the NGINX signing keys:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fdb5aa8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5fdb5aa8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> gpg --dearmor <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> gpg --dearmor <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> gpg --dearmor <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> gpg --dearmor <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
</div></li>
<li>
<p>Remove any previous NGINX Plus repository and apt configuration files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fdeaa50&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5fdeaa50">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/apt/sources.list.d/nginx-plus.list
</span></span><span class="line"><span class="cl">sudo rm /etc/apt/sources.list.d/*app-protect*.list
</span></span><span class="line"><span class="cl">sudo rm /etc/apt/apt.conf.d/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/apt/sources.list.d/nginx-plus.list
</span></span><span class="line"><span class="cl">sudo rm /etc/apt/sources.list.d/*app-protect*.list
</span></span><span class="line"><span class="cl">sudo rm /etc/apt/apt.conf.d/90pkgs-nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Add NGINX Plus repository:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5fe3da70&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5fe3da70">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/plus/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/nginx-plus.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/plus/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/nginx-plus.list</span></span></code></pre></div>
</div></li>
<li>
<p>Add NGINX App Protect WAF repositories:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5ff09ff8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5ff09ff8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/nginx-app-protect.list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/nginx-app-protect.list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
</div></li>
<li>
<p>Download the apt configuration to <code>/etc/apt/apt.conf.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5ff781b0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f5ff781b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Update the repository and install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f5ffc9678&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f5ffc9678">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get install app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get install app-protect</span></span></code></pre></div>
</div><p>Alternatively, to install a specific version, use the following commands to update and list available versions:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f600164f0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f600164f0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-cache policy app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-cache policy app-protect</span></span></code></pre></div>
</div><blockquote class="note">
  <div><strong>Note:</strong><br/> When installing an older version of NGINX App Protect WAF, the dependent packages have to be installed manually, as shown in the command above. The following script can be used to find out the dependent packages for a specific version of NGINX App Protect WAF.</div>
</blockquote>




<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f600e4da0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f600e4da0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">findDeps <span class="o">()</span> <span class="o">{</span> <span class="nb">local</span> <span class="nv">pkgs</span><span class="o">=</span><span class="k">$(</span>apt show <span class="nv">$1</span> 2&gt;/dev/null <span class="p">|</span> grep Depends: <span class="p">|</span> grep -oE <span class="s2">&#34;(nginx-plus-module|app-protect)-[a-z]+ *\(= *[0-9\+\.-]+~`lsb_release -cs`\)&#34;</span> <span class="p">|</span> tr -d <span class="s1">&#39; ()&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">for</span> p in <span class="si">${</span><span class="nv">pkgs</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$p</span><span class="p">;</span> findDeps <span class="nv">$p</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">findDeps app-protect<span class="o">=</span>24+3.639.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">findDeps <span class="o">()</span> <span class="o">{</span> <span class="nb">local</span> <span class="nv">pkgs</span><span class="o">=</span><span class="k">$(</span>apt show <span class="nv">$1</span> 2&gt;/dev/null <span class="p">|</span> grep Depends: <span class="p">|</span> grep -oE <span class="s2">&#34;(nginx-plus-module|app-protect)-[a-z]+ *\(= *[0-9\+\.-]+~`lsb_release -cs`\)&#34;</span> <span class="p">|</span> tr -d <span class="s1">&#39; ()&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">for</span> p in <span class="si">${</span><span class="nv">pkgs</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$p</span><span class="p">;</span> findDeps <span class="nv">$p</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">findDeps app-protect<span class="o">=</span>24+3.639.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
</div><p>Finally, install a specific version from the output of command above. For example:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60193698&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60193698">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install -y app-protect-compiler<span class="o">=</span>8.7.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin<span class="o">=</span>3.639.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>nginx-plus-module-appprotect<span class="o">=</span>24+3.639.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine<span class="o">=</span>8.7.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect<span class="o">=</span>24+3.639.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-common<span class="o">=</span>8.7.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install -y app-protect-compiler<span class="o">=</span>8.7.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin<span class="o">=</span>3.639.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>nginx-plus-module-appprotect<span class="o">=</span>24+3.639.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine<span class="o">=</span>8.7.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect<span class="o">=</span>24+3.639.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-common<span class="o">=</span>8.7.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
</div><p>Replace the [OS_CODENAME] in the above example with <strong>bullseye</strong> for Debian 11 or <strong>bookworm</strong> for Debian 12.</p>
</li>
<li>
<p>Check the NGINX binary version to ensure that you have NGINX Plus installed correctly:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f601b7ca0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f601b7ca0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
</div></li>
<li>
<p>Load the NGINX App Protect WAF module on the main context in the <code>nginx.conf</code> file:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f601d70a0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f601d70a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Enable NGINX App Protect WAF on an <code>http/server/location</code> context in the <code>nginx.conf</code> via:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60220098&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60220098">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Start the NGINX service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f602af1a8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f602af1a8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
</div></li>
</ol>
<blockquote class="warning call-out">
  <div><strong class="call-out-type">Warning</strong><br/> Debian enables <strong>AppArmor</strong> by default, but NGINX App Protect WAF will run in unconfined mode after being installed as it is shipped with no AppArmor profile. To benefit from AppArmor access control capabilities for NGINX App Protect WAF, you will have to write your own AppArmor profile for NGINX App Protect WAF executables found in <code>/opt/app_protect/bin</code> such that it best suits your environment.</div>
</blockquote>

<h2 
id="oracle-linux--rhel-81-installation">Oracle Linux / RHEL 8.1+ Installation  <a class="headerlink float-right" href="#oracle-linux--rhel-81-installation" title="Oracle Linux / RHEL 8.1&#43; Installation"><i class="fas fa-link fa-xs"></i></a>
</h2><ol>
<li>
<p>If you already have NGINX packages in your system, back up your configs and logs:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f603390b0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f603390b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
</div></li>
<li>
<p>Create the <code>/etc/ssl/nginx/</code> directory:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6037f1c8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6037f1c8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Log in to the <a href="https://my.f5.com" target="_blank" rel="noopener">Customer Portal</a> and download the following two files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f603c00d8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f603c00d8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
</div></li>
<li>
<p>Copy the above two files to the <code>/etc/ssl/nginx/</code> directory. Use an SCP client or another secure file transfer tool to perform this task.</p>
</li>
<li>
<p>Install prerequisite packages:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60404a80&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60404a80">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install ca-certificates wget yum-utils</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install ca-certificates wget yum-utils</span></span></code></pre></div>
</div></li>
<li>
<p>Remove any previously downloaded NGINX Plus repository file from <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6043a1f8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6043a1f8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/yum.repos.d/nginx-plus-*.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/yum.repos.d/nginx-plus-*.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Add NGINX Plus repository by downloading the file <code>nginx-plus-8.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60478228&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60478228">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/nginx-plus-8.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/nginx-plus-8.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Add NGINX App Protect WAF repository by downloading the file <code>app-protect-8.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f604b75e0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f604b75e0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Enable Yum repositories to pull App Protect dependencies:</p>
<p>Download the file <code>dependencies.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f604f3ea0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f604f3ea0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
</div><p>Enable <code>ol8_codeready_builder</code> repository:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6054bce0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6054bce0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">dnf config-manager --set-enabled ol8_codeready_builder</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">dnf config-manager --set-enabled ol8_codeready_builder</span></span></code></pre></div>
</div></li>
<li>
<p>Install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f605a5e48&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f605a5e48">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect</span></span></code></pre></div>
</div><p>Alternatively, you can use the following command to list available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6060a7a8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6060a7a8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect</span></span></code></pre></div>
</div><p>Then, install a specific version from the output of command above. For example:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60621ea8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60621ea8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-26+3.890.0</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-26+3.890.0</span></span></code></pre></div>
</div></li>
<li>
<p>Check the NGINX binary version to ensure that you have NGINX Plus installed correctly:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6063e3c8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6063e3c8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
</div></li>
<li>
<p>Load the NGINX App Protect WAF module on the main context in the <code>nginx.conf</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60652418&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60652418">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Enable NGINX App Protect WAF on an <code>http/server/location</code> context in the <code>nginx.conf</code> file:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6066aab8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6066aab8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Optionally, install a prebuilt SELinux policy module for NGINX App Protect WAF (or configure SELinux as appropriate per your organization&rsquo;s security policies):</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6069c3b0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6069c3b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-selinux</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-selinux</span></span></code></pre></div>
</div><p>If you encounter any issues, check the <a href="http://localhost:1313/nginx-app-protect-waf/v4/troubleshooting-guide/troubleshooting/#selinux">Troubleshooting Guide</a>.</p>
</li>
<li>
<p>To enable the NGINX/App Protect WAF service start at boot, run the command:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f606d9ff8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f606d9ff8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> nginx.service</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> nginx.service</span></span></code></pre></div>
</div></li>
<li>
<p>Start the NGINX service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f607168b8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f607168b8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
</div></li>
</ol>
<hr>
<h2 
id="rhel-9-installation">RHEL 9+ Installation  <a class="headerlink float-right" href="#rhel-9-installation" title="RHEL 9&#43; Installation"><i class="fas fa-link fa-xs"></i></a>
</h2><ol>
<li>
<p>If you already have NGINX packages in your system, back up your configs and logs:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60784688&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60784688">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
</div></li>
<li>
<p>Create the <code>/etc/ssl/nginx/</code> directory:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f607a3e70&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f607a3e70">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Log in to the <a href="https://my.f5.com" target="_blank" rel="noopener">Customer Portal</a> and download the following two files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f607be068&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f607be068">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
</div></li>
<li>
<p>Copy the above two files to the RHEL server&rsquo;s <code>/etc/ssl/nginx/</code> directory. Use an SCP client or another secure file transfer tool to perform this task.</p>
</li>
<li>
<p>Install prerequisite packages:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f607d8e18&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f607d8e18">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install ca-certificates wget</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install ca-certificates wget</span></span></code></pre></div>
</div></li>
<li>
<p>Remove any previously downloaded NGINX Plus repository file from <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6081b498&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6081b498">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/yum.repos.d/plus-*.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/yum.repos.d/plus-*.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Add NGINX Plus repository by downloading the file <code>plus-9.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6084a298&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6084a298">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/plus-9.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/plus-9.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Add NGINX App Protect WAF repository by downloading the file <code>app-protect-9.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60875dd0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60875dd0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Enable Yum repositories to pull App Protect dependencies:</p>
<p>Download the file <code>dependencies.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f608a1520&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f608a1520">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo</span></span></code></pre></div>
</div><p>Enable <code>codeready-builder</code> repository through subscription manager:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f608cd440&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f608cd440">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo subscription-manager repos --enable codeready-builder-for-rhel-9-x86_64-rpms</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo subscription-manager repos --enable codeready-builder-for-rhel-9-x86_64-rpms</span></span></code></pre></div>
</div></li>
<li>
<p>Install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f608f6480&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f608f6480">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect</span></span></code></pre></div>
</div><p>Alternatively, you can use the following command to list available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f609217e8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f609217e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect</span></span></code></pre></div>
</div><p>Then, install a specific version from the output of command above. For example:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6094f260&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6094f260">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-31+4.641.0</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-31+4.641.0</span></span></code></pre></div>
</div></li>
<li>
<p>Check the NGINX binary version to ensure that you have NGINX Plus installed correctly:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60974bf0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60974bf0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
</div></li>
<li>
<p>Load the NGINX App Protect WAF module on the main context in the <code>nginx.conf</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f609a0b10&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f609a0b10">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Enable NGINX App Protect WAF on an <code>http/server/location</code> context in the <code>nginx.conf</code> file:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f609c1298&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f609c1298">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Optionally, install a prebuilt SELinux policy module for NGINX App Protect WAF (or configure SELinux as appropriate per your organization&rsquo;s security policies):</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f609eaaa8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f609eaaa8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-selinux</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-selinux</span></span></code></pre></div>
</div><p>If you encounter any issues, check the <a href="http://localhost:1313/nginx-app-protect-waf/v4/troubleshooting-guide/troubleshooting/#selinux">Troubleshooting Guide</a>.</p>
</li>
<li>
<p>To enable the NGINX/App Protect WAF service start at boot, run the command:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60a1bbd0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60a1bbd0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> nginx.service</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> nginx.service</span></span></code></pre></div>
</div></li>
<li>
<p>Start the NGINX service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60a51730&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60a51730">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
</div></li>
</ol>
<hr>
<h2 
id="ubuntu-installation">Ubuntu Installation  <a class="headerlink float-right" href="#ubuntu-installation" title="Ubuntu Installation"><i class="fas fa-link fa-xs"></i></a>
</h2><ol>
<li>
<p>If you already have NGINX packages in your system, back up your configs and logs:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60aad008&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60aad008">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp -a /etc/nginx /etc/nginx-plus-backup
</span></span><span class="line"><span class="cl">sudo cp -a /var/log/nginx /var/log/nginx-plus-backup</span></span></code></pre></div>
</div></li>
<li>
<p>Create the <code>/etc/ssl/nginx/</code> directory:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60ada698&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60ada698">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mkdir -p /etc/ssl/nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Log in to the <a href="https://my.f5.com" target="_blank" rel="noopener">Customer Portal</a> and download the following two files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60b07940&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60b07940">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
</div></li>
<li>
<p>Copy the above two files to the Ubuntu server&rsquo;s <code>/etc/ssl/nginx/</code> directory. Use an SCP client or another secure file transfer tool to perform this task.</p>
</li>
<li>
<p>Install prerequisite packages:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60b693c0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60b693c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install apt-transport-https lsb-release ca-certificates wget gnupg2</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install apt-transport-https lsb-release ca-certificates wget gnupg2</span></span></code></pre></div>
</div></li>
<li>
<p>Download and add the NGINX signing keys:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60be4c50&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60be4c50">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
</div></li>
<li>
<p>Remove any previous NGINX Plus repository and apt configuration files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60c024f8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60c024f8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/apt/sources.list.d/nginx-plus.list
</span></span><span class="line"><span class="cl">sudo rm /etc/apt/sources.list.d/*app-protect*.list
</span></span><span class="line"><span class="cl">sudo rm /etc/apt/apt.conf.d/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm /etc/apt/sources.list.d/nginx-plus.list
</span></span><span class="line"><span class="cl">sudo rm /etc/apt/sources.list.d/*app-protect*.list
</span></span><span class="line"><span class="cl">sudo rm /etc/apt/apt.conf.d/90pkgs-nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Add NGINX Plus repository:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60c4a550&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60c4a550">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/plus/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/nginx-plus.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/plus/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/nginx-plus.list</span></span></code></pre></div>
</div></li>
<li>
<p>Add NGINX App Protect WAF repositories:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60cd05d8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60cd05d8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/nginx-app-protect.list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/nginx-app-protect.list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
</div></li>
<li>
<p>Download the apt configuration to <code>/etc/apt/apt.conf.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60d0e220&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60d0e220">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Update the repository and install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60d435b0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60d435b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get install app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get install app-protect</span></span></code></pre></div>
</div><p>Alternatively, to install a specific version, use the following commands to update and list available versions:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60d7a880&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60d7a880">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-cache policy app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-cache policy app-protect</span></span></code></pre></div>
</div><p>Finally, install a specific version from the output of command above. For example:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60de0568&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60de0568">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install -y app-protect-compiler<span class="o">=</span>5.9.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin<span class="o">=</span>3.263.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>nginx-plus-module-appprotect<span class="o">=</span>23+3.263.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine<span class="o">=</span>5.9.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect<span class="o">=</span>23+3.263.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install -y app-protect-compiler<span class="o">=</span>5.9.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin<span class="o">=</span>3.263.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>nginx-plus-module-appprotect<span class="o">=</span>23+3.263.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine<span class="o">=</span>5.9.4-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect<span class="o">=</span>23+3.263.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
</div><p>Replace the [OS_CODENAME] in above the example with <strong>focal</strong> for Ubuntu 20.04, <strong>jammy</strong> for Ubuntu 22.04 and <strong>noble</strong> for Ubuntu 24.04.
<br>
<br></p>
<blockquote class="note">
  <div><strong>Note:</strong><br/> When installing an older version of NGINX App Protect WAF, the dependent packages have to be installed manually, as shown in the command above. The following script can be used to find out the dependent packages for a specific version of NGINX App Protect WAF.</div>
</blockquote>




<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60e6bfc8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60e6bfc8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">findDeps <span class="o">()</span> <span class="o">{</span> <span class="nb">local</span> <span class="nv">pkgs</span><span class="o">=</span><span class="k">$(</span>apt show <span class="nv">$1</span> 2&gt;/dev/null <span class="p">|</span> grep Depends: <span class="p">|</span> grep -oE <span class="s2">&#34;(nginx-plus-module|app-protect)-[a-z]+ *\(= *[0-9\+\.-]+~`lsb_release -cs`\)&#34;</span> <span class="p">|</span> tr -d <span class="s1">&#39; ()&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">for</span> p in <span class="si">${</span><span class="nv">pkgs</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$p</span><span class="p">;</span> findDeps <span class="nv">$p</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">findDeps app-protect<span class="o">=</span>23+3.263.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">findDeps <span class="o">()</span> <span class="o">{</span> <span class="nb">local</span> <span class="nv">pkgs</span><span class="o">=</span><span class="k">$(</span>apt show <span class="nv">$1</span> 2&gt;/dev/null <span class="p">|</span> grep Depends: <span class="p">|</span> grep -oE <span class="s2">&#34;(nginx-plus-module|app-protect)-[a-z]+ *\(= *[0-9\+\.-]+~`lsb_release -cs`\)&#34;</span> <span class="p">|</span> tr -d <span class="s1">&#39; ()&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">for</span> p in <span class="si">${</span><span class="nv">pkgs</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$p</span><span class="p">;</span> findDeps <span class="nv">$p</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">findDeps app-protect<span class="o">=</span>23+3.263.0-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
</div></li>
<li>
<p>Check the NGINX binary version to ensure that you have NGINX Plus installed correctly:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60ead2c0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60ead2c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo nginx -v</span></span></code></pre></div>
</div></li>
<li>
<p>Load the NGINX App Protect WAF module on the main context in the <code>nginx.conf</code> file:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60ecb720&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60ecb720">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Enable NGINX App Protect WAF on an <code>http/server/location</code> context in the <code>nginx.conf</code> via:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60edc890&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60edc890">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">app_protect_enable</span> <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Start the NGINX service:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60ef3f90&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f60ef3f90">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx</span></span></code></pre></div>
</div></li>
</ol>
<blockquote class="note">
  <div><strong>Note:</strong><br/> Ubuntu 20.04 / Ubuntu 22.04 / Ubuntu 24.04 activates <strong>AppArmor</strong> by default, but NGINX App Protect WAF will run in unconfined mode after being installed as it is shipped with no AppArmor profile. To benefit from AppArmor access control capabilities for NGINX App Protect WAF, you will have to write your own AppArmor profile for NGINX App Protect WAF executables found in <code>/opt/app_protect/bin</code> such that it best suits your environment.</div>
</blockquote>

<h2 
id="docker-deployments">Docker Deployments  <a class="headerlink float-right" href="#docker-deployments" title="Docker Deployments"><i class="fas fa-link fa-xs"></i></a>
</h2><h3 
id="common-instructions">Common instructions  <a class="headerlink float-right" href="#common-instructions" title="Common instructions"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>Create a Dockerfile (see examples below) which copies the following files into the docker image:</p>
<ul>
<li><code>nginx.conf</code>: User defined nginx.conf with app-protect enabled</li>
<li><code>entrypoint.sh</code>: Docker startup script which spins up all App Protect processes, must have executable permissions</li>
<li><code>custom_log_format.json</code>: Optional user-defined security log format file (if not used - remove its references from the <code>nginx.conf</code> and Dockerfile)</li>
</ul>
</li>
<li>
<p>Log in to the <a href="https://my.f5.com" target="_blank" rel="noopener">Customer Portal</a> and download the following two files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f60f12bc0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f60f12bc0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
</div></li>
<li>
<p>Copy the files to the directory where the Dockerfile is located.</p>
</li>
<li>
<p>Optionally, create <code>custom_log_format.json</code> in the same directory, for example:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">json</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6105e470&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f6105e470">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;filter&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;request_type&#34;</span><span class="p">:</span> <span class="s2">&#34;all&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;format&#34;</span><span class="p">:</span> <span class="s2">&#34;splunk&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;max_request_size&#34;</span><span class="p">:</span> <span class="s2">&#34;any&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;max_message_size&#34;</span><span class="p">:</span> <span class="s2">&#34;10k&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;filter&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;request_type&#34;</span><span class="p">:</span> <span class="s2">&#34;all&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;format&#34;</span><span class="p">:</span> <span class="s2">&#34;splunk&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;max_request_size&#34;</span><span class="p">:</span> <span class="s2">&#34;any&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;max_message_size&#34;</span><span class="p">:</span> <span class="s2">&#34;10k&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div></li>
<li>
<p>In the same directory create an <code>nginx.conf</code> file with the following contents:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f610cd1e0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f610cd1e0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">user</span> <span class="s">nginx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">worker_processes</span> <span class="s">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">error_log</span> <span class="s">/var/log/nginx/error.log</span> <span class="s">debug</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">events</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">worker_connections</span> <span class="mi">10240</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">include</span> <span class="s">/etc/nginx/mime.types</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">default_type</span> <span class="s">application/octet-stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">sendfile</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">keepalive_timeout</span> <span class="mi">65</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">upstream</span> <span class="s">app_backend_com</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">server</span> <span class="n">192.168.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">server</span> <span class="n">192.168.0.1</span><span class="p">:</span><span class="mi">8001</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">server_name</span> <span class="s">app.example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kn">app_protect_enable</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">app_protect_security_log_enable</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">app_protect_security_log</span> <span class="s">&#34;/etc/nginx/custom_log_format.json&#34;</span> <span class="s">syslog:server=127.0.0.1:514</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kn">client_max_body_size</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kn">default_type</span> <span class="s">text/html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># set your backend here
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kn">proxy_pass</span> <span class="s">http://app_backend_com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kn">proxy_set_header</span> <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">user</span> <span class="s">nginx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">worker_processes</span> <span class="s">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">load_module</span> <span class="s">modules/ngx_http_app_protect_module.so</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">error_log</span> <span class="s">/var/log/nginx/error.log</span> <span class="s">debug</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">events</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">worker_connections</span> <span class="mi">10240</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">include</span> <span class="s">/etc/nginx/mime.types</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">default_type</span> <span class="s">application/octet-stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">sendfile</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">keepalive_timeout</span> <span class="mi">65</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">upstream</span> <span class="s">app_backend_com</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">server</span> <span class="n">192.168.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">server</span> <span class="n">192.168.0.1</span><span class="p">:</span><span class="mi">8001</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">server_name</span> <span class="s">app.example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kn">app_protect_enable</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">app_protect_security_log_enable</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">app_protect_security_log</span> <span class="s">&#34;/etc/nginx/custom_log_format.json&#34;</span> <span class="s">syslog:server=127.0.0.1:514</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kn">client_max_body_size</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kn">default_type</span> <span class="s">text/html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># set your backend here
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kn">proxy_pass</span> <span class="s">http://app_backend_com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kn">proxy_set_header</span> <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><blockquote class="important call-out">
  <div><strong class="call-out-type">Important</strong><br/> Make sure to replace upstream and proxy pass directives in this example with relevant application backend settings.</div>
</blockquote>

</li>
<li>
<p>In the same directory create an <code>entrypoint.sh</code> file with the following content:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f610f1018&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f610f1018">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">/bin/su -s /bin/sh -c <span class="s2">&#34;/usr/share/ts/bin/bd-socket-plugin tmm_count 4 proc_cpuinfo_cpu_mhz 2000000 total_xml_memory 307200000 total_umu_max_size 3129344 sys_max_account_id 1024 no_static_config 2&gt;&amp;1 &gt;&gt; /var/log/app_protect/bd-socket-plugin.log &amp;&#34;</span> nginx
</span></span><span class="line"><span class="cl">/usr/sbin/nginx -g <span class="s1">&#39;daemon off;&#39;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">/bin/su -s /bin/sh -c <span class="s2">&#34;/usr/share/ts/bin/bd-socket-plugin tmm_count 4 proc_cpuinfo_cpu_mhz 2000000 total_xml_memory 307200000 total_umu_max_size 3129344 sys_max_account_id 1024 no_static_config 2&gt;&amp;1 &gt;&gt; /var/log/app_protect/bd-socket-plugin.log &amp;&#34;</span> nginx
</span></span><span class="line"><span class="cl">/usr/sbin/nginx -g <span class="s1">&#39;daemon off;&#39;</span></span></span></code></pre></div>
</div></li>
<li>
<p>Create a Docker image:</p>
<ul>
<li>
<p>For Oracle Linux/Debian/Ubuntu/Alpine/Amazon Linux:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6111aff8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6111aff8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">DOCKER_BUILDKIT</span><span class="o">=</span><span class="m">1</span> docker build --no-cache --platform linux/amd64 --secret <span class="nv">id</span><span class="o">=</span>nginx-crt,src<span class="o">=</span>nginx-repo.crt --secret <span class="nv">id</span><span class="o">=</span>nginx-key,src<span class="o">=</span>nginx-repo.key -t app-protect .</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">DOCKER_BUILDKIT</span><span class="o">=</span><span class="m">1</span> docker build --no-cache --platform linux/amd64 --secret <span class="nv">id</span><span class="o">=</span>nginx-crt,src<span class="o">=</span>nginx-repo.crt --secret <span class="nv">id</span><span class="o">=</span>nginx-key,src<span class="o">=</span>nginx-repo.key -t app-protect .</span></span></code></pre></div>
</div><p>The <code>DOCKER_BUILDKIT=1</code> enables <code>docker build</code> to recognize the <code>--secret</code> flag which allows the user to pass secret information to be used in the Dockerfile for building docker images in a safe way that will not end up stored in the final image. This is a recommended practice for the handling of the certificate and private key for NGINX repository access (<code>nginx-repo.crt</code> and <code>nginx-repo.key</code> files). More information <a href="https://docs.docker.com/engine/reference/commandline/buildx_build/#secret" target="_blank" rel="noopener">here</a>.</p>
</li>
<li>
<p>For RHEL:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61192238&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f61192238">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">podman build --no-cache --secret <span class="nv">id</span><span class="o">=</span>nginx-crt,src<span class="o">=</span>nginx-repo.crt --secret <span class="nv">id</span><span class="o">=</span>nginx-key,src<span class="o">=</span>nginx-repo.key -t app-protect .</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">podman build --no-cache --secret <span class="nv">id</span><span class="o">=</span>nginx-crt,src<span class="o">=</span>nginx-repo.crt --secret <span class="nv">id</span><span class="o">=</span>nginx-key,src<span class="o">=</span>nginx-repo.key -t app-protect .</span></span></code></pre></div>
</div></li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li>The <code>--no-cache</code> option tells Docker/Podman to build the image from scratch and ensures the installation of the latest version of NGINX Plus and NGINX App Protect WAF 4.x. If the Dockerfile was previously used to build an image without the <code>--no-cache</code> option, the new image uses versions from the previously built image from the cache.</li>
<li>For RHEL:<br>
The subscription-manager is disabled when running inside containers based on Red Hat Universal Base images. You will need a registered and subscribed RHEL system.</li>
</ul>
</li>
<li>
<p>Verify that the app-protect image was created successfully with the docker images command:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f611ad3d0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f611ad3d0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker images app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker images app-protect</span></span></code></pre></div>
</div></li>
<li>
<p>Create a container based on this image, for example, my-app-protect container:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6121adb8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6121adb8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run --name my-app-protect -p 80:80 -d app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run --name my-app-protect -p 80:80 -d app-protect</span></span></code></pre></div>
</div></li>
<li>
<p>Verify that the my-app-protect container is up and running with the <code>docker ps</code> command:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f612474a8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f612474a8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker ps</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker ps</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="alpine-dockerfile-example">Alpine Dockerfile example  <a class="headerlink float-right" href="#alpine-dockerfile-example" title="Alpine Dockerfile example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6137cdc8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f6137cdc8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Alpine 3.19:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> alpine:3.19</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -O /etc/apk/keys/nginx_signing.rsa.pub https://cs.nginx.com/static/keys/nginx_signing.rsa.pub <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> <span class="o">&amp;&amp;</span> wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/plus/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> <span class="o">&amp;&amp;</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/apk/cert.pem,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/apk/cert.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apk update <span class="o">&amp;&amp;</span> apk add app-protect<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Alpine 3.19:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> alpine:3.19</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -O /etc/apk/keys/nginx_signing.rsa.pub https://cs.nginx.com/static/keys/nginx_signing.rsa.pub <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> <span class="o">&amp;&amp;</span> wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/plus/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> <span class="o">&amp;&amp;</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/apk/cert.pem,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/apk/cert.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apk update <span class="o">&amp;&amp;</span> apk add app-protect<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
</div><h3 
id="amazon-linux-dockerfile-example">Amazon Linux Dockerfile example  <a class="headerlink float-right" href="#amazon-linux-dockerfile-example" title="Amazon Linux Dockerfile example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61481d90&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61481d90">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Amazon Linux 2023:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> amazonlinux:2023</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repo:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/plus-amazonlinux2023.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NAP dependencies repo:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.amazonlinux2023.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect repo:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-amazonlinux2023.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf -y install app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/yum<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Amazon Linux 2023:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> amazonlinux:2023</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repo:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/plus-amazonlinux2023.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NAP dependencies repo:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.amazonlinux2023.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect repo:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-amazonlinux2023.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf -y install app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/yum<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
</div><hr>
<h3 
id="debian-dockerfile-example">Debian Dockerfile example  <a class="headerlink float-right" href="#debian-dockerfile-example" title="Debian Dockerfile example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61634a98&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61634a98">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">ARG</span> OS_CODENAME<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Where OS_CODENAME can be: buster/bullseye/bookworm</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Debian 11 / 12:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> debian:${OS_CODENAME}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y apt-transport-https lsb-release ca-certificates wget gnupg2<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/plus/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-plus.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect WAF repositories:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-app-protect.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/app-protect-security-updates.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download the apt configuration to `/etc/apt/apt.conf.d`:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get update <span class="o">&amp;&amp;</span> apt-get install -y app-protect<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">ARG</span> OS_CODENAME<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Where OS_CODENAME can be: buster/bullseye/bookworm</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Debian 11 / 12:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> debian:${OS_CODENAME}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y apt-transport-https lsb-release ca-certificates wget gnupg2<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/plus/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-plus.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect WAF repositories:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-app-protect.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/app-protect-security-updates.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download the apt configuration to `/etc/apt/apt.conf.d`:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get update <span class="o">&amp;&amp;</span> apt-get install -y app-protect<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
</div><hr>
<h3 
id="rhel-ubi8-dockerfile-example">RHEL UBI8 Dockerfile example  <a class="headerlink float-right" href="#rhel-ubi8-dockerfile-example" title="RHEL UBI8 Dockerfile example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6178f190&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f6178f190">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi8:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi8/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/nginx-plus-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install --enablerepo<span class="o">=</span>codeready-builder-for-rhel-8-x86_64-rpms -y app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi8:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi8/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/nginx-plus-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install --enablerepo<span class="o">=</span>codeready-builder-for-rhel-8-x86_64-rpms -y app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
</div><h3 
id="rhel-ubi9-dockerfile-example">RHEL UBI9 Dockerfile example  <a class="headerlink float-right" href="#rhel-ubi9-dockerfile-example" title="RHEL UBI9 Dockerfile example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f618d63f0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f618d63f0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi9:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi9/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/plus-9.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install --enablerepo<span class="o">=</span>codeready-builder-for-rhel-9-x86_64-rpms -y app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi9:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi9/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/plus-9.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install --enablerepo<span class="o">=</span>codeready-builder-for-rhel-9-x86_64-rpms -y app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
</div><h3 
id="oracle-linux-dockerfile-example">Oracle Linux Dockerfile example  <a class="headerlink float-right" href="#oracle-linux-dockerfile-example" title="Oracle Linux Dockerfile example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61a122a0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61a122a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Oracle Linux 8:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> oraclelinux:8</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates yum-utils<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/nginx-plus-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Enable Yum repositories to pull App Protect dependencies:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf config-manager --set-enabled ol8_codeready_builder <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf -y install app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Oracle Linux 8:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> oraclelinux:8</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates yum-utils<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/nginx-plus-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Enable Yum repositories to pull App Protect dependencies:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf config-manager --set-enabled ol8_codeready_builder <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf -y install app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
</div><hr>
<h3 
id="ubuntu-dockerfile-example">Ubuntu Dockerfile example  <a class="headerlink float-right" href="#ubuntu-dockerfile-example" title="Ubuntu Dockerfile example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61b1b4d0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61b1b4d0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">ARG</span> OS_CODENAME<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Where OS_CODENAME can be: focal/jammy/noble</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Ubuntu 20.04 / 22.04 / 24.04:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> ubuntu:${OS_CODENAME}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y apt-transport-https lsb-release ca-certificates wget gnupg2<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/plus/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-plus.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect WAF repositories:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-app-protect.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/app-protect-security-updates.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download the apt configuration to `/etc/apt/apt.conf.d`:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get update <span class="o">&amp;&amp;</span> <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span><span class="s2">&#34;noninteractive&#34;</span> apt-get install -y app-protect<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">ARG</span> OS_CODENAME<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Where OS_CODENAME can be: focal/jammy/noble</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Ubuntu 20.04 / 22.04 / 24.04:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> ubuntu:${OS_CODENAME}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y apt-transport-https lsb-release ca-certificates wget gnupg2<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/plus/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-plus.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect WAF repositories:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-app-protect.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/app-protect-security-updates.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download the apt configuration to `/etc/apt/apt.conf.d`:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF package (which includes NGINX Plus):</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get update <span class="o">&amp;&amp;</span> <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span><span class="s2">&#34;noninteractive&#34;</span> apt-get install -y app-protect<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Forward request logs to Docker log collector:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ln -sf /dev/stderr /var/log/nginx/error.log<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy configuration files:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> nginx.conf custom_log_format.json /etc/nginx/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span></span></span></code></pre></div>
</div><h2 
id="converter-tool-docker-image">Converter Tool Docker Image  <a class="headerlink float-right" href="#converter-tool-docker-image" title="Converter Tool Docker Image"><i class="fas fa-link fa-xs"></i></a>
</h2><p>This section explains how to build a Docker image for the purpose of converting policy files from other F5 WAF products to NGINX App Protect WAF JSON declarative format.
For more details regarding this feature refer to <a href="http://localhost:1313/nginx-app-protect-waf/v4/configuration-guide/configuration/#converter-tools">Converter Tools</a>.</p>
<h3 
id="converter-docker-deployment-instructions">Converter Docker Deployment Instructions  <a class="headerlink float-right" href="#converter-docker-deployment-instructions" title="Converter Docker Deployment Instructions"><i class="fas fa-link fa-xs"></i></a>
</h3><p>You need root permissions to execute the following steps.</p>
<ol>
<li>
<p>Create a Dockerfile (see examples below).</p>
</li>
<li>
<p>Log in to the <a href="https://my.f5.com" target="_blank" rel="noopener">Customer Portal</a> and download the following two files:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61b3b0a0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61b3b0a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx-repo.key
</span></span><span class="line"><span class="cl">nginx-repo.crt</span></span></code></pre></div>
</div></li>
<li>
<p>Create a Docker image:</p>
<ul>
<li>
<p>For Oracle Linux/Debian/Ubuntu/Alpine/Amazon Linux:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61b63528&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f61b63528">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">DOCKER_BUILDKIT</span><span class="o">=</span><span class="m">1</span> docker build --no-cache --platform linux/amd64 --secret <span class="nv">id</span><span class="o">=</span>nginx-crt,src<span class="o">=</span>nginx-repo.crt --secret <span class="nv">id</span><span class="o">=</span>nginx-key,src<span class="o">=</span>nginx-repo.key -t app-protect-converter .</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">DOCKER_BUILDKIT</span><span class="o">=</span><span class="m">1</span> docker build --no-cache --platform linux/amd64 --secret <span class="nv">id</span><span class="o">=</span>nginx-crt,src<span class="o">=</span>nginx-repo.crt --secret <span class="nv">id</span><span class="o">=</span>nginx-key,src<span class="o">=</span>nginx-repo.key -t app-protect-converter .</span></span></code></pre></div>
</div><p>The <code>DOCKER_BUILDKIT=1</code> enables <code>docker build</code> to recognize the <code>--secret</code> flag which allows the user to pass secret information to be used in the Dockerfile for building docker images in a safe way that will not end up stored in the final image. This is a recommended practice for the handling of the certificate and private key for NGINX repository access (<code>nginx-repo.crt</code> and <code>nginx-repo.key</code> files). More information <a href="https://docs.docker.com/engine/reference/commandline/buildx_build/#secret" target="_blank" rel="noopener">here</a>.</p>
</li>
<li>
<p>For RHEL:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61b867a8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f61b867a8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">podman build --no-cache --secret <span class="nv">id</span><span class="o">=</span>nginx-crt,src<span class="o">=</span>nginx-repo.crt --secret <span class="nv">id</span><span class="o">=</span>nginx-key,src<span class="o">=</span>nginx-repo.key -t app-protect-converter .</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">podman build --no-cache --secret <span class="nv">id</span><span class="o">=</span>nginx-crt,src<span class="o">=</span>nginx-repo.crt --secret <span class="nv">id</span><span class="o">=</span>nginx-key,src<span class="o">=</span>nginx-repo.key -t app-protect-converter .</span></span></code></pre></div>
</div></li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li>The <code>--no-cache</code> option tells Docker/Podman to build the image from scratch and ensures the installation of the latest version of NGINX Plus and NGINX App Protect WAF 4.x. If the Dockerfile was previously used to build an image without the <code>--no-cache</code> option, the new image uses versions from the previously built image from the cache.</li>
<li>For RHEL:<br>
The subscription-manager is disabled when running inside containers based on Red Hat Universal Base images. You will need a registered and subscribed RHEL system.</li>
</ul>
</li>
<li>
<p>Create a temporary folder and copy your XML policy file(s) to it:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61b9c738&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61b9c738">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mkdir /tmp/convert
</span></span><span class="line"><span class="cl">cp policy.xml /tmp/convert/</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mkdir /tmp/convert
</span></span><span class="line"><span class="cl">cp policy.xml /tmp/convert/</span></span></code></pre></div>
</div></li>
<li>
<p>Run the docker image with the temporary folder as a mounted volume on the container, and run the policy converter script:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61bd0f10&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f61bd0f10">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -v /tmp/convert:/tmp/convert app-protect-converter /opt/app_protect/bin/convert-policy -i /tmp/convert/policy.xml -o /tmp/convert/policy.json <span class="p">|</span> jq</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -v /tmp/convert:/tmp/convert app-protect-converter /opt/app_protect/bin/convert-policy -i /tmp/convert/policy.xml -o /tmp/convert/policy.json <span class="p">|</span> jq</span></span></code></pre></div>
</div><p>Output:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">json</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61d1c7c0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61d1c7c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;completed_successfully&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;file_size&#34;</span><span class="p">:</span> <span class="mi">20604</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;warnings&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Default header &#39;*-bin&#39; cannot be deleted.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Traffic Learning, Policy Building, and staging are unsupported&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/general/enableEventCorrelation must be &#39;0&#39; (was &#39;1&#39;).&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Element &#39;/websocket-urls&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/signature-sets/learn value 1 is unsupported&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Element &#39;/redirection-protection&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/protocolIndependent must be &#39;1&#39; (was &#39;0&#39;).&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Element &#39;/gwt-profiles&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_ASM_COOKIE_HIJACKING&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_BLOCKING_CONDITION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_BRUTE_FORCE&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_CONVICTION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_CROSS_ORIGIN_REQUEST&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_CSRF&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_CSRF_EXPIRED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_DYNAMIC_SESSION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_FLOW&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_FLOW_DISALLOWED_INPUT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_FLOW_ENTRY_POINT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_FLOW_MANDATORY_PARAMS&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_GEOLOCATION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_GWT_FORMAT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_GWT_MALFORMED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_HOSTNAME_MISMATCH&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_LOGIN_URL_BYPASSED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_LOGIN_URL_EXPIRED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_MALICIOUS_DEVICE&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_MALICIOUS_IP&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_PARAMETER_DYNAMIC_VALUE&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_PLAINTEXT_FORMAT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_REDIRECT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_SESSION_AWARENESS&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_VIRUS&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_BAD_REQUEST&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_BINARY_MESSAGE_LENGTH&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_BINARY_MESSAGE_NOT_ALLOWED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_EXTENSION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_FRAMES_PER_MESSAGE_COUNT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_FRAME_LENGTH&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_FRAME_MASKING&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_FRAMING_PROTOCOL&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_TEXT_MESSAGE_NOT_ALLOWED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_TEXT_NULL_VALUE&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_XML_SCHEMA&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_XML_SOAP_ATTACHMENT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_XML_SOAP_METHOD&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_XML_WEB_SERVICES_SECURITY&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/http-protocols/description value &#39;Unparsable request content&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Element &#39;/plain-text-profiles&#39; is unsupported.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;filename&#34;</span><span class="p">:</span> <span class="s2">&#34;/tmp/convert/policy-ubuntu.json&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;completed_successfully&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;file_size&#34;</span><span class="p">:</span> <span class="mi">20604</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;warnings&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Default header &#39;*-bin&#39; cannot be deleted.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Traffic Learning, Policy Building, and staging are unsupported&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/general/enableEventCorrelation must be &#39;0&#39; (was &#39;1&#39;).&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Element &#39;/websocket-urls&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/signature-sets/learn value 1 is unsupported&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Element &#39;/redirection-protection&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/protocolIndependent must be &#39;1&#39; (was &#39;0&#39;).&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Element &#39;/gwt-profiles&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_ASM_COOKIE_HIJACKING&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_BLOCKING_CONDITION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_BRUTE_FORCE&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_CONVICTION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_CROSS_ORIGIN_REQUEST&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_CSRF&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_CSRF_EXPIRED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_DYNAMIC_SESSION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_FLOW&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_FLOW_DISALLOWED_INPUT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_FLOW_ENTRY_POINT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_FLOW_MANDATORY_PARAMS&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_GEOLOCATION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_GWT_FORMAT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_GWT_MALFORMED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_HOSTNAME_MISMATCH&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_LOGIN_URL_BYPASSED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_LOGIN_URL_EXPIRED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_MALICIOUS_DEVICE&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_MALICIOUS_IP&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_PARAMETER_DYNAMIC_VALUE&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_PLAINTEXT_FORMAT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_REDIRECT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_SESSION_AWARENESS&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_VIRUS&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_BAD_REQUEST&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_BINARY_MESSAGE_LENGTH&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_BINARY_MESSAGE_NOT_ALLOWED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_EXTENSION&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_FRAMES_PER_MESSAGE_COUNT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_FRAME_LENGTH&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_FRAME_MASKING&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_FRAMING_PROTOCOL&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_TEXT_MESSAGE_NOT_ALLOWED&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_WEBSOCKET_TEXT_NULL_VALUE&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_XML_SCHEMA&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_XML_SOAP_ATTACHMENT&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_XML_SOAP_METHOD&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/violations/name value &#39;VIOL_XML_WEB_SERVICES_SECURITY&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/blocking-settings/http-protocols/description value &#39;Unparsable request content&#39; is unsupported.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Element &#39;/plain-text-profiles&#39; is unsupported.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;filename&#34;</span><span class="p">:</span> <span class="s2">&#34;/tmp/convert/policy-ubuntu.json&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div></li>
<li>
<p>Once completed, the newly exported JSON policy file should reside in the same folder as the source XML policy file:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61d5a408&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61d5a408">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ls -l /tmp/convert/
</span></span><span class="line"><span class="cl">total <span class="m">848</span>
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> root root  <span class="m">20604</span> Dec <span class="m">20</span> 12:33 policy.json    <span class="c1"># Exported JSON policy file</span>
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> root root <span class="m">841818</span> Dec <span class="m">20</span> 11:10 policy.xml     <span class="c1"># Original XML policy file</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ls -l /tmp/convert/
</span></span><span class="line"><span class="cl">total <span class="m">848</span>
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> root root  <span class="m">20604</span> Dec <span class="m">20</span> 12:33 policy.json    <span class="c1"># Exported JSON policy file</span>
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> root root <span class="m">841818</span> Dec <span class="m">20</span> 11:10 policy.xml     <span class="c1"># Original XML policy file</span></span></span></code></pre></div>
</div></li>
</ol>
<hr>
<h3 
id="rhel-ubi7-converter-docker-deployment-example">RHEL UBI7 Converter Docker Deployment Example  <a class="headerlink float-right" href="#rhel-ubi7-converter-docker-deployment-example" title="RHEL UBI7 Converter Docker Deployment Example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61dd6c38&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61dd6c38">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi7:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi7/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> yum -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-7.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> yum clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>     yum install --enablerepo<span class="o">=</span>rhel-7-server-extras-rpms --enablerepo<span class="o">=</span>rhel-7-server-optional-rpms --enablerepo<span class="o">=</span>rhel-7-server-rpms -y app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> yum clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/yum</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi7:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi7/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> yum -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-7.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> yum clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>     yum install --enablerepo<span class="o">=</span>rhel-7-server-extras-rpms --enablerepo<span class="o">=</span>rhel-7-server-optional-rpms --enablerepo<span class="o">=</span>rhel-7-server-rpms -y app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> yum clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/yum</span></span></code></pre></div>
</div><h3 
id="rhel-ubi8-converter-docker-deployment-example">RHEL UBI8 Converter Docker Deployment Example  <a class="headerlink float-right" href="#rhel-ubi8-converter-docker-deployment-example" title="RHEL UBI8 Converter Docker Deployment Example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61eab2a8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61eab2a8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi8:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi8/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install --enablerepo<span class="o">=</span>codeready-builder-for-rhel-8-x86_64-rpms -y app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi8:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi8/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install --enablerepo<span class="o">=</span>codeready-builder-for-rhel-8-x86_64-rpms -y app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf</span></span></code></pre></div>
</div><h3 
id="rhel-ubi9-converter-docker-deployment-example">RHEL UBI9 Converter Docker Deployment Example  <a class="headerlink float-right" href="#rhel-ubi9-converter-docker-deployment-example" title="RHEL UBI9 Converter Docker Deployment Example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f61f85ac0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f61f85ac0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi9:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi9/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install --enablerepo<span class="o">=</span>codeready-builder-for-rhel-9-x86_64-rpms -y app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For RHEL ubi9:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> registry.access.redhat.com/ubi9/ubi</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect &amp; dependencies repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install --enablerepo<span class="o">=</span>codeready-builder-for-rhel-9-x86_64-rpms -y app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf</span></span></code></pre></div>
</div><h3 
id="oracle-linux-8-converter-docker-deployment-example">Oracle Linux 8 Converter Docker Deployment Example  <a class="headerlink float-right" href="#oracle-linux-8-converter-docker-deployment-example" title="Oracle Linux 8 Converter Docker Deployment Example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6206f508&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f6206f508">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Oracle Linux 8:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> oraclelinux:8</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates yum-utils<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Enable Yum repositories to pull App Protect dependencies:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf config-manager --set-enabled ol8_codeready_builder <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install -y app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Oracle Linux 8:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> oraclelinux:8</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf -y install wget ca-certificates yum-utils<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Enable Yum repositories to pull App Protect dependencies:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> dnf config-manager --set-enabled ol8_codeready_builder <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/dependencies.repo <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="c1"># You can use either of the dependencies or epel repo</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="c1"># &amp;&amp; rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \</span>
</span></span><span class="line"><span class="cl">    <span class="o">&amp;&amp;</span> dnf clean all<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    dnf install -y app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> dnf clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/dnf</span></span></code></pre></div>
</div><h3 
id="amazon-linux-2-converter-docker-deployment-example">Amazon Linux 2 Converter Docker Deployment Example  <a class="headerlink float-right" href="#amazon-linux-2-converter-docker-deployment-example" title="Amazon Linux 2 Converter Docker Deployment Example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62103438&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62103438">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Amazon Linux 2:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> amazonlinux:2</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> amazon-linux-extras <span class="nb">enable</span> epel<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> yum clean metadata<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> yum -y install wget ca-certificates epel-release shadow-utils<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-7.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    yum -y install app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> yum clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/yum</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Amazon Linux 2:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> amazonlinux:2</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> amazon-linux-extras <span class="nb">enable</span> epel<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> yum clean metadata<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> yum -y install wget ca-certificates epel-release shadow-utils<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App-protect repo to Yum:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-7.repo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install NGINX App Protect WAF:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    yum -y install app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> yum clean all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/cache/yum</span></span></code></pre></div>
</div><h3 
id="debian-11--debian-12-converter-docker-deployment-example">Debian 11 / Debian 12 Converter Docker Deployment Example  <a class="headerlink float-right" href="#debian-11--debian-12-converter-docker-deployment-example" title="Debian 11 / Debian 12 Converter Docker Deployment Example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f621fa170&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f621fa170">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Debian 11:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> debian:bullseye/bookworm</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y apt-transport-https lsb-release ca-certificates wget gnupg2<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect WAF repositories:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-app-protect.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/app-protect-security-updates.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download the apt configuration to `/etc/apt/apt.conf.d`:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF Compiler package:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get update <span class="o">&amp;&amp;</span> <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span><span class="s2">&#34;noninteractive&#34;</span> apt-get install -y app-protect-compiler</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Debian 11:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> debian:bullseye/bookworm</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y apt-transport-https lsb-release ca-certificates wget gnupg2<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect WAF repositories:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-app-protect.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/app-protect-security-updates.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download the apt configuration to `/etc/apt/apt.conf.d`:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF Compiler package:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get update <span class="o">&amp;&amp;</span> <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span><span class="s2">&#34;noninteractive&#34;</span> apt-get install -y app-protect-compiler</span></span></code></pre></div>
</div><h3 
id="ubuntu-2004--ubuntu-2204--ubuntu-2404-converter-docker-deployment-example">Ubuntu 20.04 / Ubuntu 22.04 / Ubuntu 24.04 Converter Docker Deployment Example  <a class="headerlink float-right" href="#ubuntu-2004--ubuntu-2204--ubuntu-2404-converter-docker-deployment-example" title="Ubuntu 20.04 / Ubuntu 22.04 / Ubuntu 24.04 Converter Docker Deployment Example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62335c38&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62335c38">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">ARG</span> OS_CODENAME<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Where OS_CODENAME can be: bionic/focal/jammy/noble</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Ubuntu 20.04 /22.04 / 24.04:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> ubuntu:${OS_CODENAME}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y apt-transport-https lsb-release ca-certificates wget gnupg2<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect WAF repositories:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-app-protect.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/app-protect-security-updates.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download the apt configuration to `/etc/apt/apt.conf.d`:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF Compiler package:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get update <span class="o">&amp;&amp;</span> <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span><span class="s2">&#34;noninteractive&#34;</span> apt-get install -y app-protect-compiler</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">ARG</span> OS_CODENAME<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Where OS_CODENAME can be: bionic/focal/jammy/noble</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Ubuntu 20.04 /22.04 / 24.04:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> ubuntu:${OS_CODENAME}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Install prerequisite packages:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y apt-transport-https lsb-release ca-certificates wget gnupg2<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/nginx_signing.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -qO - https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gpg --dearmor <span class="p">|</span> tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX App Protect WAF repositories:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/nginx-app-protect.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">    https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tee /etc/apt/sources.list.d/app-protect-security-updates.list<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download the apt configuration to `/etc/apt/apt.conf.d`:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF Compiler package:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.crt,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/ssl/nginx/nginx-repo.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get update <span class="o">&amp;&amp;</span> <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span><span class="s2">&#34;noninteractive&#34;</span> apt-get install -y app-protect-compiler</span></span></code></pre></div>
</div><h3 
id="alpine-316--alpine-317--alpine-319-converter-docker-deployment-example">Alpine 3.16 / Alpine 3.17 / Alpine 3.19 Converter Docker Deployment Example  <a class="headerlink float-right" href="#alpine-316--alpine-317--alpine-319-converter-docker-deployment-example" title="Alpine 3.16 / Alpine 3.17 / Alpine 3.19 Converter Docker Deployment Example"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">dockerfile</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62411fa8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62411fa8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Alpine 3.16/3.17/3.19:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> alpine:3.19</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -O /etc/apk/keys/nginx_signing.rsa.pub https://cs.nginx.com/static/keys/nginx_signing.rsa.pub <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> <span class="o">&amp;&amp;</span> wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> <span class="o">&amp;&amp;</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF Compiler package:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/apk/cert.pem,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/apk/cert.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apk update <span class="o">&amp;&amp;</span> apk add app-protect-compiler</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># For Alpine 3.16/3.17/3.19:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> alpine:3.19</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download and add the NGINX signing keys:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget -O /etc/apk/keys/nginx_signing.rsa.pub https://cs.nginx.com/static/keys/nginx_signing.rsa.pub <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> <span class="o">&amp;&amp;</span> wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Add NGINX Plus repository:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> <span class="o">&amp;&amp;</span> <span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> tee -a /etc/apk/repositories<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Update the repository and install the most recent version of the NGINX App Protect WAF Compiler package:</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-crt,dst<span class="o">=</span>/etc/apk/cert.pem,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>secret,id<span class="o">=</span>nginx-key,dst<span class="o">=</span>/etc/apk/cert.key,mode<span class="o">=</span><span class="m">0644</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apk update <span class="o">&amp;&amp;</span> apk add app-protect-compiler</span></span></code></pre></div>
</div><h2 
id="offline-installation">Offline Installation  <a class="headerlink float-right" href="#offline-installation" title="Offline Installation"><i class="fas fa-link fa-xs"></i></a>
</h2><p>To perform an offline installation of NGINX App Protect WAF you can use a host with access to the NGINX repository to download all the packages (including dependencies) to your local repository.</p>
<h3 
id="example-deployment-for-rhel">Example Deployment for RHEL  <a class="headerlink float-right" href="#example-deployment-for-rhel" title="Example Deployment for RHEL"><i class="fas fa-link fa-xs"></i></a>
</h3><h4 
id="add-the-nginx-app-protect-waf-packages-to-an-internal-repository">Add the NGINX App Protect WAF Packages to an Internal Repository  <a class="headerlink float-right" href="#add-the-nginx-app-protect-waf-packages-to-an-internal-repository" title="Add the NGINX App Protect WAF Packages to an Internal Repository"><i class="fas fa-link fa-xs"></i></a>
</h4><p>On a host with access to the NGINX App Protect WAF repository:</p>
<ol>
<li>
<p>Install the <code>downloadonly</code> plugin for Yum:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6245d6b0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6245d6b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yum -y install yum-plugin-downloadonly</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yum -y install yum-plugin-downloadonly</span></span></code></pre></div>
</div></li>
<li>
<p>Download all NGINX App Protect WAF packages, including all dependencies:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f624a3bb0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f624a3bb0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mkdir -p /etc/packages/
</span></span><span class="line"><span class="cl">yum install --downloadonly --downloaddir<span class="o">=</span>/etc/packages/ app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mkdir -p /etc/packages/
</span></span><span class="line"><span class="cl">yum install --downloadonly --downloaddir<span class="o">=</span>/etc/packages/ app-protect</span></span></code></pre></div>
</div></li>
<li>
<p>Download the <code>epel-release</code> dependency package:</p>
</li>
</ol>
<p>For RHEL 8.1+ / Oracle Linux 8.1+:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f624d21e0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f624d21e0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget -P /etc/packages https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget -P /etc/packages https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm</span></span></code></pre></div>
</div><p>For RHEL 9+:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f624fc1c0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f624fc1c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget -P /etc/packages https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget -P /etc/packages https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm</span></span></code></pre></div>
</div><ol start="4">
<li>Add the packages in <code>/etc/packages</code> to your local repository.</li>
</ol>
<h4 
id="install-nginx-app-protect-waf-from-an-internal-repository">Install NGINX App Protect WAF from an Internal Repository  <a class="headerlink float-right" href="#install-nginx-app-protect-waf-from-an-internal-repository" title="Install NGINX App Protect WAF from an Internal Repository"><i class="fas fa-link fa-xs"></i></a>
</h4><p>On an offline host:</p>
<ol>
<li>
<p>Add your internal repository configuration.</p>
</li>
<li>
<p>Install NGINX App Protect WAF:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6252e288&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6252e288">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yum -y install app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yum -y install app-protect</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="example-deployment-for-debianubuntu">Example Deployment for Debian/Ubuntu  <a class="headerlink float-right" href="#example-deployment-for-debianubuntu" title="Example Deployment for Debian/Ubuntu"><i class="fas fa-link fa-xs"></i></a>
</h3><h4 
id="add-the-nginx-app-protect-waf-packages-to-an-internal-repository-1">Add the NGINX App Protect WAF Packages to an Internal Repository  <a class="headerlink float-right" href="#add-the-nginx-app-protect-waf-packages-to-an-internal-repository-1" title="Add the NGINX App Protect WAF Packages to an Internal Repository"><i class="fas fa-link fa-xs"></i></a>
</h4><p>On a host with access to the NGINX App Protect WAF repository:</p>
<ol>
<li>
<p>Download all NGINX App Protect WAF packages, including all dependencies:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f625b46f8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f625b46f8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mkdir -p /etc/packages/
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /etc/packages/
</span></span><span class="line"><span class="cl">apt-get update
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in <span class="k">$(</span>apt-cache depends --recurse --no-recommends --no-suggests --no-conflicts --no-breaks --no-replaces --no-enhances app-protect <span class="p">|</span> grep <span class="s2">&#34;^\w&#34;</span> <span class="p">|</span> sort -u<span class="k">)</span><span class="p">;</span> <span class="k">do</span> apt-get download <span class="nv">$i</span> 2&gt;&gt;errors.txt<span class="p">;</span> <span class="k">done</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mkdir -p /etc/packages/
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /etc/packages/
</span></span><span class="line"><span class="cl">apt-get update
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in <span class="k">$(</span>apt-cache depends --recurse --no-recommends --no-suggests --no-conflicts --no-breaks --no-replaces --no-enhances app-protect <span class="p">|</span> grep <span class="s2">&#34;^\w&#34;</span> <span class="p">|</span> sort -u<span class="k">)</span><span class="p">;</span> <span class="k">do</span> apt-get download <span class="nv">$i</span> 2&gt;&gt;errors.txt<span class="p">;</span> <span class="k">done</span></span></span></code></pre></div>
</div></li>
<li>
<p>Add the packages in <code>/etc/packages</code> to your local repository.</p>
</li>
</ol>
<h4 
id="install-nginx-app-protect-waf-from-an-internal-repository-1">Install NGINX App Protect WAF from an Internal Repository  <a class="headerlink float-right" href="#install-nginx-app-protect-waf-from-an-internal-repository-1" title="Install NGINX App Protect WAF from an Internal Repository"><i class="fas fa-link fa-xs"></i></a>
</h4><p>On an offline host:</p>
<ol>
<li>
<p>Add your internal repository configuration.</p>
</li>
<li>
<p>Install NGINX App Protect WAF:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f625f1b70&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f625f1b70">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">apt-get update
</span></span><span class="line"><span class="cl">apt-get install -y app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">apt-get update
</span></span><span class="line"><span class="cl">apt-get install -y app-protect</span></span></code></pre></div>
</div></li>
</ol>
<h2 
id="post-installation-checks">Post-Installation Checks  <a class="headerlink float-right" href="#post-installation-checks" title="Post-Installation Checks"><i class="fas fa-link fa-xs"></i></a>
</h2><p>You can run the following commands to ensure that NGINX App Protect WAF enforcement is operational.</p>
<ol>
<li>
<p>Check that the three processes needed for NGINX App Protect WAF are running using <code>ps aux</code>:</p>
<ul>
<li>bd-socket-plugin</li>
<li>nginx: master process</li>
<li>nginx: worker process</li>
</ul>



<div class="code-block" data-mf="true" style="display: none;"><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f626491e0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f626491e0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
</span></span><span class="line"><span class="cl">root         8  1.3  2.4 3486948 399092 ?      Sl   09:11   0:02 /usr/share/ts/bin/bd-socket-plugin tmm_count 4 proc_cpuinfo_cpu_mhz 2000000 total_xml_memory 307200000 total_umu_max_size 3129344 sys_max_account_id 1024 no_static_config
</span></span><span class="line"><span class="cl">root        14  0.0  0.1  71060 26680 ?        S    09:11   0:00 nginx: master process /usr/sbin/nginx -c /tmp/policy/test_nginx.conf -g daemon off;
</span></span><span class="line"><span class="cl">root        26  0.0  0.3  99236 52092 ?        S    09:12   0:00 nginx: worker process
</span></span><span class="line"><span class="cl">root        28  0.0  0.0  11788  2920 pts/0    Ss   09:12   0:00 bash
</span></span><span class="line"><span class="cl">root        43  0.0  0.0  47460  3412 pts/0    R+   09:14   0:00 ps aux</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
</span></span><span class="line"><span class="cl">root         8  1.3  2.4 3486948 399092 ?      Sl   09:11   0:02 /usr/share/ts/bin/bd-socket-plugin tmm_count 4 proc_cpuinfo_cpu_mhz 2000000 total_xml_memory 307200000 total_umu_max_size 3129344 sys_max_account_id 1024 no_static_config
</span></span><span class="line"><span class="cl">root        14  0.0  0.1  71060 26680 ?        S    09:11   0:00 nginx: master process /usr/sbin/nginx -c /tmp/policy/test_nginx.conf -g daemon off;
</span></span><span class="line"><span class="cl">root        26  0.0  0.3  99236 52092 ?        S    09:12   0:00 nginx: worker process
</span></span><span class="line"><span class="cl">root        28  0.0  0.0  11788  2920 pts/0    Ss   09:12   0:00 bash
</span></span><span class="line"><span class="cl">root        43  0.0  0.0  47460  3412 pts/0    R+   09:14   0:00 ps aux</span></span></code></pre></div>
</div></li>
<li>
<p>Verify that there are no NGINX errors in the <code>/var/log/nginx/error.log</code> and that the policy compiled successfully:</p>



<div class="code-block" data-mf="true" style="display: none;"><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62778570&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62778570">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: APP_PROTECT { &#34;event&#34;: &#34;configuration_load_start&#34;, &#34;configSetFile&#34;: &#34;/opt/f5waf/config/config_set.json&#34; }</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: APP_PROTECT policy &#39;app_protect_default_policy&#39; from: /etc/app_protect/conf/NginxDefaultPolicy.json compiled successfully</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: APP_PROTECT { &#34;event&#34;: &#34;configuration_load_success&#34;, &#34;software_version&#34;: &#34;1.1.1&#34;, &#34;attack_signatures_package&#34;:{&#34;revision_datetime&#34;:&#34;2019-07-16T12:21:31Z&#34;},&#34;completed_successfully&#34;:true}</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: using the &#34;epoll&#34; event method</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: nginx/1.17.6 (nginx-plus-r20)</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: built by gcc 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC)</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: OS: Linux 3.10.0-957.27.2.el7.x86_64</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: getrlimit(RLIMIT_NOFILE): 1048576:1048576</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">406</span><span class="c1">#406: start worker processes</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">406</span><span class="c1">#406: start worker process 407</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: APP_PROTECT { &#34;event&#34;: &#34;configuration_load_start&#34;, &#34;configSetFile&#34;: &#34;/opt/f5waf/config/config_set.json&#34; }</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: APP_PROTECT policy &#39;app_protect_default_policy&#39; from: /etc/app_protect/conf/NginxDefaultPolicy.json compiled successfully</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: APP_PROTECT { &#34;event&#34;: &#34;configuration_load_success&#34;, &#34;software_version&#34;: &#34;1.1.1&#34;, &#34;attack_signatures_package&#34;:{&#34;revision_datetime&#34;:&#34;2019-07-16T12:21:31Z&#34;},&#34;completed_successfully&#34;:true}</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: using the &#34;epoll&#34; event method</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: nginx/1.17.6 (nginx-plus-r20)</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: built by gcc 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC)</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: OS: Linux 3.10.0-957.27.2.el7.x86_64</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">402</span><span class="c1">#402: getrlimit(RLIMIT_NOFILE): 1048576:1048576</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">406</span><span class="c1">#406: start worker processes</span>
</span></span><span class="line"><span class="cl"><span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">10</span> <span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">04</span> <span class="p">[</span><span class="n">notice</span><span class="p">]</span> <span class="mi">406</span><span class="c1">#406: start worker process 407</span></span></span></code></pre></div>
</div></li>
<li>
<p>Check that sending an attack signature in a request returns a response block page containing a support ID:</p>



<div class="code-block" data-mf="true" style="display: none;"><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62795260&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62795260">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Request:
</span></span><span class="line"><span class="cl">http://10.240.185.211/?a=&lt;script&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Response:
</span></span><span class="line"><span class="cl">The requested URL was rejected. Please consult with your administrator.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Your support ID is: 9847191526422998597
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[Go Back]</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Request:
</span></span><span class="line"><span class="cl">http://10.240.185.211/?a=&lt;script&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Response:
</span></span><span class="line"><span class="cl">The requested URL was rejected. Please consult with your administrator.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Your support ID is: 9847191526422998597
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[Go Back]</span></span></code></pre></div>
</div></li>
<li>
<p>In case your policy includes JSON/XML profiles, please check <code>/var/log/app_protect/bd-socket-plugin.log</code> and make sure there aren&rsquo;t any errors by running:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f627f68f8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f627f68f8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">grep</span> <span class="s1">&#39;|ERR&#39;</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">app_protect</span><span class="o">/</span><span class="n">bd</span><span class="o">-</span><span class="n">socket</span><span class="o">-</span><span class="n">plugin</span><span class="o">.</span><span class="n">log</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">grep</span> <span class="s1">&#39;|ERR&#39;</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">app_protect</span><span class="o">/</span><span class="n">bd</span><span class="o">-</span><span class="n">socket</span><span class="o">-</span><span class="n">plugin</span><span class="o">.</span><span class="n">log</span></span></span></code></pre></div>
</div><p>If you see an error similar to:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6280b8e8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6280b8e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">... Cannot allocate 196744 more bytes for XML parser. current memory size 307089520 (in bytes) ...</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">... Cannot allocate 196744 more bytes for XML parser. current memory size 307089520 (in bytes) ...</span></span></code></pre></div>
</div><p>Increase the <code>bd-socket-plugin</code> process command line variable <code>total_xml_memory</code> in the <code>startup.sh</code> script or in the <code>nginx-app-protect.service</code> file.</p>
<p>The NGINX App Protect&rsquo;s unit file can be modified with the following command:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6281e1c8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6281e1c8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo systemctl edit --full nginx-app-protect.service</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo systemctl edit --full nginx-app-protect.service</span></span></code></pre></div>
</div><p>The file itself is located at <code>/lib/systemd/system/</code> in deb packages, at <code>/usr/lib/systemd/system/</code> in rpm
packages.</p>
<p>The number <code>471859200</code> should be enough for most use cases, you may need to use a bigger number if the number of profiles is large, or large json/xml schemas are used in the policy.</p>
</li>
<li>
<p>If there are additional problems, refer to the <a href="http://localhost:1313/nginx-app-protect-waf/v4/troubleshooting-guide/troubleshooting/#app-protect-troubleshooting-overview">Troubleshooting Guide</a>.</p>
</li>
</ol>
<h2 
id="attack-signatures-dependency-change-in-nginx-app-protect-waf">Attack Signatures Dependency Change in NGINX App Protect WAF  <a class="headerlink float-right" href="#attack-signatures-dependency-change-in-nginx-app-protect-waf" title="Attack Signatures Dependency Change in NGINX App Protect WAF"><i class="fas fa-link fa-xs"></i></a>
</h2><p>Starting with release 3.12 there is a change in dependency of the Attack Signatures package. Until release 3.11, NGINX App Protect WAF used pre-packaged Attack Signatures that did not provide the latest Attack Signatures. <br></p>
<p>From version 3.12, when the user performs the clean install (installing NGINX App Protect WAF for the first time), it will install the latest Attack Signatures package. This will keep the customers up to date with the latest Attack Signatures and provide protection against the latest threats. <br></p>
<p>The way to achieve the goal of better protection will use the package dependency mechanism so the app protect package will be dependent on the signatures package thus ensuring that the latest signatures package is deployed once the app protect release is deployed for the first time.<br></p>
<p>In case the user has an older version of NGINX App Protect WAF and never installed the Attack Signatures package, upgrading NGINX App Protect WAF will install the latest Attack Signatures. However, if they have installed Attack Signatures package previously at any point in time, NGINX App Protect WAF will not install the latest Attack Signatures.</p>
<blockquote class="note">
  <div><strong>Note:</strong><br/> The user can upgrade or downgrade the Attack Signatures regardless of the installed version of NGINX App Protect WAF.</div>
</blockquote>

<h3 
id="attack-signatures-package">Attack Signatures Package  <a class="headerlink float-right" href="#attack-signatures-package" title="Attack Signatures Package"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The attack signature package is named: app-protect-attack-signatures-2022.08.04. The version number for this package reflects the date the package was released. The format is: <em>YYYY.MM.DD</em> where:</p>
<ul>
<li>YYYY is the 4-digit year</li>
<li>MM is the month</li>
<li>DD is the day in the month</li>
</ul>
<p>Example: app-protect-attack-signatures-2022.08.04</p>
<h2 
id="updating-app-protect-attack-signatures">Updating App Protect Attack Signatures  <a class="headerlink float-right" href="#updating-app-protect-attack-signatures" title="Updating App Protect Attack Signatures"><i class="fas fa-link fa-xs"></i></a>
</h2><p>Attack Signatures updates are released at higher frequency than App Protect, therefore they are released in their own package, separate from the App Protect package. You can update the attack signatures without updating the App Protect release, and conversely, you can update App Protect without changing the attack signature package, unless you move to a new NGINX Plus release.</p>
<h3 
id="installing-attack-signature-update">Installing Attack Signature Update  <a class="headerlink float-right" href="#installing-attack-signature-update" title="Installing Attack Signature Update"><i class="fas fa-link fa-xs"></i></a>
</h3><p>After having updated the Attack Signature package you have to reload the configuration in order for the new version of the Signatures to take effect. Until then App Protect will run with the old version. That is useful when creating an environment with a specific tested version of the Attack Signatures.</p>
<h3 
id="rhel-81--oracle-linux-81">RHEL 8.1+ / Oracle Linux 8.1+  <a class="headerlink float-right" href="#rhel-81--oracle-linux-81" title="RHEL 8.1&#43; / Oracle Linux 8.1&#43;"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>To add NGINX App Protect WAF Security Updates repository, download the file <code>app-protect-8.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62844710&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62844710">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Update the attack signatures to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6287e8c0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6287e8c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-attack-signatures</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f628b05a0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f628b05a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-attack-signatures</span></span></code></pre></div>
</div><p>To upgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f628de7e8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f628de7e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-attack-signatures-2021.12.30</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-attack-signatures-2021.12.30</span></span></code></pre></div>
</div><p>To downgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6290ca30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6290ca30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf downgrade app-protect-attack-signatures-2019.07.16</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf downgrade app-protect-attack-signatures-2019.07.16</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="rhel-9">RHEL 9+  <a class="headerlink float-right" href="#rhel-9" title="RHEL 9&#43;"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>To add NGINX App Protect WAF Security Updates repository, download the file <code>app-protect-9.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f629421a8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f629421a8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Update the attack signatures to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6296e4b0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6296e4b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-attack-signatures</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6299af88&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6299af88">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-attack-signatures</span></span></code></pre></div>
</div><p>To upgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f629c5b20&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f629c5b20">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-attack-signatures-2023.12.11</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-attack-signatures-2023.12.11</span></span></code></pre></div>
</div><p>To downgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f629f02d0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f629f02d0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf downgrade app-protect-attack-signatures-2023.12.11</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf downgrade app-protect-attack-signatures-2023.12.11</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="debian-11--debian-12">Debian 11 / Debian 12  <a class="headerlink float-right" href="#debian-11--debian-12" title="Debian 11 / Debian 12"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>Add NGINX App Protect WAF Security Updates repository:</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62a2f2a0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62a2f2a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
</div><ol start="2">
<li>Download and add the NGINX App Protect WAF signatures signing key:</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62a6f9e0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62a6f9e0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
</div><ol start="3">
<li>Download the apt configuration to <code>/etc/apt/apt.conf.d</code>:</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62aa0338&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62aa0338">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
</div><ol start="4">
<li>Update the attack signatures to the latest:</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62ad6a50&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62ad6a50">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-attack-signatures</span></span></code></pre></div>
</div><ol start="5">
<li>To install a specific version, list the available versions:</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62b03910&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62b03910">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-attack-signatures</span></span></code></pre></div>
</div><p>For Debian 11:</p>
<pre><code>```shell
</code></pre>
<p>sudo apt-get install app-protect-attack-signatures=2020.04.30-1~bulleye</p>



<div class="code-block" data-mf="true" style="display: none;"><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62b3bf68&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62b3bf68">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">For Debian 12:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    ```shell
</span></span><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures=2020.04.30-1~bookworm</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">For Debian 12:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    ```shell
</span></span><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures=2020.04.30-1~bookworm</span></span></code></pre></div>
</div><h3 
id="ubuntu-2004--ubuntu-2204">Ubuntu 20.04 / Ubuntu 22.04  <a class="headerlink float-right" href="#ubuntu-2004--ubuntu-2204" title="Ubuntu 20.04 / Ubuntu 22.04"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>Add NGINX App Protect WAF Security Updates repository:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62b7e9d0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62b7e9d0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
</div></li>
<li>
<p>Download and add the NGINX App Protect WAF signatures signing key:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62bc1820&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62bc1820">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
</div></li>
<li>
<p>Download the apt configuration to <code>/etc/apt/apt.conf.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62bf8708&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62bf8708">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Update the attack signatures to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62c31530&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62c31530">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-attack-signatures</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>
</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62c5d450&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62c5d450">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-attack-signatures</span></span></code></pre></div>
</div><p>For Ubuntu 20.04:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62c8b698&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62c8b698">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures<span class="o">=</span>2020.07.16-1~focal</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures<span class="o">=</span>2020.07.16-1~focal</span></span></code></pre></div>
</div><p>For Ubuntu 22.04:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62cbf6a0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62cbf6a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures<span class="o">=</span>2020.07.16-1~jammy</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures<span class="o">=</span>2020.07.16-1~jammy</span></span></code></pre></div>
</div><p>For Ubuntu 24.04:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62cefff8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62cefff8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures<span class="o">=</span>2020.07.16-1~noble</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures<span class="o">=</span>2020.07.16-1~noble</span></span></code></pre></div>
</div><h3 
id="alpine-319">Alpine 3.19  <a class="headerlink float-right" href="#alpine-319" title="Alpine 3.19"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add the NGINX App Protect WAF Security Updates repository:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62d31ea8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62d31ea8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
</div></li>
<li>
<p>If not already downloaded, download and add the NGINX App Protect WAF Security Updates signing key:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62d63f70&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62d63f70">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub</span></span></code></pre></div>
</div></li>
<li>
<p>Update the attack signatures:</p>
<p>To install the latest version, first update the packages:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62d98f18&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62d98f18">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update <span class="o">&amp;&amp;</span> sudo apk add app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update <span class="o">&amp;&amp;</span> sudo apk add app-protect-attack-signatures</span></span></code></pre></div>
</div><p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62dc3ab0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62dc3ab0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk search app-protect-attack-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk search app-protect-attack-signatures</span></span></code></pre></div>
</div><p>Finally, install the latest version from the output:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62df0970&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62df0970">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk add app-protect-attack-signatures<span class="o">=</span>2023.08.03-r1</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk add app-protect-attack-signatures<span class="o">=</span>2023.08.03-r1</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="attack-signatures-when-upgrading-nginx-app-protect-waf">Attack Signatures When Upgrading NGINX App Protect WAF  <a class="headerlink float-right" href="#attack-signatures-when-upgrading-nginx-app-protect-waf" title="Attack Signatures When Upgrading NGINX App Protect WAF"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Upgrading App Protect does <em>not</em> install new Attack Signatures. You will get the same Attack Signature release after upgrading App Protect. If you want to also upgrade the Attack Signatures, you will have to explicitly update them by the respective command above.</p>
<h3 
id="threat-campaigns-dependency-change-in-nginx-app-protect-waf">Threat Campaigns Dependency Change in NGINX App Protect WAF  <a class="headerlink float-right" href="#threat-campaigns-dependency-change-in-nginx-app-protect-waf" title="Threat Campaigns Dependency Change in NGINX App Protect WAF"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Starting with release 3.12 there is a change in dependency of the Threat Campaigns package. Until release 3.11, App Protect installation did not come with a built-in Threat Campaigns package like Attack Signatures. <br></p>
<p>From version 3.12, when the user performs the clean install (installing NGINX App Protect WAF for the first time), it will install the latest Threat Campaigns package. This will keep the customers up to date with the latest Threat Campaigns and provide protection against the latest threats. <br></p>
<p>The way to achieve the goal of better protection will use the package dependency mechanism so the app protect package will be dependent on the Threat Campaigns package thus ensuring that the latest Threat Campaigns package is deployed once the app protect release is deployed for the first time.<br></p>
<p>In case the user has an older version of NGINX App Protect WAF and never installed the Threat Campaigns package, upgrading NGINX App Protect will install the latest Threat Campaigns. However, if they have installed Threat Campaigns package previously at any point in time, NGINX App Protect WAF will not install the latest Threat Campaigns.</p>
<blockquote class="note">
  <div><strong>Note:</strong><br/> The user can upgrade or downgrade the Threat Campaigns regardless of the installed version of NGINX App Protect WAF.</div>
</blockquote>

<h3 
id="installing-threat-campaigns-update">Installing Threat Campaigns Update  <a class="headerlink float-right" href="#installing-threat-campaigns-update" title="Installing Threat Campaigns Update"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Until release 3.11 App Protect installation did not come with a built-in Threat Campaigns package like Attack Signatures. Threat Campaigns Updates are released periodically whenever new campaigns and vectors are discovered, so you might want to update your Threat Campaigns from time to time. You can upgrade the Threat Campaigns by updating the package any time after installing App Protect. We recommend you upgrade to the latest Threat Campaigns version right after installing App Protect.</p>
<p>After having updated the Threat Campaigns package you have to reload the configuration in order for the new version of the Threat Campaigns to take effect. Until then App Protect will run with the old version, if one exists. This is useful when creating an environment with a specific tested version of the Threat Campaigns.</p>
<h2 
id="updating-app-protect-threat-campaigns">Updating App Protect Threat Campaigns  <a class="headerlink float-right" href="#updating-app-protect-threat-campaigns" title="Updating App Protect Threat Campaigns"><i class="fas fa-link fa-xs"></i></a>
</h2><p>The Threat Campaigns feature is described <a href="http://localhost:1313/nginx-app-protect-waf/v4/configuration-guide/configuration/#threat-campaigns">here</a>.</p>
<p>The Threat Campaigns package is named: app-protect-threat-campaigns-2022.07.21. The version number for this package reflects the date the package was released. The format is: <em>YYYY.MM.DD</em> where:</p>
<ul>
<li>YYYY is the 4-digit year</li>
<li>MM is the month</li>
<li>DD is the day in the month</li>
</ul>
<p>Example: app-protect-threat-campaigns-2022.07.21</p>
<h3 
id="rhel-81--oracle-linux-81-1">RHEL 8.1+ / Oracle Linux 8.1+  <a class="headerlink float-right" href="#rhel-81--oracle-linux-81-1" title="RHEL 8.1&#43; / Oracle Linux 8.1&#43;"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add NGINX App Protect WAF Security Updates repository by downloading the file <code>app-protect-8.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62e2e1d0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62e2e1d0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Update Threat Campaigns to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62e46488&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62e46488">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-threat-campaigns</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62e5b860&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62e5b860">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-threat-campaigns</span></span></code></pre></div>
</div><p>To upgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62e6fc98&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62e6fc98">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-threat-campaigns-2022.07.21</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-threat-campaigns-2022.07.21</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="rhel-9-1">RHEL 9+  <a class="headerlink float-right" href="#rhel-9-1" title="RHEL 9&#43;"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add NGINX App Protect WAF Security Updates repository by downloading the file <code>app-protect-9.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62e86fb0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62e86fb0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Update Threat Campaigns to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62e9b7d0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62e9b7d0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-threat-campaigns</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62eb03d8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62eb03d8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-threat-campaigns</span></span></code></pre></div>
</div><p>To upgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62ec4428&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62ec4428">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-threat-campaigns-2023.12.11</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-threat-campaigns-2023.12.11</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="alpine-316--alpine-317--alpine-319">Alpine 3.16 / Alpine 3.17 / Alpine 3.19  <a class="headerlink float-right" href="#alpine-316--alpine-317--alpine-319" title="Alpine 3.16 / Alpine 3.17 / Alpine 3.19"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add the NGINX App Protect WAF Security Updates repository:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62eec8b0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62eec8b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
</div></li>
<li>
<p>If not already downloaded, download and add the NGINX App Protect WAF Security Updates signing key:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62f05b08&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62f05b08">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub</span></span></code></pre></div>
</div></li>
<li>
<p>Update Threat Campaigns to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62f227f8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62f227f8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update <span class="o">&amp;&amp;</span> sudo apk add app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update <span class="o">&amp;&amp;</span> sudo apk add app-protect-threat-campaigns</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62f38f58&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62f38f58">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk search app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk search app-protect-threat-campaigns</span></span></code></pre></div>
</div><p>Finally, install the latest version from the output:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62f55478&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62f55478">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk add app-protect-threat-campaigns<span class="o">=</span>2023.08.09-r1</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk add app-protect-threat-campaigns<span class="o">=</span>2023.08.09-r1</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="debian-11--debian-12-1">Debian 11 / Debian 12  <a class="headerlink float-right" href="#debian-11--debian-12-1" title="Debian 11 / Debian 12"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add the NGINX App Protect WAF Security Updates repository:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62f7aa20&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62f7aa20">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
</div></li>
<li>
<p>Download and add the NGINX App Protect WAF Threat Campaigns signing key:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62fa0f68&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f62fa0f68">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
</div></li>
<li>
<p>Download the apt configuration to <code>/etc/apt/apt.conf.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62fb9608&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62fb9608">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Update Threat Campaigns to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62fd3800&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62fd3800">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-threat-campaigns</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>
</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f62fe9b78&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f62fe9b78">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-threat-campaigns</span></span></code></pre></div>
</div><p>For Debian 11:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6300c240&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6300c240">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-threat-campaigns<span class="o">=</span>2020.06.25-1~bullseye</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-threat-campaigns<span class="o">=</span>2020.06.25-1~bullseye</span></span></code></pre></div>
</div><pre><code>For Debian 12:
</code></pre>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63023940&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63023940">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-threat-campaigns<span class="o">=</span>2020.06.25-1~bookworm</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-threat-campaigns<span class="o">=</span>2020.06.25-1~bookworm</span></span></code></pre></div>
</div><h3 
id="ubuntu-2004--ubuntu-2204-1">Ubuntu 20.04 / Ubuntu 22.04  <a class="headerlink float-right" href="#ubuntu-2004--ubuntu-2204-1" title="Ubuntu 20.04 / Ubuntu 22.04"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add the NGINX App Protect WAF Security Updates repository:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f630f7010&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f630f7010">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
</div></li>
<li>
<p>Download and add the NGINX App Protect WAF Threat Campaigns signing key:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6313b5d0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f6313b5d0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
</div></li>
<li>
<p>Download the apt configuration to <code>/etc/apt/apt.conf.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f631557c8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f631557c8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Update Threat Campaigns to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63170578&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63170578">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-threat-campaigns</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>
</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63197678&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63197678">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-threat-campaigns</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-threat-campaigns</span></span></code></pre></div>
</div><p>For Ubuntu 20.04:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f631d9910&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f631d9910">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-threat-campaigns<span class="o">=</span>2020.08.05-1~focal</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-threat-campaigns<span class="o">=</span>2020.08.05-1~focal</span></span></code></pre></div>
</div><p>For Ubuntu 22.04:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f632113b0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f632113b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-threat-campaigns<span class="o">=</span>2020.08.05-1~jammy</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-threat-campaigns<span class="o">=</span>2020.08.05-1~jammy</span></span></code></pre></div>
</div><p>For Ubuntu 24.04:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63253e18&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63253e18">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures<span class="o">=</span>2024.06.26-1~noble</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-attack-signatures<span class="o">=</span>2024.06.26-1~noble</span></span></code></pre></div>
</div><h2 
id="updating-app-protect-bot-signatures">Updating App Protect Bot Signatures  <a class="headerlink float-right" href="#updating-app-protect-bot-signatures" title="Updating App Protect Bot Signatures"><i class="fas fa-link fa-xs"></i></a>
</h2><p>The App Protect Bot Signatures feature is described <a href="http://localhost:1313/nginx-app-protect-waf/v4/configuration-guide/configuration/#bot-signatures">here</a>.<br></p>
<p>The App Protect Bot Signatures is named: app-protect-bot-signatures and it is a dependency similar to attack signatures and threat campaigns and can be updated more often. The version number for this package reflects the date the package was released. For example: app-protect-bot-signatures-2023.11.14, where the format for app protect bot signatures is: YYYY.MM.DD.</p>
<h3 
id="rhel-81--oracle-linux-81-2">RHEL 8.1+ / Oracle Linux 8.1+  <a class="headerlink float-right" href="#rhel-81--oracle-linux-81-2" title="RHEL 8.1&#43; / Oracle Linux 8.1&#43;"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add NGINX App Protect WAF Security Updates repository by downloading the file <code>app-protect-8.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f632960b0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f632960b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-8.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Update Bot Signatures to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f632c23b8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f632c23b8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-bot-signatures</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f632eeaa8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f632eeaa8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-bot-signatures</span></span></code></pre></div>
</div><p>To upgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f633186a0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f633186a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-bot-signatures-2023.11.14</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-bot-signatures-2023.11.14</span></span></code></pre></div>
</div><p>To downgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63342a68&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63342a68">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf downgrade app-protect-bot-signatures-2023.11.14</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf downgrade app-protect-bot-signatures-2023.11.14</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="rhel-9-2">RHEL 9+  <a class="headerlink float-right" href="#rhel-9-2" title="RHEL 9&#43;"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add NGINX App Protect WAF Security Updates repository by downloading the file <code>app-protect-9.repo</code> to <code>/etc/yum.repos.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f633733c0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f633733c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/yum.repos.d https://cs.nginx.com/static/files/app-protect-9.repo</span></span></code></pre></div>
</div></li>
<li>
<p>Update Bot Signatures to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6339c7e8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6339c7e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-bot-signatures</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f633c8708&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f633c8708">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf --showduplicates list app-protect-bot-signatures</span></span></code></pre></div>
</div><p>To upgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f633f1b30&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f633f1b30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-bot-signatures-2023.12.11</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf install app-protect-bot-signatures-2023.12.11</span></span></code></pre></div>
</div><p>To downgrade to a specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6341b728&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6341b728">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf downgrade app-protect-bot-signatures-2023.12.11</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf downgrade app-protect-bot-signatures-2023.12.11</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="alpine-316--alpine-317--alpine-319-1">Alpine 3.16 / Alpine 3.17 / Alpine 3.19  <a class="headerlink float-right" href="#alpine-316--alpine-317--alpine-319-1" title="Alpine 3.16 / Alpine 3.17 / Alpine 3.19"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add the NGINX App Protect WAF Security Updates repository:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63455cc0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63455cc0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;https://pkgs.nginx.com/app-protect-security-updates/alpine/v`egrep -o &#39;^[0-9]+\.[0-9]+&#39; /etc/alpine-release`/main\n&#34;</span> <span class="p">|</span> sudo tee -a /etc/apk/repositories</span></span></code></pre></div>
</div></li>
<li>
<p>If not already downloaded, download and add the NGINX App Protect WAF Security Updates signing key:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63481fc8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63481fc8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -O /etc/apk/keys/app-protect-security-updates.rsa.pub https://cs.nginx.com/static/keys/app-protect-security-updates.rsa.pub</span></span></code></pre></div>
</div></li>
<li>
<p>Update Bot Signatures to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f634b5fd0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f634b5fd0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update <span class="o">&amp;&amp;</span> sudo apk add app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk update <span class="o">&amp;&amp;</span> sudo apk add app-protect-bot-signatures</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f634dffb0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f634dffb0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk search app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk search app-protect-bot-signatures</span></span></code></pre></div>
</div><p>Finally, install the latest version from the output:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f6350c6a0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f6350c6a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk add app-protect-bot-signatures<span class="o">=</span>2023.11.14</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk add app-protect-bot-signatures<span class="o">=</span>2023.11.14</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="debian-11--debian-12-2">Debian 11 / Debian 12  <a class="headerlink float-right" href="#debian-11--debian-12-2" title="Debian 11 / Debian 12"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add the NGINX App Protect WAF Security Updates repository:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63549b18&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f63549b18">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/debian `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
</div></li>
<li>
<p>Download and add the NGINX App Protect WAF Bot Signatures signing key:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f635b0b88&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f635b0b88">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
</div></li>
<li>
<p>Download the apt configuration to <code>/etc/apt/apt.conf.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f635e0928&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f635e0928">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Update Bot Signatures to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63630298&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63630298">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-bot-signatures</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f636613c0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f636613c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-bot-signatures</span></span></code></pre></div>
</div><p>Install a specific version:</p>
<p>For Debian 11:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63691d18&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63691d18">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2023.11.14~bullseye</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2023.11.14~bullseye</span></span></code></pre></div>
</div><p>For Debian 12:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f636bfb78&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f636bfb78">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2023.11.14~bookworm</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2023.11.14~bookworm</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="ubuntu-2004--ubuntu-2204-2">Ubuntu 20.04 / Ubuntu 22.04  <a class="headerlink float-right" href="#ubuntu-2004--ubuntu-2204-2" title="Ubuntu 20.04 / Ubuntu 22.04"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>If not already configured, add the NGINX App Protect WAF Security Updates repository:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f636ff318&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f636ff318">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/app-protect-security-updates.gpg] \
</span></span></span><span class="line"><span class="cl"><span class="s2">https://pkgs.nginx.com/app-protect-security-updates/ubuntu `lsb_release -cs` nginx-plus\n&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/app-protect-security-updates.list</span></span></code></pre></div>
</div></li>
<li>
<p>Download and add the NGINX App Protect WAF Bot Signatures signing key:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f637415b0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f637415b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget https://cs.nginx.com/static/keys/app-protect-security-updates.key <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>gpg --dearmor <span class="p">|</span> sudo tee /usr/share/keyrings/app-protect-security-updates.gpg &gt;/dev/null</span></span></code></pre></div>
</div></li>
<li>
<p>Download the apt configuration to <code>/etc/apt/apt.conf.d</code>:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63771350&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63771350">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget -P /etc/apt/apt.conf.d https://cs.nginx.com/static/files/90pkgs-nginx</span></span></code></pre></div>
</div></li>
<li>
<p>Update Bot Signatures to the latest:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f637acc70&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f637acc70">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install app-protect-bot-signatures</span></span></code></pre></div>
</div></li>
<li>
<p>To install a specific version, list the available versions:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f637f0a60&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f637f0a60">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-cache policy app-protect-bot-signatures</span></span></code></pre></div>
</div><p>Install a specific version:</p>
<p>For Ubuntu 20.04:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63825620&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63825620">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2023.11.14~focal</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2023.11.14~focal</span></span></code></pre></div>
</div><p>For Ubuntu 22.04:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f638557a8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f638557a8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2023.11.14~jammy</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2023.11.14~jammy</span></span></code></pre></div>
</div><p>For Ubuntu 24.04:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63885160&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63885160">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2024.06.23~noble</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install app-protect-bot-signatures<span class="o">=</span>2024.06.23~noble</span></span></code></pre></div>
</div></li>
</ol>
<h2 
id="upgrading-app-protect">Upgrading App Protect  <a class="headerlink float-right" href="#upgrading-app-protect" title="Upgrading App Protect"><i class="fas fa-link fa-xs"></i></a>
</h2><p>You can upgrade to the latest NGINX Plus and App Protect 4.x versions by downloading and installing the latest NGINX App Protect WAF 4.x package. When upgrading from this package, App Protect will be uninstalled and reinstalled. The old default security policy is deleted and the new default security policy is installed. If you have created a custom security policy, the policy persists and you will need to update <code>nginx.conf</code> and point to the custom security policy by referencing the json file (using the full path).</p>
<p>After upgrading the NGINX App Protect WAF version, restart NGINX manually:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f638b9938&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f638b9938">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nginx</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart nginx</span></span></code></pre></div>
</div><p>In case of using the prebuilt SELinux policy module for NGINX App Protect WAF (app-protect-selinux) - upgrade it by installing the latest 4.x available version.</p>
<h2 
id="uninstall-app-protect">Uninstall App Protect  <a class="headerlink float-right" href="#uninstall-app-protect" title="Uninstall App Protect"><i class="fas fa-link fa-xs"></i></a>
</h2><p>You can uninstall the App Protect in below Operating Systems by using the following commands:</p>
<h3 
id="rhel-81--oracle-linux-81--rhel-9">RHEL 8.1+ / Oracle Linux 8.1+ / RHEL 9+  <a class="headerlink float-right" href="#rhel-81--oracle-linux-81--rhel-9" title="RHEL 8.1&#43; / Oracle Linux 8.1&#43; / RHEL 9&#43;"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f638e8350&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f638e8350">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf remove app-protect app-protect-selinux</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf remove app-protect app-protect-selinux</span></span></code></pre></div>
</div><h3 
id="debian-11--debian-12--ubuntu-2004--ubuntu-2204--ubuntu-2404">Debian 11 / Debian 12 / Ubuntu 20.04 / Ubuntu 22.04 / Ubuntu 24.04  <a class="headerlink float-right" href="#debian-11--debian-12--ubuntu-2004--ubuntu-2204--ubuntu-2404" title="Debian 11 / Debian 12 / Ubuntu 20.04 / Ubuntu 22.04 / Ubuntu 24.04"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63939fe8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f63939fe8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get remove app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-graphql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-geoip <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-common <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-attack-signatures <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-threat-campaigns <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get remove app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-graphql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-geoip <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-common <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-attack-signatures <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-threat-campaigns <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-bot-signatures</span></span></code></pre></div>
</div><h3 
id="alpine-316--alpine-317--alpine-319-2">Alpine 3.16 / Alpine 3.17 / Alpine 3.19  <a class="headerlink float-right" href="#alpine-316--alpine-317--alpine-319-2" title="Alpine 3.16 / Alpine 3.17 / Alpine 3.19"><i class="fas fa-link fa-xs"></i></a>
</h3>


<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63995ca8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f63995ca8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk del app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-graphql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-geoip <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-common <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-attack-signatures <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-threat-campaigns <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-bot-signatures</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apk del app-protect <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-graphql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-geoip <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-common <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-attack-signatures <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-threat-campaigns <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-bot-signatures</span></span></code></pre></div>
</div><h2 
id="upgrading-app-protect-to-a-specific-version">Upgrading App Protect to a Specific Version  <a class="headerlink float-right" href="#upgrading-app-protect-to-a-specific-version" title="Upgrading App Protect to a Specific Version"><i class="fas fa-link fa-xs"></i></a>
</h2><h3 
id="rhel-81--oracle-linux-81--rhel-9-1">RHEL 8.1+ / Oracle Linux 8.1+ / RHEL 9+  <a class="headerlink float-right" href="#rhel-81--oracle-linux-81--rhel-9-1" title="RHEL 8.1&#43; / Oracle Linux 8.1&#43; / RHEL 9&#43;"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>Upgrade the NGINX App Protect WAF to the specific version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f639e7d28&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f639e7d28">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf -y update app-protect-27+3.1088.0-1</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf -y update app-protect-27+3.1088.0-1</span></span></code></pre></div>
</div></li>
</ol>
<h3 
id="debian-11--debian-12-3">Debian 11 / Debian 12  <a class="headerlink float-right" href="#debian-11--debian-12-3" title="Debian 11 / Debian 12"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>Get the dependencies and their versions to be upgraded to by using the command:</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63a7b0a0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f63a7b0a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">findDeps <span class="o">()</span> <span class="o">{</span> <span class="nb">local</span> <span class="nv">pkgs</span><span class="o">=</span><span class="k">$(</span>apt show <span class="nv">$1</span> 2&gt;/dev/null <span class="p">|</span> grep Depends: <span class="p">|</span> grep -oE <span class="s2">&#34;(nginx-plus-module|app-protect)-[a-z]+ *\(= *[0-9\+\.-]+~`lsb_release -cs`\)&#34;</span> <span class="p">|</span> tr -d <span class="s1">&#39; ()&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">for</span> p in <span class="si">${</span><span class="nv">pkgs</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$p</span><span class="p">;</span> findDeps <span class="nv">$p</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">findDeps app-protect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">findDeps <span class="o">()</span> <span class="o">{</span> <span class="nb">local</span> <span class="nv">pkgs</span><span class="o">=</span><span class="k">$(</span>apt show <span class="nv">$1</span> 2&gt;/dev/null <span class="p">|</span> grep Depends: <span class="p">|</span> grep -oE <span class="s2">&#34;(nginx-plus-module|app-protect)-[a-z]+ *\(= *[0-9\+\.-]+~`lsb_release -cs`\)&#34;</span> <span class="p">|</span> tr -d <span class="s1">&#39; ()&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">for</span> p in <span class="si">${</span><span class="nv">pkgs</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$p</span><span class="p">;</span> findDeps <span class="nv">$p</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">findDeps app-protect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
</div><ol start="2">
<li>Upgrade the NGINX App Protect WAF to the specific version:</li>
</ol>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63af6930&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f63af6930">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> apt-get install -y app-protect-common<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span>
</span></span><span class="line"><span class="cl">app-protect-compiler<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin<span class="o">=</span>3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>nginx-plus-module-appprotect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> apt-get install -y app-protect-common<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span>
</span></span><span class="line"><span class="cl">app-protect-compiler<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin<span class="o">=</span>3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>nginx-plus-module-appprotect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
</div><p><strong>Note</strong>: Replace the [OS_CODENAME] in the above command with <strong>bullseye</strong> for Debian 11 and <strong>bookworm</strong> for Debian 12.</p>
<h3 
id="ubuntu-2004--ubuntu-2204-3">Ubuntu 20.04 / Ubuntu 22.04  <a class="headerlink float-right" href="#ubuntu-2004--ubuntu-2204-3" title="Ubuntu 20.04 / Ubuntu 22.04"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>Get the dependencies and their versions to be upgraded to by using the command:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63b85658&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f63b85658">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">findDeps <span class="o">()</span> <span class="o">{</span> <span class="nb">local</span> <span class="nv">pkgs</span><span class="o">=</span><span class="k">$(</span>apt show <span class="nv">$1</span> 2&gt;/dev/null <span class="p">|</span> grep Depends: <span class="p">|</span> grep -oE <span class="s2">&#34;(nginx-plus-module|app-protect)-[a-z]+ *\(= *[0-9\+\.-]+~`lsb_release -cs`\)&#34;</span> <span class="p">|</span> tr -d <span class="s1">&#39; ()&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">for</span> p in <span class="si">${</span><span class="nv">pkgs</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$p</span><span class="p">;</span> findDeps <span class="nv">$p</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">findDeps app-protect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">findDeps <span class="o">()</span> <span class="o">{</span> <span class="nb">local</span> <span class="nv">pkgs</span><span class="o">=</span><span class="k">$(</span>apt show <span class="nv">$1</span> 2&gt;/dev/null <span class="p">|</span> grep Depends: <span class="p">|</span> grep -oE <span class="s2">&#34;(nginx-plus-module|app-protect)-[a-z]+ *\(= *[0-9\+\.-]+~`lsb_release -cs`\)&#34;</span> <span class="p">|</span> tr -d <span class="s1">&#39; ()&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">for</span> p in <span class="si">${</span><span class="nv">pkgs</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$p</span><span class="p">;</span> findDeps <span class="nv">$p</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">findDeps app-protect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
</div></li>
<li>
<p>Upgrade the NGINX App Protect WAF to the specific version:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63beaf58&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f63beaf58">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> apt-get install -y app-protect-common<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span>
</span></span><span class="line"><span class="cl">app-protect-compiler<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin<span class="o">=</span>3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>nginx-plus-module-appprotect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> apt-get install -y app-protect-common<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span>
</span></span><span class="line"><span class="cl">app-protect-compiler<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-plugin<span class="o">=</span>3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>nginx-plus-module-appprotect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect-engine<span class="o">=</span>10.139.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>app-protect<span class="o">=</span>27+3.1088.2-1~<span class="o">[</span>OS_CODENAME<span class="o">]</span></span></span></code></pre></div>
</div></li>
</ol>
<p><strong>Note</strong>: Replace the [OS_CODENAME] in the above command with <strong>focal</strong> for Ubuntu 20.04, <strong>jammy</strong> for Ubuntu 22.04, and <strong>noble</strong> for Ubuntu 24.04.</p>
<h2 
id="upgrading-app-protect-to-the-latest-version">Upgrading App Protect to the latest version  <a class="headerlink float-right" href="#upgrading-app-protect-to-the-latest-version" title="Upgrading App Protect to the latest version"><i class="fas fa-link fa-xs"></i></a>
</h2><h3 
id="rhel-81--rhel-9--oracle-linux-81">RHEL 8.1+ / RHEL 9+ / Oracle Linux 8.1+  <a class="headerlink float-right" href="#rhel-81--rhel-9--oracle-linux-81" title="RHEL 8.1&#43; / RHEL 9&#43; / Oracle Linux 8.1&#43;"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Upgrade the NGINX App Protect WAF to the latest 4.x version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63c09f70&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63c09f70">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf -y update app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo dnf -y update app-protect</span></span></code></pre></div>
</div><h3 
id="debian-11--debian-12--ubuntu-2004--ubuntu-2204">Debian 11 / Debian 12 / Ubuntu 20.04 / Ubuntu 22.04  <a class="headerlink float-right" href="#debian-11--debian-12--ubuntu-2004--ubuntu-2204" title="Debian 11 / Debian 12 / Ubuntu 20.04 / Ubuntu 22.04"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Upgrade the NGINX App Protect WAF to the latest 4.x version:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63c2c638&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63c2c638">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> apt-get install -y app-protect</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update <span class="o">&amp;&amp;</span> apt-get install -y app-protect</span></span></code></pre></div>
</div><h2 
id="selinux-configuration">SELinux Configuration  <a class="headerlink float-right" href="#selinux-configuration" title="SELinux Configuration"><i class="fas fa-link fa-xs"></i></a>
</h2><p>The default settings for Security-Enhanced Linux (SELinux) on modern Red Hat Enterprise Linux (RHEL) and related distros can be very strict, erring on the side of security rather than convenience.</p>
<p>Although the NGINX App Protect WAF provides an optional package with prebuilt SELinux policy module - <code>app-protect-selinux</code>, your specific configuration might be blocked unless you adjust the policy or modify file labels.</p>
<h3 
id="modifying-file-labels">Modifying File Labels  <a class="headerlink float-right" href="#modifying-file-labels" title="Modifying File Labels"><i class="fas fa-link fa-xs"></i></a>
</h3><p>For example, if you plan to store your security policy files in <code>/etc/security_policies</code> - you should change the default SELinux file context for this directory:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63c53350&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1f63c53350">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">semanage fcontext -a -t nap-compiler_conf_t /etc/security_policies
</span></span><span class="line"><span class="cl">restorecon -Rv /etc/security_policies</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">semanage fcontext -a -t nap-compiler_conf_t /etc/security_policies
</span></span><span class="line"><span class="cl">restorecon -Rv /etc/security_policies</span></span></code></pre></div>
</div><h3 
id="syslog-to-custom-port">Syslog to Custom Port  <a class="headerlink float-right" href="#syslog-to-custom-port" title="Syslog to Custom Port"><i class="fas fa-link fa-xs"></i></a>
</h3><p>If you want to send logs to some unreserved port, you can use <code>semanage</code> to add the desired port (here, 35514) to the syslogd_port_t type:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63cb7cb0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63cb7cb0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">semanage port -a -t syslogd_port_t -p tcp <span class="m">35514</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">semanage port -a -t syslogd_port_t -p tcp <span class="m">35514</span></span></span></code></pre></div>
</div><p>Review the syslog ports by entering the following command:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1f63cee3c8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1f63cee3c8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">semanage port -l <span class="p">|</span> grep syslog</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">semanage port -l <span class="p">|</span> grep syslog</span></span></code></pre></div>
</div><p>If there are additional problems, refer to the <a href="http://localhost:1313/nginx-app-protect-waf/v4/troubleshooting-guide/troubleshooting/#selinux">Troubleshooting Guide</a>.</p>

        
        

        <hr>
  
        
        <div class="last-modified">
          
<div>
    <a href="https://github.com/nginx/documentation//tree/main/content/nap-waf/v4/admin-guide/install.md" class="" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View source</a>
  </div>
  <div>
    <a href="https://github.com/nginx/documentation//edit/main/content/nap-waf/v4/admin-guide/install.md" class="" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  </div>
  <div>
    <a href="https://github.com/nginx/documentation//issues/new?title=NGINX%20App%20Protect%20WAF%20Administration%20Guide&amp;template=2-bug_report.md" class="" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create a new issue</a>
  </div>



        </div>
        

        
         
<script type='text/javascript'> 
    (function(){var g=function(e,h,f,g){ 
        this.get=function(a){
            for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){
                for(var d=c[b];" "==d.charAt(0);)
                    d=d.substring(1,d.length);
                    if(0==d.indexOf(a))
                        return d.substring(a.length,d.length)
            }
            return null
        }; 
        
        this.set=function(a,c){
            var b="",b=new Date;
            b.setTime(b.getTime()+6048E5);
            b="; expires="+b.toGMTString();
            document.cookie=a+"="+c+b+"; path=/; "
        }; 
        
        this.check=function(){
            var a=this.get(f);
            if(a)
                a=a.split(":");
            else if(100!=e)
                "v"==h&&(e=Math.random()>=e/100?0:100),
                a=[h,e,0],
                this.set(f,a.join(":"));
            else 
                return!0;
            var c=a[1];
            if(100==c)
                return!0;
            switch(a[0]){
                case "v":
                    return!1;
                case "r":
                    return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c
            }
            return!0
        }; 

        this.go=function(){
            if(this.check()){
                var a=document.createElement("script");
                a.type="text/javascript";
                a.src=g;
                document.body&&document.body.appendChild(a)
            }
        };

        this.start=function(){
            var t=this;
            "complete"!==document.readyState?window.addEventListener ?
                window.addEventListener("load",function(){t.go()},!1) : 
                window.attachEvent&&window.attachEvent("onload",function(){t.go()}):t.go()};
    }; 

    try{
        const project_id = window.location.hostname.includes("staging") ? "QSI_S_ZN_2YG73ads2zp5bN0" : "QSI_S_ZN_2QSTn2r41YlXrYk";
        const endpoint = window.location.hostname.includes("staging") ? "https://zn2yg73ads2zp5bn0-f5.siteintercept.qualtrics.com/SIE/?Q_ZID=ZN_2YG73ads2zp5bN0" : "https://zn2qstn2r41ylxryk-f5.siteintercept.qualtrics.com/SIE/?Q_ZID=ZN_2QSTn2r41YlXrYk";
        (new g(100,"r", project_id, endpoint)).start()
    }
    catch(i){}})();

    document.addEventListener("DOMContentLoaded", function () {
        document.querySelector(".qualtrics-feedback").id = window.location.hostname.includes("staging") ? "ZN_2YG73ads2zp5bN0" : "ZN_2QSTn2r41YlXrYk"
    });
</script>
<hr>
<div style="height: 60px;"></div>
<div class="qualtrics-feedback" id='ZN_2QSTn2r41YlXrYk'></div>


        

	
<div class="container flex">
	<ul class="next-prev-icon">

		

		
			<li style="flex:1; text-align: right; white-space: nowrap;"><a href="http://localhost:1313/nginx-app-protect-waf/v4/admin-guide/install-nms/" class="" title="Next -- Using NGINX App Protect WAF with NGINX Management Suite"><svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.622 1.5L46.06 22.94C46.1993 23.0791 46.3099 23.2444 46.3853 23.4262C46.4607 23.6081 46.4995 23.8031 46.4995 24C46.4995 24.1969 46.4607 24.3919 46.3853 24.5738C46.3099 24.7556 46.1993 24.9209 46.06 25.06L24.622 46.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2.122 1.5L23.56 22.94C23.6993 23.0791 23.8099 23.2444 23.8853 23.4262C23.9607 23.6081 23.9995 23.8031 23.9995 24C23.9995 24.1969 23.9607 24.3919 23.8853 24.5738C23.8099 24.7556 23.6993 24.9209 23.56 25.06L2.122 46.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a></li>
		
		</ul>
	</div>

        </main>
        
          
            <div id="toc" class="col-md-3 d-none d-xl-block d-print-none nginx-toc align-top">
            <nav class="bd-links" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <h3 class="bd-toc-link">What's on This Page</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a>
      <ul>
        <li><a href="#using-nginx-app-protect-with-nginx-instance-manager">Using NGINX App Protect with NGINX Instance Manager</a></li>
      </ul>
    </li>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#storage-io-performance">Storage I/O Performance</a></li>
    <li><a href="#platform-security-considerations">Platform Security Considerations</a></li>
    <li><a href="#user-permissions">User Permissions</a></li>
    <li><a href="#alpine-installation">Alpine Installation</a></li>
    <li><a href="#amazon-linux-installation">Amazon Linux Installation</a></li>
    <li><a href="#debian-installation">Debian Installation</a></li>
    <li><a href="#oracle-linux--rhel-81-installation">Oracle Linux / RHEL 8.1+ Installation</a></li>
    <li><a href="#rhel-9-installation">RHEL 9+ Installation</a></li>
    <li><a href="#ubuntu-installation">Ubuntu Installation</a></li>
    <li><a href="#docker-deployments">Docker Deployments</a>
      <ul>
        <li><a href="#common-instructions">Common instructions</a></li>
        <li><a href="#alpine-dockerfile-example">Alpine Dockerfile example</a></li>
        <li><a href="#amazon-linux-dockerfile-example">Amazon Linux Dockerfile example</a></li>
        <li><a href="#debian-dockerfile-example">Debian Dockerfile example</a></li>
        <li><a href="#rhel-ubi8-dockerfile-example">RHEL UBI8 Dockerfile example</a></li>
        <li><a href="#rhel-ubi9-dockerfile-example">RHEL UBI9 Dockerfile example</a></li>
        <li><a href="#oracle-linux-dockerfile-example">Oracle Linux Dockerfile example</a></li>
        <li><a href="#ubuntu-dockerfile-example">Ubuntu Dockerfile example</a></li>
      </ul>
    </li>
    <li><a href="#converter-tool-docker-image">Converter Tool Docker Image</a>
      <ul>
        <li><a href="#converter-docker-deployment-instructions">Converter Docker Deployment Instructions</a></li>
        <li><a href="#rhel-ubi7-converter-docker-deployment-example">RHEL UBI7 Converter Docker Deployment Example</a></li>
        <li><a href="#rhel-ubi8-converter-docker-deployment-example">RHEL UBI8 Converter Docker Deployment Example</a></li>
        <li><a href="#rhel-ubi9-converter-docker-deployment-example">RHEL UBI9 Converter Docker Deployment Example</a></li>
        <li><a href="#oracle-linux-8-converter-docker-deployment-example">Oracle Linux 8 Converter Docker Deployment Example</a></li>
        <li><a href="#amazon-linux-2-converter-docker-deployment-example">Amazon Linux 2 Converter Docker Deployment Example</a></li>
        <li><a href="#debian-11--debian-12-converter-docker-deployment-example">Debian 11 / Debian 12 Converter Docker Deployment Example</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204--ubuntu-2404-converter-docker-deployment-example">Ubuntu 20.04 / Ubuntu 22.04 / Ubuntu 24.04 Converter Docker Deployment Example</a></li>
        <li><a href="#alpine-316--alpine-317--alpine-319-converter-docker-deployment-example">Alpine 3.16 / Alpine 3.17 / Alpine 3.19 Converter Docker Deployment Example</a></li>
      </ul>
    </li>
    <li><a href="#offline-installation">Offline Installation</a>
      <ul>
        <li><a href="#example-deployment-for-rhel">Example Deployment for RHEL</a></li>
        <li><a href="#example-deployment-for-debianubuntu">Example Deployment for Debian/Ubuntu</a></li>
      </ul>
    </li>
    <li><a href="#post-installation-checks">Post-Installation Checks</a></li>
    <li><a href="#attack-signatures-dependency-change-in-nginx-app-protect-waf">Attack Signatures Dependency Change in NGINX App Protect WAF</a>
      <ul>
        <li><a href="#attack-signatures-package">Attack Signatures Package</a></li>
      </ul>
    </li>
    <li><a href="#updating-app-protect-attack-signatures">Updating App Protect Attack Signatures</a>
      <ul>
        <li><a href="#installing-attack-signature-update">Installing Attack Signature Update</a></li>
        <li><a href="#rhel-81--oracle-linux-81">RHEL 8.1+ / Oracle Linux 8.1+</a></li>
        <li><a href="#rhel-9">RHEL 9+</a></li>
        <li><a href="#debian-11--debian-12">Debian 11 / Debian 12</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204">Ubuntu 20.04 / Ubuntu 22.04</a></li>
        <li><a href="#alpine-319">Alpine 3.19</a></li>
        <li><a href="#attack-signatures-when-upgrading-nginx-app-protect-waf">Attack Signatures When Upgrading NGINX App Protect WAF</a></li>
        <li><a href="#threat-campaigns-dependency-change-in-nginx-app-protect-waf">Threat Campaigns Dependency Change in NGINX App Protect WAF</a></li>
        <li><a href="#installing-threat-campaigns-update">Installing Threat Campaigns Update</a></li>
      </ul>
    </li>
    <li><a href="#updating-app-protect-threat-campaigns">Updating App Protect Threat Campaigns</a>
      <ul>
        <li><a href="#rhel-81--oracle-linux-81-1">RHEL 8.1+ / Oracle Linux 8.1+</a></li>
        <li><a href="#rhel-9-1">RHEL 9+</a></li>
        <li><a href="#alpine-316--alpine-317--alpine-319">Alpine 3.16 / Alpine 3.17 / Alpine 3.19</a></li>
        <li><a href="#debian-11--debian-12-1">Debian 11 / Debian 12</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204-1">Ubuntu 20.04 / Ubuntu 22.04</a></li>
      </ul>
    </li>
    <li><a href="#updating-app-protect-bot-signatures">Updating App Protect Bot Signatures</a>
      <ul>
        <li><a href="#rhel-81--oracle-linux-81-2">RHEL 8.1+ / Oracle Linux 8.1+</a></li>
        <li><a href="#rhel-9-2">RHEL 9+</a></li>
        <li><a href="#alpine-316--alpine-317--alpine-319-1">Alpine 3.16 / Alpine 3.17 / Alpine 3.19</a></li>
        <li><a href="#debian-11--debian-12-2">Debian 11 / Debian 12</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204-2">Ubuntu 20.04 / Ubuntu 22.04</a></li>
      </ul>
    </li>
    <li><a href="#upgrading-app-protect">Upgrading App Protect</a></li>
    <li><a href="#uninstall-app-protect">Uninstall App Protect</a>
      <ul>
        <li><a href="#rhel-81--oracle-linux-81--rhel-9">RHEL 8.1+ / Oracle Linux 8.1+ / RHEL 9+</a></li>
        <li><a href="#debian-11--debian-12--ubuntu-2004--ubuntu-2204--ubuntu-2404">Debian 11 / Debian 12 / Ubuntu 20.04 / Ubuntu 22.04 / Ubuntu 24.04</a></li>
        <li><a href="#alpine-316--alpine-317--alpine-319-2">Alpine 3.16 / Alpine 3.17 / Alpine 3.19</a></li>
      </ul>
    </li>
    <li><a href="#upgrading-app-protect-to-a-specific-version">Upgrading App Protect to a Specific Version</a>
      <ul>
        <li><a href="#rhel-81--oracle-linux-81--rhel-9-1">RHEL 8.1+ / Oracle Linux 8.1+ / RHEL 9+</a></li>
        <li><a href="#debian-11--debian-12-3">Debian 11 / Debian 12</a></li>
        <li><a href="#ubuntu-2004--ubuntu-2204-3">Ubuntu 20.04 / Ubuntu 22.04</a></li>
      </ul>
    </li>
    <li><a href="#upgrading-app-protect-to-the-latest-version">Upgrading App Protect to the latest version</a>
      <ul>
        <li><a href="#rhel-81--rhel-9--oracle-linux-81">RHEL 8.1+ / RHEL 9+ / Oracle Linux 8.1+</a></li>
        <li><a href="#debian-11--debian-12--ubuntu-2004--ubuntu-2204">Debian 11 / Debian 12 / Ubuntu 20.04 / Ubuntu 22.04</a></li>
      </ul>
    </li>
    <li><a href="#selinux-configuration">SELinux Configuration</a>
      <ul>
        <li><a href="#modifying-file-labels">Modifying File Labels</a></li>
        <li><a href="#syslog-to-custom-port">Syslog to Custom Port</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</nav>
            </div>
          
        
        
      </div>
    </section>
  </section>
</div>




      </div>
  </section>

    <footer id="footer">
      
      <footer id="footer">
  <div class="container-fluid">
    <div class="row align-items-center">
      <div class="col-md-6 d-md-flex">
        <img class="nginx-logo-footer" src="http://localhost:1313/images/icons/NGINX-Part-of-F5-horiz-all-white-525x208@2x.png"/>
      </div>
    </div>

    
    <div class="row d-print-none d-none d-md-flex">
      <div class="col-md-3 d-none d-md-block">
        <span class="footer-head">Company</span>
        <ul class="footer-text">
          <li>
            <a
              href="https://www.f5.com/go/product/welcome-to-nginx"
              target="_blank"
              alt="Select to learn about F5 NGINX"
              >About F5 NGINX</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/company/events"
              target="_blank"
              alt="Select to learn about F5 events"
              >Events</a
            >
          </li>
        </ul>
        <br />
        <span class="footer-head">Resources</span>
        <ul class="footer-text">
          <li>
            <a
              href="https://www.f5.com/company/blog/nginx"
              target="_blank"
              alt="Select to visit the F5 NGINX blog"
              >Blog</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/go/faq/nginx-faq"
              target="_blank"
              alt="Select to visit the F5 NGINX frequently asked questions page"
              >FAQ</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/services"
              target="_blank"
              alt="Select to learn about F5 NGINX Support"
              >Professional Services</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/learn/training"
              target="_blank"
              alt="Select to learn about F5 training offerings"
              >Training</a
            >
          </li>
        </ul>
      </div>

      <div class="col-md-3 d-none d-md-block">
        <span class="footer-head">Products</span>
        <ul class="footer-text">
          <li>
            <a
              title="F5 NGINX One"
              aria-label="F5 NGINX One"
              href="https://www.f5.com/products/nginx/one"
              >F5 NGINX One</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Plus"
              aria-label="F5 NGINX Plus"
              href="https://www.f5.com/products/nginx/nginx-plus"
              >F5 NGINX Plus</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX App Protect"
              aria-label="F5 NGINX App Protect"
              href="https://www.f5.com/products/nginx/nginx-app-protect"
              >F5 NGINX App Protect</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Instance Manager"
              aria-label="F5 NGINX Instance Manager"
              href="https://www.f5.com/products/nginx/instance-manager"
              >F5 NGINX Instance Manager</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Ingress Controller"
              aria-label="F5 NGINX Ingress Controller"
              href="https://www.f5.com/products/nginx/nginx-ingress-controller"
              >F5 NGINX Ingress Controller</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Gateway Fabric"
              aria-label="F5 NGINX Gateway Fabric"
              href="https://www.f5.com/products/nginx/nginx-gateway-fabric"
              >F5 NGINX Gateway Fabric</a
            >
          </li>
          <li>
            <a
              title="F5 NGINXaaS for Azure"
              aria-label="F5 NGINXaaS for Azure"
              href="https://www.f5.com/products/nginx/f5-nginxaas-for-azure"
              >F5 NGINXaaS for Azure</a
            >
          </li>
        </ul>
      </div>

      <div class="col-md-3 d-none d-md-block">
        <span class="footer-head">NGINX on GitHub</span>
        <ul class="footer-text">
          <li>
            <a
              title="NGINX Open Source"
              aria-label="NGINX Open Source"
              href="https://github.com/nginx/nginx"
              ><span class="inner">NGINX Open Source</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Unit"
              aria-label="NGINX Unit"
              href="https://github.com/nginx/unit"
              ><span class="inner">NGINX Unit</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Amplify"
              aria-label="NGINX Amplify"
              href="https://github.com/nginxinc/nginx-amplify-agent"
              ><span class="inner">NGINX Amplify</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Agent"
              aria-label="NGINX Agent"
              href="https://github.com/nginx/Agent"
              ><span class="inner">NGINX Agent</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Kubernetes Ingress Controller"
              aria-label="NGINX Kubernetes Ingress Controller"
              href="https://github.com/nginxinc/kubernetes-ingress"
              ><span class="inner">NGINX Kubernetes Ingress Controller</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Gateway Fabric"
              aria-label="NGINX Gateway Fabric"
              href="https://github.com/nginxinc/nginx-gateway-fabric"
              ><span class="inner">NGINX Gateway Fabric</span></a
            >
          </li>
        </ul>
      </div>

      <div class="col-md-2 d-none d-md-block">
        <span class="footer-head">Social</span>
        <ul class="footer-social">
          <li>
            <a
              href="https://www.facebook.com/nginxinc"
              title="facebook"
              aria-label="facebook"
              target="_blank"
              rel="noreferrer"
              ><i class="fa-brands fa-facebook" aria-hidden="true"></i>
            </a>
          </li>
          <li>
            <a
              href="https://twitter.com/nginx"
              title="X"
              aria-label="x"
              target="_blank"
              rel="noreferrer"
              ><i class="fa-brands fa-x-twitter" aria-hidden="true"></i
            ></a>
          </li>
          <li>
            <a
              href="https://www.linkedin.com/company/nginx"
              title="linkedin"
              aria-label="linkedin"
              target="_blank"
              rel="noreferrer"
              ><i class="fa-brands fa-linkedin" aria-hidden="true"></i>
            </a>
          </li>
          <li>
            <a
              href="https://www.youtube.com/user/NginxInc"
              title="youtube"
              aria-label="youtube"
              target="_blank"
              rel="noreferrer"
              alt="NGINX Youtube Channel"
              ><i class="fa-brands fa-square-youtube" aria-hidden="true"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="site-info footer-text">
      <div class="text-center">
        <p>
          <a href="https://www.f5.com/"
            ><img class="f5-logo-footer" src="http://localhost:1313/images/icons/Logo_F5.svg" alt="F5 logo"></a
          >
          2025 F5, Inc. All rights reserved.
        </p>
        <p>
          <a
            href="https://www.f5.com/company/policies/trademarks"
            rel="noopener"
            target="_blank"
            >Trademarks</a
          >
          <a
            href="https://www.f5.com/company/policies"
            rel="noopener"
            target="_blank"
            >Policies</a
          >
          <a href="https://docs.nginx.com/ossc">Open Source Components</a>
          <a
            href="https://www.f5.com/company/policies/privacy-notice"
            rel="noopener"
            target="_blank"
            >Privacy</a
          >
          <a
            href="https://www.f5.com/company/policies/F5-California-privacy-summary"
            rel="noopener"
            target="_blank"
            >California Privacy</a
          >
          <a
            href="https://www.f5.com/company/policies/privacy-notice#no-sell"
            rel="noopener"
            target="_blank"
            >Do Not Sell My Personal Information</a
          >
          <span id="teconsent-v1"></span>
        </p>
      </div>
    </div>
    
  </div>
  
</footer>

      
    </footer>

    <footer data-mf="true" id="footer-v2" style="display:none;">
      
      <div class="footer-layout">
    <div class="footer-f5-trademark">
        <img class="f5-logo-footer" src="http://localhost:1313/images/icons/Logo_F5.svg" alt="F5 logo">
        <p>2025 F5, Inc. All rights reserved. NGINX is a registered trademark of F5, Inc.</p>
    </div>
    <div class="footer-useful-links">
        <a
            href="https://www.f5.com/company/policies/trademarks"
            rel="noopener"
            target="_blank"
            >Trademarks
        </a>
        <a
            href="https://www.f5.com/company/policies"
            rel="noopener"
            target="_blank"
            >Policies
        </a>
        <a
            href="https://www.f5.com/company/policies/privacy-notice"
            rel="noopener"
            target="_blank"
            >Privacy
        </a>
        <a
            href="https://www.f5.com/company/policies/F5-California-privacy-summary"
            rel="noopener"
            target="_blank"
            >California Privacy
        </a>
        <a
            href="https://www.f5.com/company/policies/privacy-notice#no-sell"
            rel="noopener"
            target="_blank"
            >Do Not Sell My Personal Information
        </a>
        <span id="teconsent-v2"></span>
    </div>
</div>

      
    </footer>
  
<script src="/js/jquery-3-6-4.min.js" type="text/javascript" integrity=""></script>


<script src="/js/kube.min.a3a07cceb64989e2f0bf41653ab4d8346ba4312270eb5cc80d6afad3bf30a0ca9768aaa2559cb582e663332c541edab6a4068ef2e88b739fa425e2e870eb0aff.js" type="text/javascript" integrity="sha512-o6B8zrZJieLwv0FlOrTYNGukMSJw61zIDWr6078woMqXaKqiVZy1guZjMyxUHtq2pAaO8uiLc5&#43;kJeLocOsK/w=="></script>



<script src="/js/bootstrap.bundle.min.c15ed88f56a52190ea645094409cbce5537eaaf108972f777c840037b8aa0c508f12e70b09e345cf8af7e450a8f6ce96ae974340f8bcd316e58d707c063b6f72.js" type="text/javascript"
  integrity="sha512-wV7Yj1alIZDqZFCUQJy85VN&#43;qvEIly93fIQAN7iqDFCPEucLCeNFz4r35FCo9s6WrpdDQPi80xbljXB8Bjtvcg=="></script>



<script src="/js/code-copy.bb21b72280613039f1fabb11acc6a901c07caaee454933031066fbda6b5406fd31077a80ec913ba32261224d138bcbb4a34d27c51efae571c68d59282943b9a4.js" type="text/javascript"></script>



<script src="/js/code-copy-v2.71bcaee23ab00cb45dc944f321264e21d25bc1ec1ae76f9596286cb408ea5654b4ee016e7914cc2554b237114eeb467d39df18735311f2d28480b3ccd2feb4ad.js" type="text/javascript"></script>





<script
  type="module"
  src="https://static.cloud.coveo.com/atomic/v3.19.0/atomic.esm.js"
  integrity="sha512-VA9k6iDWhwxl8bwKUYPD63l93lGX7daV60k3yFxEt9EuEq4iWvsu5COq1mZ8OXKl0KCOFlUSDXS32Cy+YwbufQ=="
  crossorigin="anonymous">
</script>


<script class="coveo-script" src="https://static.cloud.coveo.com/searchui/v2.10104/0/js/CoveoJsSearch.Lazy.min.js"
  integrity="sha512-HxdDBIp5snbqtu1TPkBnXLKEvN9IPz3PeZW8zT9KfsflV9Ck822XDroDlpVbfCfXeiu8C0RDVn0fdu7aGy/H1g=="
  crossorigin="anonymous"></script>

<script src="https://static.cloud.coveo.com/searchui/v2.10104/0/js/templates/templates.js"
  integrity="sha512-CR0Yk/LIwgh1MsKqjecDp/r6F9ipKc6gA+4+E1pplT3N3r1pk+la/HaqyDiKtjOFwrwIIbIYBFrUJgPql93QHw=="
  crossorigin="anonymous"></script>






<script src="/js/coveo.min.4acfd205930e2d31230100f345e0463332eb3e3af1b4aa9a6e3131b0b2bac53566ae4d18b390066fce94c0c75d39b5e121d1291f81e5accc1a82d93da9f11b7f.js" integrity="sha512-Ss/SBZMOLTEjAQDzReBGMzLrPjrxtKqabjExsLK6xTVmrk0Ys5AGb86UwMddObXhIdEpH4HlrMwagtk9qfEbfw=="
  type="text/javascript"></script>


















<script src="/js/sidebar.min.6fed0180a23d01103c68ffb054a183fba5e7ba673de8c56d85857af964dcc0c11623ee09f6185207a373127cb2547ff9247ae3516ed47c67e1b58dbe71e9d576.js" type="text/javascript" integrity="sha512-b&#43;0BgKI9ARA8aP&#43;wVKGD&#43;6Xnumc96MVthYV6&#43;WTcwMEWI&#43;4J9hhSB6NzEnyyVH/5JHrjUW7UfGfhtY2&#43;cenVdg=="></script>
  


<script src="/js/site-dropdown.min.3bb49b6f7d25bcd4a2b008525bb8538d84237348bf618b40970ff6eca87119d68c326ca7ba04854ad102be36495fe1d70f1cb239916555b67dd17683dc283333.js" type="text/javascript" integrity="sha512-O7Sbb30lvNSisAhSW7hTjYQjc0i/YYtAlw/27KhxGdaMMmynugSFStECvjZJX&#43;HXDxyyOZFlVbZ90XaD3CgzMw=="></script>



<script src="/js/product-selector.min.b588249327fb12c7602fa08eb618560171f54e7348d6c1bacfdbf541f5e13023493f64f78fb6d4b9014892e5e4f0aaaee95b859bb37aa53bbe8c0e27e65167d1.js" type="text/javascript" integrity="sha512-tYgkkyf7EsdgL6COthhWAXH1TnNI1sG6z9v1QfXhMCNJP2T3j7bUuQFIkuXk8Kqu6VuFm7N6pTu&#43;jA4n5lFn0Q=="></script>



<script src="/js/sidebar-v2.min.3f906631e696b2c88883bfcfc62371165359130cfd118ceb49893ae0d8760dc38177ee3bb94a61dee45023115de8445f0b9fe48f933618ef7ba7b3180a05adbd.js" type="text/javascript" integrity="sha512-P5BmMeaWssiIg7/PxiNxFlNZEwz9EYzrSYk64Nh2DcOBd&#43;47uUph3uRQIxFd6ERfC5/kj5M2GO97p7MYCgWtvQ=="></script> 
  <div id="consent_blackbar"></div>
</body>
</html>


