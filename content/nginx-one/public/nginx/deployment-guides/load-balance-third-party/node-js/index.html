<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>  
  <style>
    body {
       
      visibility: hidden;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
  </style>
  
  <noscript>
    <style>
       
      body {
        visibility: visible;
      }
    </style>
  </noscript>
  


  <script>

    const setTheme = (isNewTheme) => {
      localStorage.setItem("useNewTheme", `${isNewTheme}`);
      
      const v1cssIds = [
        "cssFA1",
        "cssFA2",
        "cssFA3",
        "cssBootstrap",
        "css1",
        "css2",
        "css3",
        "css4",
        "css5",
        "css6",
      ];

      v1cssIds.forEach((cssId) => {
        const element = document.getElementById(cssId);
        if (element !== null) {
          element.disabled = isNewTheme;
        }
      });

      const v2cssIds = ["css7", "css9"];
      v2cssIds.forEach((cssId) => {
        const element = document.getElementById(cssId);
        if (element !== null) {
          element.disabled = !isNewTheme;
        }
      });

      
      const v1ElementIds = ["sidebar", "footer", "toc", "api", "search-v1", "breadcrumb-v1", "list-v1"]

      v1ElementIds.forEach((elementId) => {
        const element = document.getElementById(elementId);
        if (element !== null) {
          element.style.display = isNewTheme ? "none" : "";
        }

        const trustarc = document.getElementById("teconsent-v1");
        if (trustarc) {
          trustarc.id = isNewTheme ? "teconsent-v1" : "teconsent";
        }
      });

      document.querySelectorAll(".table-v1").forEach((table) => {
        table.style.display = isNewTheme ? "none" : "";
      });

      const notMfElements = ['[data-mf="false"]'];
      notMfElements.forEach((elementId) => {
        document.querySelectorAll(elementId).forEach((element) => {
          element.style.display = isNewTheme ? "none" : "";
        });
      })

      const mfElements = ['[data-mf="true"]'];
      mfElements.forEach((elementId) => {
        document.querySelectorAll(elementId).forEach((element) => {
          element.style.display = isNewTheme ? "" : "none";

          const trustarc = document.getElementById("teconsent-v2");
          if (trustarc) {
            trustarc.id = isNewTheme ? "teconsent" : "teconsent-v2";
          }
        });
      });

      document.getElementById("body").style.visibility = "visible";
    };

    const toggleTheme = () => {
      setTheme(!(localStorage.getItem("useNewTheme") === "true"));
    };

    
    const mf = toggleTheme;
    const useNewTheme = toggleTheme;

    document.addEventListener("DOMContentLoaded", () => {
      setTheme(localStorage.getItem("useNewTheme") === "true");
    });

    function gameCode(callback) {
      let kkeys = [];
      
      const code = "38,38,40,40,37,39,37,39,66,65";
      return (event) => {
        kkeys.push(event.keyCode);
        if (kkeys.toString().indexOf(code) >= 0) {
          callback(event);
          kkeys = [];
        }
      };
    }
    const handler = gameCode(() => {
      mf();
    });
    window.addEventListener("keydown", handler);

  </script>

  

  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Load Balancing Node.js Application Servers with NGINX Open Source and NGINX Plus | DEV -- docs-nginx-com</title>


<meta name="description" content="Load balance Node.js application servers with NGINX Open Source or the advanced features in F5 NGINX Plus, following our step-by-step setup instructions.">





<link rel="canonical" href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/node-js/">







<meta property="article:publisher" content="https://www.facebook.com/nginxinc" />
<meta property="og:image" content="http://localhost:1313/images/icons/NGINX-Docs-new-docs-dark-1200x630.png" />
<meta property="og:image:width" content="500" />
<meta property="og:image:height" content="300" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="Load balance Node.js application servers with NGINX Open Source or the advanced features in F5 NGINX Plus, following our step-by-step setup instructions." />
<meta name="twitter:title" content="Load Balancing Node.js Application Servers with NGINX Open Source and NGINX Plus" />
<meta name="twitter:site" content="@nginx" />
<meta name="twitter:image" content="http://localhost:1313/images/icons/NGINX-Docs-new-docs-dark-1200x630.png" />
<meta name="twitter:creator" content="@nginx" />

<meta http-equiv="last-modified" content="27/05/2025" />




<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'
    https://consent.trustarc.com/ https://mktg.tags.f5.com/basic/prod/utag.sync.js https://static.cloud.coveo.com/ https://*.f5.com/
    https://*.netlify.app https://gist.github.com
    https://tag.demandbase.com/pscSDsz4.min.js
    https://munchkin.brightfunnel.com/js/build/bf-munchkin.min.js
    https://www.googletagmanager.com/gtm.js
    https://www.google-analytics.com/
    https://www.google-analytics.com/analytics.js
    https://www.google-analytics.com/plugins/ua/linkid.js
    https://cdn.bizible.com/scripts/bizible.js
    https://cdn.bizible.com/xdc.js
    https://f5networksglobalprod.122.2o7.net/
    https://f5networksnginxdocs.122.2o7.net/
    https://*.siteintercept.qualtrics.com/SIE/?Q_ZID=*
    https://siteintercept.qualtrics.com/
    ;
    worker-src 'self' blob:">



<meta property="environment" type="development" />
<meta property="buildtype" type="webdocs" />
<meta property="isServer" type="true" />


<meta name="product" content="DEV -- docs-nginx-com">
<meta name="version" content="">
<meta name="doc_type" content="Manual">
  
  <link rel="shortcut icon" type="image/x-icon" href="http://localhost:1313/images/favicon-48x48.ico">

  
  










<link href="/css/v2/style.css" integrity="" rel="stylesheet" type="text/css" id="css7"
  disabled>


<link href="/css/inter/inter.987d1be34797653eabce3627efb116c263d4045fd5badfe003ff283c5a5da435d83a3fad6bfe524e3ce3cf8a41168a30e7aa42507961257eeb275024def0f9b9.css" integrity="sha512-mH0b40eXZT6rzjYn77EWwmPUBF/Vut/gA/8oPFpdpDXYOj&#43;ta/5STjzjz4pBFoow56pCUHlhJX7rJ1Ak3vD5uQ==" rel="stylesheet" type="text/css"
  id="cssInter">


<link href="/css/v2/highlight.min.9ef7c7ad221175216abc8a5827f967bcd7c0e035bfa91180acd26a2c36d54242ae5f485986c260d70b1bbdf225ad76cdbba3179afa7e4335282cc3080a17e337.css" rel="stylesheet" type="text/css" id="css9">





<link href="/fontawesome/css/all.min.4a71f958af9b67180f1ece38b96217f8b2c9009f7fd8f90f299e508808fa4daf3ac3e7ec6f64e47267d1c955f7a419cc15c57ba103c9925f507af4825abdd6e8.css" integrity="sha512-SnH5WK&#43;bZxgPHs44uWIX&#43;LLJAJ9/2PkPKZ5QiAj6Ta86w&#43;fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" rel="stylesheet" type="text/css"
  id="cssFA1">


<link href="/fontawesome/css/v4-font-face.min.5870089ba06cf03e9721f87919eaf15c961a65e071845949ed2da58c5bfbd18a714c5dab2c155f0455ebcd2f45bfd598a5e47ae19976e7aa3a51e22914eac1b6.css" integrity="sha512-WHAIm6Bs8D6XIfh5GerxXJYaZeBxhFlJ7S2ljFv70YpxTF2rLBVfBFXrzS9Fv9WYpeR64Zl256o6UeIpFOrBtg==" rel="stylesheet" type="text/css"
  id="cssFA2">


<link href="/fontawesome/css/v5-font-face.min.81bdf1c9f8ff16b1eda613d52d868a059f16c8c6045c3d7e0a0b771622a11666cdd94b8ea62b5edb0d4b826c3a3737ec3663065fe05b56b6b871e57de73f556b.css" integrity="sha512-gb3xyfj/FrHtphPVLYaKBZ8WyMYEXD1&#43;Cgt3FiKhFmbN2UuOpite2w1Lgmw6NzfsNmMGX&#43;BbVra4ceV95z9Vaw==" rel="stylesheet" type="text/css"
  id="cssFA3">



<link href="/css/bootstrap.min.3f9320327d6304dd356ac060534cfad10938431897a3cebec2515a84aaec41fdfb73d72ba39d7b5b35523cf575b432b3864bb6889d855602faef01b4dd21a734.css" integrity="sha512-P5MgMn1jBN01asBgU0z60Qk4QxiXo86&#43;wlFahKrsQf37c9cro517WzVSPPV1tDKzhku2iJ2FVgL67wG03SGnNA==" rel="stylesheet"
  type="text/css" id="cssBootstrap">



<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.10104/0/css/CoveoFullSearch.min.css"
  integrity="sha512-9/A9yVCU4GS6/iIwTRJKnan4Hf8gDKj3anwItN9QCsU8SixaT5xkjjWsZ/iq0TWaizhtqOLacadXJfxHlwYCcA=="
  crossorigin="anonymous" />


<link
  rel="stylesheet"
  href="https://static.cloud.coveo.com/atomic/v3.19.0/themes/coveo.css"
  integrity="sha512-m2BufPi8Tc6H2jcQfDj/PIl5H57C9jeqhbDFgFXKTtOhoC4S7ULXmx74FseZ8WXpfdT9uyccMHDBJDrIZlrUUQ=="
  crossorigin="anonymous"/>


<link href="/css/docs-nginx-com/nginx-site-header.min.80b10ed49ecfad93607ee771acca88d13dc958e6eecc642af3aa2b170c86b8dcce442e7b86c3e5298c95b0ab2b053a71074c2f15c28266c3a2c502275415b3a7.css" rel="stylesheet" type="text/css" id="css1">


<link href="/css/docs-nginx-com/style.min.2cd4748c438c49d012a5fdc6b98770223c4875fe0f89517b17423b6a5328af4d93d9d772207bfc51d9449781281e1eb8707dcc2f7467e6e24330c9b8c7c5f734.css" rel="stylesheet" type="text/css" id="css2">


<link href="/css/bootstrap-docs.min.8a70c94c72e3783cecd631bc1705c7843b2fdef99f1549f0bf7f774a4083173ee25974413a8206c2340c0fee9bb7a07acd41d41c78ae2280c96a2ce0faca2847.css" rel="stylesheet" type="text/css" id="css3">



<link href="/css/coveo.min.fce7d4df31de99e4f86510a90915820f236b8dcd02be030b27529af7ff10189f807c78cedacb91afa9d07f310a172c6046b1921832f199b9158898a7f74fa117.css" rel="stylesheet" type="text/css" id="css6">



<link href="/css/f5-hugo.min.42feae8b135e9380a66db9c3cb2803221888524a29f41cbc55790b5cb5a309ac7e6dd80e70ed0260370fd93c04b7aa8a5c3d6aca0964804341fad51cfcec963f.css" rel="stylesheet" type="text/css" id="css4">


<link href="/css/inline-overrides.min.495e6889d9955581580c654bad961bb33af6344b283af7e9a34648c5e8d5f1fe90efb8aac33359c4178efd36cd7cb92c7c6458d4175caff9c284b14bd9d2b97a.css" rel="stylesheet" type="text/css" id="css8">





<link href="/css/highlight.min.fe5647c4b67f4b3fcf0ea60b483479d567ba1b05ee6e816439207edfa3d310dbee79536278c67d89c1db5da275bde962a10163da375f05bd19743e2a80e1ad02.css" rel="stylesheet" type="text/css" id="css5">
  
  
  
  
  
  
        
  <script async="async" src="https://consent.trustarc.com/notice?domain=f5.com&c=teconsent&js=nj&noticeType=bb&text=true&gtm=1" crossorigin=""></script>
  
  

<script src="https://mktg.tags.f5.com/basic/prod/utag.sync.js"></script> 


  
  
  
  
  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-K5HG9JT');</script>
  
  </head>
  
  <body id="body">
    
   
<script type="text/javascript"> 
    (function(a,b,c,d) { 
        a='//mktg.tags.f5.com/basic/prod/utag.js'; 
        b=document;c='script';d=b.createElement(c);d.src=a; 
        d.type='text/java'+c;d.async=true; 
        a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a)})(); 
</script> 
    
  
    <header>
      
<div class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar navbar-fixed-top">
  <div class="container-fluid flex-md-row flex-column header-container">
    <a class="navbar-brand mr-0 mr-md-2" href="/" aria-label="NGINX Docs">
      <img class="navbar-img" src="http://localhost:1313/images/icons/NGINX-Docs-horiz-white-type.svg" alt="NGINX Docs">
    </a>
    
      <div class="navbar navbar-nav">
        
        <div id="searchbox">
          
          <div class="CoveoSearchbox" data-placeholder='Search NGINX Docs...'></div>
        </div>
        <atomic-search-interface id="search-standalone-header" data-mf="true" style="display:none;">
          <atomic-search-box redirection-url="/search.html">
          </atomic-search-box>
        </atomic-search-interface>
      </div>
    
    
    
    
    <ul class="navbar navbar-nav">
        <li class="nav-item-explore active">
          <button id="navbar-sites-button" class="button navbar-button">
              F5 Sites
              <i id="navbar-sites-button-icon" class="link-chevron-icon fa-solid fa-chevron-down"></i>
          </button>
          <div class="dropdown-content" id="dropdown-content">
            <ul>
              
                <li>
                  <a href="https://community.f5.com/" target="_blank" >DevCentral</a>
                  <p>Connect &amp; learn in our hosted community</p>
                </li>
              
                <li>
                  <a href="https://my.f5.com/" target="_blank" >MyF5</a>
                  <p>Your key to everything F5, including support, registration keys, and subscriptions</p>
                </li>
              
                <li>
                  <a href="https://nginx.org/" target="_blank" >NGINX</a>
                  <p>Learn more about NGINX Open Source and read the community blog</p>
                </li>
              
            </ul>
          </div>
        </li>
    </ul>
  </div>
</div>


    </header>
  
    <section class="base-layout" data-testid="base-layout">
      <section id="breadcrumb-v1">
        
          
          <nav aria-label="breadcrumb" class="breadcrumb navbar">
    <div class="nav flex-md-row">
        <ol class="breadcrumb">
            
            
            
            
                
            
            
                
            
            
                
            
            
                
            
            
                
            
            
            
                <li><a href="/">Home</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx/">F5 NGINX Plus</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx/deployment-guides/">Deployment Guides</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx/deployment-guides/load-balance-third-party/">Load Balancing Third-Party Servers</a><i class="fas fa-chevron-right"></i></li>
                
            
                Load Balancing Node.js Application Servers with NGINX Open Source and NGINX Plus
        </ol>
    </div>
</nav>
  
          
        
      </section>
  
      <div class="main container-fluid min-page-height" data-menu-id="/nginx/deployment-guides/load-balance-third-party/node-js/">
        
<div class="docs-container row override-sidebar-collapse">
<div class="docs-container row override-sidebar-collapse">
  <nav id="sidebar" class="sidenav overflow-auto col-md-3 d-none d-xl-block d-print-none align-top">
    

<div id="sidebar-wrapper">
     <div id="sidebar" class="sidebar" aria-label="Sidebar navigation">
        <button id="sidebar-toggle-button" title="Toggle sidebar navigation" role="button" aria-controls="sidebar-content">
           <i class="fa fa-chevron-right sidebar-visible-collapsed"></i>
           <i class="fa fa-chevron-left sidebar-visible-expanded"></i>
        </button>
        <div id="sidebar-content">
            <h3>
                <a class="sidebar-title" href="http://localhost:1313/nginx/" alt="F5 NGINX Plus"><img
                        class="card-img-top" src="http://localhost:1313//images/icons/NGINX-Plus-product-icon-RGB.svg"
                        alt="F5 NGINX Plus">
                    F5 NGINX Plus</a>
            </h3>
            <ul>
            
            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx/admin-guide/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nginx--admin-guide" aria-controls="nginx--admin-guide">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Admin Guide</a>
                            </li>
                        </div>
                        <div id="nginx--admin-guide" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/installing-nginx/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--installing-nginx-and-nginx-plus">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Installing NGINX and NGINX Plus</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--installing-nginx-and-nginx-plus" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/installing-nginx/installing-nginx-plus/" href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-plus/">Installing NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/installing-nginx/installing-nginx-open-source/" href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-open-source/">Installing NGINX Open Source</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/installing-nginx/installing-nginx-plus-amazon-web-services/" href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-plus-amazon-web-services/">Installing NGINX Plus AMIs on Amazon EC2</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/installing-nginx/installing-nginx-plus-google-cloud-platform/" href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-plus-google-cloud-platform/">Install NGINX Plus on the Google Cloud Platform</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/installing-nginx/installing-nginx-plus-microsoft-azure/" href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-plus-microsoft-azure/">Installing NGINX Plus on Microsoft Azure</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/installing-nginx/installing-nginx-docker/" href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-docker/">Deploying NGINX and NGINX Plus with Docker</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/basic-functionality/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--basic-functionality">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Basic Functionality</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--basic-functionality" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/basic-functionality/runtime-control/" href="http://localhost:1313/nginx/admin-guide/basic-functionality/runtime-control/">Control NGINX Processes at Runtime</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/basic-functionality/managing-configuration-files/" href="http://localhost:1313/nginx/admin-guide/basic-functionality/managing-configuration-files/">Create NGINX Plus and NGINX Configuration Files</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/load-balancer/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--load-balancer">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Load Balancer</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--load-balancer" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/load-balancer/http-load-balancer/" href="http://localhost:1313/nginx/admin-guide/load-balancer/http-load-balancer/">HTTP Load Balancing</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/load-balancer/tcp-udp-load-balancer/" href="http://localhost:1313/nginx/admin-guide/load-balancer/tcp-udp-load-balancer/">TCP and UDP Load Balancing</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/load-balancer/http-health-check/" href="http://localhost:1313/nginx/admin-guide/load-balancer/http-health-check/">HTTP Health Checks</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/load-balancer/tcp-health-check/" href="http://localhost:1313/nginx/admin-guide/load-balancer/tcp-health-check/">TCP Health Checks</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/load-balancer/udp-health-check/" href="http://localhost:1313/nginx/admin-guide/load-balancer/udp-health-check/">UDP Health Checks</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/load-balancer/grpc-health-check/" href="http://localhost:1313/nginx/admin-guide/load-balancer/grpc-health-check/">gRPC Health Checks</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/load-balancer/dynamic-configuration-api/" href="http://localhost:1313/nginx/admin-guide/load-balancer/dynamic-configuration-api/">Dynamic Configuration of Upstreams with the NGINX Plus API</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/load-balancer/using-proxy-protocol/" href="http://localhost:1313/nginx/admin-guide/load-balancer/using-proxy-protocol/">Accepting the PROXY Protocol</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/content-cache/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--content-cache">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Content Cache</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--content-cache" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/content-cache/content-caching/" href="http://localhost:1313/nginx/admin-guide/content-cache/content-caching/">NGINX Content Caching</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/web-server/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--web-server">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Web Server</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--web-server" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/web-server/web-server/" href="http://localhost:1313/nginx/admin-guide/web-server/web-server/">Configuring NGINX and NGINX Plus as a Web Server</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/web-server/serving-static-content/" href="http://localhost:1313/nginx/admin-guide/web-server/serving-static-content/">Serve Static Content</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/web-server/reverse-proxy/" href="http://localhost:1313/nginx/admin-guide/web-server/reverse-proxy/">NGINX Reverse Proxy</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/web-server/compression/" href="http://localhost:1313/nginx/admin-guide/web-server/compression/">Compression and Decompression</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/web-server/app-gateway-uwsgi-django/" href="http://localhost:1313/nginx/admin-guide/web-server/app-gateway-uwsgi-django/">Using NGINX and NGINX Plus as an Application Gateway with uWSGI and Django</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/security-controls/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--security-controls">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Security Controls</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--security-controls" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/terminating-ssl-http/" href="http://localhost:1313/nginx/admin-guide/security-controls/terminating-ssl-http/">NGINX SSL Termination</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/terminating-ssl-tcp/" href="http://localhost:1313/nginx/admin-guide/security-controls/terminating-ssl-tcp/">SSL Termination for TCP Upstream Servers</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/configuring-http-basic-authentication/" href="http://localhost:1313/nginx/admin-guide/security-controls/configuring-http-basic-authentication/">Restricting Access with HTTP Basic Authentication</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/configuring-subrequest-authentication/" href="http://localhost:1313/nginx/admin-guide/security-controls/configuring-subrequest-authentication/">Authentication Based on Subrequest Result</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/configuring-jwt-authentication/" href="http://localhost:1313/nginx/admin-guide/security-controls/configuring-jwt-authentication/">Setting up JWT Authentication</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/configuring-oidc/" href="http://localhost:1313/nginx/admin-guide/security-controls/configuring-oidc/">Single Sign-On with OpenID Connect and Identity Providers</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/controlling-access-proxied-http/" href="http://localhost:1313/nginx/admin-guide/security-controls/controlling-access-proxied-http/">Limiting Access to Proxied HTTP Resources</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/controlling-access-proxied-tcp/" href="http://localhost:1313/nginx/admin-guide/security-controls/controlling-access-proxied-tcp/">Restricting Access to Proxied TCP Resources</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/controlling-access-by-geoip/" href="http://localhost:1313/nginx/admin-guide/security-controls/controlling-access-by-geoip/">Restricting Access by Geographical Location</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/securing-http-traffic-upstream/" href="http://localhost:1313/nginx/admin-guide/security-controls/securing-http-traffic-upstream/">Securing HTTP Traffic to Upstream Servers</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/securing-tcp-traffic-upstream/" href="http://localhost:1313/nginx/admin-guide/security-controls/securing-tcp-traffic-upstream/">Securing TCP Traffic to Upstream Servers</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/security-controls/denylisting-ip-addresses/" href="http://localhost:1313/nginx/admin-guide/security-controls/denylisting-ip-addresses/">Dynamic Denylisting of IP Addresses</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/monitoring/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--monitoring">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Monitoring</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--monitoring" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/monitoring/live-activity-monitoring/" href="http://localhost:1313/nginx/admin-guide/monitoring/live-activity-monitoring/">Live Activity Monitoring</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/monitoring/logging/" href="http://localhost:1313/nginx/admin-guide/monitoring/logging/">Configuring Logging</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/monitoring/debugging/" href="http://localhost:1313/nginx/admin-guide/monitoring/debugging/">Debugging NGINX</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/monitoring/diagnostic-package/" href="http://localhost:1313/nginx/admin-guide/monitoring/diagnostic-package/">NGINX Diagnostic Package</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/monitoring/new-relic-plugin/" href="http://localhost:1313/nginx/admin-guide/monitoring/new-relic-plugin/">Monitoring NGINX and NGINX Plus with the New Relic Plug-In</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/high-availability/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--high-availability">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>High Availability</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--high-availability" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/high-availability/ha-keepalived/" href="http://localhost:1313/nginx/admin-guide/high-availability/ha-keepalived/">High Availability Support for NGINX Plus in On-Premises Deployments</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/high-availability/ha-keepalived-nodes/" href="http://localhost:1313/nginx/admin-guide/high-availability/ha-keepalived-nodes/">Configuring Active-Active High Availability and Additional Passive Nodes with keepalived</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/high-availability/configuration-sharing/" href="http://localhost:1313/nginx/admin-guide/high-availability/configuration-sharing/">Synchronizing NGINX Configuration in a Cluster</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/high-availability/zone_sync/" href="http://localhost:1313/nginx/admin-guide/high-availability/zone_sync/">Runtime State Sharing in a Cluster</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/high-availability/zone_sync_details/" href="http://localhost:1313/nginx/admin-guide/high-availability/zone_sync_details/">How NGINX Plus Performs Zone Synchronization</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/dynamic-modules/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--dynamic-modules">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Dynamic Modules</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--dynamic-modules" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/dynamic-modules/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/dynamic-modules/">Dynamic Modules</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/brotli/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/brotli/">Brotli</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/cookie-flag/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/cookie-flag/">Cookie-Flag</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/encrypted-session/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/encrypted-session/">Encrypted-Session</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/fips/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/fips/">FIPS Status Check</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/geoip/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/geoip/">GeoIP</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/geoip2/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/geoip2/">GeoIP2</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/headers-more/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/headers-more/">Headers-More</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/http-substitutions-filter/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/http-substitutions-filter/">HTTP Substitutions Filter</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/image-filter/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/image-filter/">Image-Filter</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/lua/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/lua/">Lua</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/ndk/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/ndk/">NGINX Developer Kit</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/nginx-waf/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/nginx-waf/">NGINX ModSecurity WAF</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/nginscript/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/nginscript/">njs Scripting Language</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/opentelemetry/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/opentelemetry/">OpenTelemetry</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/opentracing/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/opentracing/">OpenTracing</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/perl/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/perl/">Perl</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/passenger-open-source/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/passenger-open-source/">Phusion Passenger Open Source</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/prometheus-njs/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/prometheus-njs/">Prometheus-njs</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/rtmp/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/rtmp/">RTMP</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/set-misc/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/set-misc/">Set-Misc</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/spnego/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/spnego/">SPNEGO</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/uninstall/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/uninstall/">Uninstalling a dynamic module</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/dynamic-modules/xslt/" href="http://localhost:1313/nginx/admin-guide/dynamic-modules/xslt/">XSLT</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/admin-guide/mail-proxy/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--admin-guide--mail-proxy">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Mail Proxy</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--admin-guide--mail-proxy" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/admin-guide/mail-proxy/mail-proxy/" href="http://localhost:1313/nginx/admin-guide/mail-proxy/mail-proxy/">Configure NGINX as a Mail Proxy Server</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                    <a data-menu-id="/nginx/deployment-guides/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#nginx--deployment-guides" aria-controls="nginx--deployment-guides">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Deployment Guides</a>
                            </li>
                        </div>
                        <div id="nginx--deployment-guides" class="accordion-body collapse">
                            <div class="accordion-inner">
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/deployment-guides/amazon-web-services/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--deployment-guides--amazon-web-services">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Amazon Web Services</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--deployment-guides--amazon-web-services" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/amazon-web-services/high-availability-network-load-balancer/" href="http://localhost:1313/nginx/deployment-guides/amazon-web-services/high-availability-network-load-balancer/">Active-Active HA for NGINX Plus on AWS Using AWS Network Load Balancer</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/amazon-web-services/high-availability-keepalived/" href="http://localhost:1313/nginx/deployment-guides/amazon-web-services/high-availability-keepalived/">Active-Passive HA for NGINX Plus on AWS Using Elastic IP Addresses</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/amazon-web-services/ingress-controller-elastic-kubernetes-services/" href="http://localhost:1313/nginx/deployment-guides/amazon-web-services/ingress-controller-elastic-kubernetes-services/">Using NGINX or NGINX Plus as the Ingress Controller for Amazon Elastic Kubernetes Services</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/amazon-web-services/ec2-instances-for-nginx/" href="http://localhost:1313/nginx/deployment-guides/amazon-web-services/ec2-instances-for-nginx/">Create Amazon EC2 Instances for NGINX Open Source and NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/deployment-guides/global-server-load-balancing/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--deployment-guides--global-server-load-balancing">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Global Server Load Balancing</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--deployment-guides--global-server-load-balancing" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/global-server-load-balancing/ns1-global-server-load-balancing/" href="http://localhost:1313/nginx/deployment-guides/global-server-load-balancing/ns1-global-server-load-balancing/">Global Server Load Balancing with NS1 and NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/deployment-guides/google-cloud-platform/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--deployment-guides--google-cloud-platform">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Google Cloud Platform</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--deployment-guides--google-cloud-platform" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/google-cloud-platform/high-availability-all-active/" href="http://localhost:1313/nginx/deployment-guides/google-cloud-platform/high-availability-all-active/">All-Active HA for NGINX Plus on the Google Cloud Platform</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/deployment-guides/load-balance-third-party/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--deployment-guides--load-balancing-third-party-servers">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Load Balancing Third-Party Servers</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--deployment-guides--load-balancing-third-party-servers" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/load-balance-third-party/apache-tomcat/" href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/apache-tomcat/">Load Balancing Apache Tomcat Servers with NGINX Open Source and NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/load-balance-third-party/microsoft-exchange/" href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/microsoft-exchange/">Load Balancing Microsoft Exchange Servers with NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/load-balance-third-party/node-js/" href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/node-js/">Load Balancing Node.js Application Servers with NGINX Open Source and NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/load-balance-third-party/oracle-e-business-suite/" href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/oracle-e-business-suite/">Load Balancing Oracle E-Business Suite with NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/load-balance-third-party/oracle-weblogic-server/" href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/oracle-weblogic-server/">Load Balancing Oracle WebLogic Server with NGINX Open Source and NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/load-balance-third-party/wildfly/" href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/wildfly/">Load Balancing Wildfly and JBoss Application Servers with NGINX Open Source and NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/deployment-guides/microsoft-azure/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--deployment-guides--microsoft-azure">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Microsoft Azure</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--deployment-guides--microsoft-azure" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/microsoft-azure/high-availability-standard-load-balancer/" href="http://localhost:1313/nginx/deployment-guides/microsoft-azure/high-availability-standard-load-balancer/">Active-Active HA for NGINX Plus on Microsoft Azure Using the Azure Standard Load Balancer</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/microsoft-azure/virtual-machines-for-nginx/" href="http://localhost:1313/nginx/deployment-guides/microsoft-azure/virtual-machines-for-nginx/">Creating Microsoft Azure Virtual Machines for NGINX Open Source and F5 NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/deployment-guides/migrate-hardware-adc/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--deployment-guides--migrate-hardware-adcs">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Migrate Hardware ADCs</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--deployment-guides--migrate-hardware-adcs" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/migrate-hardware-adc/citrix-adc-configuration/" href="http://localhost:1313/nginx/deployment-guides/migrate-hardware-adc/citrix-adc-configuration/">Migrating Load Balancer Configuration from Citrix ADC to NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/migrate-hardware-adc/f5-big-ip-configuration/" href="http://localhost:1313/nginx/deployment-guides/migrate-hardware-adc/f5-big-ip-configuration/">Migrating Load Balancer Configuration from F5 BIG-IP LTM to F5 NGINX Plus</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <div class="accordion" id="Accordion2">
                                        <div class="sidebar-l1-padding">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/deployment-guides/single-sign-on/" class="accordion-toggle"
                                                                aria-expanded="false" data-toggle="collapse"
                                                                href="#nginx--deployment-guides--set-up-single-sign-on-for-proxied-applications">
                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>Set Up Single Sign-On for Proxied Applications</a>
                                                        </li>
                                                    <ul>
                                                </div>
                                                <div id="nginx--deployment-guides--set-up-single-sign-on-for-proxied-applications" class="accordion-body collapse leaf">
                                                    <div class="accordion-inner">

                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/single-sign-on/auth0/" href="http://localhost:1313/nginx/deployment-guides/single-sign-on/auth0/">Single Sign-On With Auth0</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/single-sign-on/cognito/" href="http://localhost:1313/nginx/deployment-guides/single-sign-on/cognito/">Single Sign-On with Amazon Cognito</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/single-sign-on/active-directory-federation-services/" href="http://localhost:1313/nginx/deployment-guides/single-sign-on/active-directory-federation-services/">Single Sign-On with Microsoft Active Directory FS</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/single-sign-on/entra-id/" href="http://localhost:1313/nginx/deployment-guides/single-sign-on/entra-id/">Single Sign-On with Microsoft Entra ID</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/single-sign-on/keycloak/" href="http://localhost:1313/nginx/deployment-guides/single-sign-on/keycloak/">Single Sign-On with Keycloak</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/single-sign-on/onelogin/" href="http://localhost:1313/nginx/deployment-guides/single-sign-on/onelogin/">Single Sign-On with OneLogin</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/single-sign-on/okta/" href="http://localhost:1313/nginx/deployment-guides/single-sign-on/okta/">Single Sign-On with Okta</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <ul class="sidebar-l2-padding">
                                                            <li class="nginx-toc-link l3 sidebar-il-border">
                                                                <a data-menu-id="/nginx/deployment-guides/single-sign-on/ping-identity/" href="http://localhost:1313/nginx/deployment-guides/single-sign-on/ping-identity/">Single Sign-On with Ping Identity</a>
                                                            </li>
                                                        </ul>
                                                        
                                                        
                                                    
                                                        
                                                        
                                                        <div class="accordion" id="Accordion3">
                                                            <div class="sidebar-l2-padding">
                                                                <div class="accordion-group sidebar-il-border">
                                                                    <div class="accordion-heading">
                                                                        <ul>
                                                                            <li class="nginx-toc-link l2">
                                                                                <a data-menu-id="/nginx/deployment-guides/single-signon/oidc-njs/" class="accordion-toggle"
                                                                                    aria-expanded="false" data-toggle="collapse"
                                                                                    href="#nginx--single-sign-on--legacy-njs-based-single-sign-on-solutions">
                                                                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Legacy njs-based Single Sign-On Solutions</a>
                                                                            </li>
                                                                        <ul>
                                                                    </div>
                                                                    <div id="nginx--single-sign-on--legacy-njs-based-single-sign-on-solutions" class="accordion-body collapse leaf">
                                                                        <div class="accordion-inner">
                                                                        
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx/deployment-guides/single-sign-on/oidc-njs/cognito/"
                                                                                        href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/cognito/">Single Sign-On with Amazon Cognito and njs</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx/deployment-guides/single-sign-on/oidc-njs/auth0/"
                                                                                        href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/auth0/">Single Sign-On With Auth0 and njs</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx/deployment-guides/single-sign-on/oidc-njs/keycloak/"
                                                                                        href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/keycloak/">Single Sign-On with Keycloak and njs</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx/deployment-guides/single-sign-on/oidc-njs/active-directory-federation-services/"
                                                                                        href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/active-directory-federation-services/">Single Sign-On with Microsoft AD FS and njs</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx/deployment-guides/single-sign-on/oidc-njs/okta/"
                                                                                        href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/okta/">Single Sign-On with Okta and njs</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx/deployment-guides/single-sign-on/oidc-njs/onelogin/"
                                                                                        href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/onelogin/">Single Sign-On with OneLogin and njs</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        
                                                                        
                                                                            <ul class="sidebar-l2-padding">
                                                                                <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                    <a data-menu-id="/nginx/deployment-guides/single-sign-on/oidc-njs/ping-identity/"
                                                                                        href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/ping-identity/">Single Sign-On with Ping Identity and njs</a>
                                                                                </li>
                                                                            </ul>
                                                                        
                                                                        
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                
                                
                                    
                                    <ul class="sidebar-reg-padding">
                                        <div class="accordion" id="accordion2">
                                            <div class="accordion-group sidebar-il-border">
                                                <div class="accordion-heading">
                                                    <ul>
                                                        <li class="nginx-toc-link l2">
                                                            <a data-menu-id="/nginx/deployment-guides/setting-up-nginx-demo-environment/"
                                                                href="http://localhost:1313/nginx/deployment-guides/setting-up-nginx-demo-environment/">Setting up an NGINX demo environment</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </ul>
                                    
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>

                

            
                
                
                <li class="nginx-toc-link l1">
                    <a data-menu-id="/nginx/releases/" href="http://localhost:1313/nginx/releases/">Releases</a>
                </li>
                
                

            
                
                
                <li class="nginx-toc-link l1">
                    <a data-menu-id="/nginx/technical-specs/" href="http://localhost:1313/nginx/technical-specs/">Technical Specs</a>
                </li>
                
                

            
                
                
                <li class="nginx-toc-link l1">
                    <a data-menu-id="/nginx/open-source-components/" href="http://localhost:1313/nginx/open-source-components/">Open Source Components</a>
                </li>
                
                

            
                
                
                <li class="nginx-toc-link l1">
                    <a data-menu-id="/nginx/fips-compliance-nginx-plus/" href="http://localhost:1313/nginx/fips-compliance-nginx-plus/">NGINX Plus FIPS Compliance</a>
                </li>
                
                

            
                
                
                <li class="nginx-toc-link l1">
                    <a data-menu-id="/nginx/directives/" href="http://localhost:1313/nginx/directives/">NGINX Directives Index</a>
                </li>
                
                

            

            </ul>
        
        </div>
    </div>
</div>

  </nav>

  
  
  <main class="content col d-block align-top content-has-toc" role="main">
  
    
  <section class="main-layout">
    <div class="sidebar-layout" id="sidebar-layout">
      <nav data-mf="true" id="sidebar-v2" class="sidebar" style="display:none;">
        


    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    





<atomic-search-interface id="search-standalone-sidebar" data-mf="true" style="display:none;">
    <atomic-search-box redirection-url="/search.html">
    </atomic-search-box>
</atomic-search-interface>
<button class="product-selector-button" id="product-selector-button">
    
    <div class="product-selector-name" id="product-selector-name">NGINX Plus</div>
    <div class="product-selector-button-icon" id="product-selector-button-icon">
        <svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg" id="product-selector-chevron-icon">
            <path d="M1 13L7 7L0.999999 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="product-selector-chevron-icon"/>
        </svg>     
    </div>
</button>
<div class="product-selector" id="product-selector">
    
    
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX ONE</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-one">NGINX One Console</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx">NGINX Plus</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-instance-manager">NGINX Instance Manager</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-ingress-controller">NGINX Ingress Controller</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-gateway-fabric">NGINX Gateway Fabric</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="https://nginx.org/en/docs/">NGINX Open Source</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/solutions/">Subscription Licensing &amp; Solutions</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-agent">NGINX Agent</a>
                </li>
            
            </ul>
        </div>
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX APP PROTECT</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-app-protect-waf">NGINX App Protect WAF</a>
                </li>
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginx-app-protect-dos">NGINX App Protect DoS</a>
                </li>
            
            </ul>
        </div>
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX AS A SERVICE</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="/nginxaas/azure/">NGINX as a Service for Azure</a>
                </li>
            
            </ul>
        </div>
    
    
    
        <div class="product-selector-content" id="product-selector-content">
            <p id="product-selector-content-product-group-name">NGINX OTHER</p>
            <ul id="product-selector-content-product-container">
            
                <li id="product-selector-content-product-name">
                    <a id="product-selector-content-product-link" href="https://unit.nginx.org/">NGINX Unit</a>
                </li>
            
            </ul>
        </div>
    
</div>
<div class="scrollbar-container">
    <div class="sidebar-navigation">
        <ul class="parent-collapsible-content">
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-d8b0ed076d8ee224a3aef5fe811e3a69" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-d8b0ed076d8ee224a3aef5fe811e3a69" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Admin Guide 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
            <input type="checkbox" id="toggle-34ba13d39918e960bfd91478931ee142" class="toggle-checkbox" style="display: none;">
            <label for="toggle-34ba13d39918e960bfd91478931ee142" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Installing NGINX and NGINX Plus 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-plus/" style="">Installing NGINX Plus </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-open-source/" style="">Installing NGINX Open Source </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-plus-amazon-web-services/" style="">Installing NGINX Plus AMIs on Amazon EC2 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-plus-google-cloud-platform/" style="">Install NGINX Plus on the Google Cloud Platform </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-plus-microsoft-azure/" style="">Installing NGINX Plus on Microsoft Azure </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/installing-nginx/installing-nginx-docker/" style="">Deploying NGINX and NGINX Plus with Docker </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-4fed1bc24136a50ced01c75c6f2619a2" class="toggle-checkbox" style="display: none;">
            <label for="toggle-4fed1bc24136a50ced01c75c6f2619a2" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Basic Functionality 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/basic-functionality/runtime-control/" style="">Control NGINX Processes at Runtime </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/basic-functionality/managing-configuration-files/" style="">Create NGINX Plus and NGINX Configuration Files </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-a0b990a08877f2414420dd3fab30a616" class="toggle-checkbox" style="display: none;">
            <label for="toggle-a0b990a08877f2414420dd3fab30a616" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Load Balancer 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/load-balancer/http-load-balancer/" style="">HTTP Load Balancing </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/load-balancer/tcp-udp-load-balancer/" style="">TCP and UDP Load Balancing </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/load-balancer/http-health-check/" style="">HTTP Health Checks </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/load-balancer/tcp-health-check/" style="">TCP Health Checks </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/load-balancer/udp-health-check/" style="">UDP Health Checks </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/load-balancer/grpc-health-check/" style="">gRPC Health Checks </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/load-balancer/dynamic-configuration-api/" style="">Dynamic Configuration of Upstreams with the NGINX Plus API </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/load-balancer/using-proxy-protocol/" style="">Accepting the PROXY Protocol </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-3827dd0c2b43b01d6adb9d92730551a2" class="toggle-checkbox" style="display: none;">
            <label for="toggle-3827dd0c2b43b01d6adb9d92730551a2" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Content Cache 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/content-cache/content-caching/" style="">NGINX Content Caching </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-bc8955a748a8c048c742c5efe92af86f" class="toggle-checkbox" style="display: none;">
            <label for="toggle-bc8955a748a8c048c742c5efe92af86f" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Web Server 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/web-server/web-server/" style="">Configuring NGINX and NGINX Plus as a Web Server </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/web-server/serving-static-content/" style="">Serve Static Content </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/web-server/reverse-proxy/" style="">NGINX Reverse Proxy </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/web-server/compression/" style="">Compression and Decompression </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/web-server/app-gateway-uwsgi-django/" style="">Using NGINX and NGINX Plus as an Application Gateway with uWSGI and Django </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-bdec90cc0d849dbcf048e137054cd075" class="toggle-checkbox" style="display: none;">
            <label for="toggle-bdec90cc0d849dbcf048e137054cd075" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Security Controls 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/terminating-ssl-http/" style="">NGINX SSL Termination </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/terminating-ssl-tcp/" style="">SSL Termination for TCP Upstream Servers </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/configuring-http-basic-authentication/" style="">Restricting Access with HTTP Basic Authentication </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/configuring-subrequest-authentication/" style="">Authentication Based on Subrequest Result </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/configuring-jwt-authentication/" style="">Setting up JWT Authentication </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/configuring-oidc/" style="">Single Sign-On with OpenID Connect and Identity Providers </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/controlling-access-proxied-http/" style="">Limiting Access to Proxied HTTP Resources </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/controlling-access-proxied-tcp/" style="">Restricting Access to Proxied TCP Resources </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/controlling-access-by-geoip/" style="">Restricting Access by Geographical Location </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/securing-http-traffic-upstream/" style="">Securing HTTP Traffic to Upstream Servers </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/securing-tcp-traffic-upstream/" style="">Securing TCP Traffic to Upstream Servers </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/security-controls/denylisting-ip-addresses/" style="">Dynamic Denylisting of IP Addresses </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-4115092e5ba91d2d8fd1b7bf0bf88aa9" class="toggle-checkbox" style="display: none;">
            <label for="toggle-4115092e5ba91d2d8fd1b7bf0bf88aa9" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Monitoring 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/monitoring/live-activity-monitoring/" style="">Live Activity Monitoring </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/monitoring/logging/" style="">Configuring Logging </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/monitoring/debugging/" style="">Debugging NGINX </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/monitoring/diagnostic-package/" style="">NGINX Diagnostic Package </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/monitoring/new-relic-plugin/" style="">Monitoring NGINX and NGINX Plus with the New Relic Plug-In </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-58f36bce08139196af7dbd68b048562d" class="toggle-checkbox" style="display: none;">
            <label for="toggle-58f36bce08139196af7dbd68b048562d" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                High Availability 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/high-availability/ha-keepalived/" style="">High Availability Support for NGINX Plus in On-Premises Deployments </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/high-availability/ha-keepalived-nodes/" style="">Configuring Active-Active High Availability and Additional Passive Nodes with keepalived </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/high-availability/configuration-sharing/" style="">Synchronizing NGINX Configuration in a Cluster </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/high-availability/zone_sync/" style="">Runtime State Sharing in a Cluster </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/high-availability/zone_sync_details/" style="">How NGINX Plus Performs Zone Synchronization </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-d9475b942e664d5a02f3c7e0832be30f" class="toggle-checkbox" style="display: none;">
            <label for="toggle-d9475b942e664d5a02f3c7e0832be30f" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Dynamic Modules 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/dynamic-modules/" style="">Dynamic Modules </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/brotli/" style="">Brotli </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/cookie-flag/" style="">Cookie-Flag </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/encrypted-session/" style="">Encrypted-Session </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/fips/" style="">FIPS Status Check </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/geoip/" style="">GeoIP </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/geoip2/" style="">GeoIP2 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/headers-more/" style="">Headers-More </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/http-substitutions-filter/" style="">HTTP Substitutions Filter </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/image-filter/" style="">Image-Filter </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/lua/" style="">Lua </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/ndk/" style="">NGINX Developer Kit </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/nginx-waf/" style="">NGINX ModSecurity WAF </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/nginscript/" style="">njs Scripting Language </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/opentelemetry/" style="">OpenTelemetry </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/opentracing/" style="">OpenTracing </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/perl/" style="">Perl </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/passenger-open-source/" style="">Phusion Passenger Open Source </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/prometheus-njs/" style="">Prometheus-njs </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/rtmp/" style="">RTMP </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/set-misc/" style="">Set-Misc </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/spnego/" style="">SPNEGO </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/uninstall/" style="">Uninstalling a dynamic module </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/dynamic-modules/xslt/" style="">XSLT </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-0e96b7a1b81ada95980c6f8945f7298a" class="toggle-checkbox" style="display: none;">
            <label for="toggle-0e96b7a1b81ada95980c6f8945f7298a" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Mail Proxy 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/admin-guide/mail-proxy/mail-proxy/" style="">Configure NGINX as a Mail Proxy Server </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                    <input type="checkbox" id="toggle-ad2e544081d8a2dc550608bf96863673" class="toggle-checkbox" style="display: none;">
                    <label for="toggle-ad2e544081d8a2dc550608bf96863673" class="collapsible-header">
                        
                            <span class="parent-box expand"></span>
                            <span class="parent-box opened"></span>
                        
                        Deployment Guides 
                    </label>
                    

<ul class="collapsible-content">
    
    <li>
        
            <input type="checkbox" id="toggle-5e13f0d338ace88d49a9d6caa7010fc4" class="toggle-checkbox" style="display: none;">
            <label for="toggle-5e13f0d338ace88d49a9d6caa7010fc4" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Amazon Web Services 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/amazon-web-services/high-availability-network-load-balancer/" style="">Active-Active HA for NGINX Plus on AWS Using AWS Network Load Balancer </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/amazon-web-services/high-availability-keepalived/" style="">Active-Passive HA for NGINX Plus on AWS Using Elastic IP Addresses </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/amazon-web-services/ingress-controller-elastic-kubernetes-services/" style="">Using NGINX or NGINX Plus as the Ingress Controller for Amazon Elastic Kubernetes Services </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/amazon-web-services/ec2-instances-for-nginx/" style="">Create Amazon EC2 Instances for NGINX Open Source and NGINX Plus </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-22d3c4602e6471d3cb1277bf845bc7a5" class="toggle-checkbox" style="display: none;">
            <label for="toggle-22d3c4602e6471d3cb1277bf845bc7a5" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Global Server Load Balancing 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/global-server-load-balancing/ns1-global-server-load-balancing/" style="">Global Server Load Balancing with NS1 and NGINX Plus </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-539116910b30b117ba27575318b0e1d8" class="toggle-checkbox" style="display: none;">
            <label for="toggle-539116910b30b117ba27575318b0e1d8" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Google Cloud Platform 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/google-cloud-platform/high-availability-all-active/" style="">All-Active HA for NGINX Plus on the Google Cloud Platform </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-eea80951fd0bc0c7385d3863c701b40f" class="toggle-checkbox" style="display: none;">
            <label for="toggle-eea80951fd0bc0c7385d3863c701b40f" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Load Balancing Third-Party Servers 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/apache-tomcat/" style="">Load Balancing Apache Tomcat Servers with NGINX Open Source and NGINX Plus </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/microsoft-exchange/" style="">Load Balancing Microsoft Exchange Servers with NGINX Plus </a>
            
        
    </li>
    
    <li>
        
                                  
                <span class="box current partial" id="current-page"></span>                 
            
            <a href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/node-js/" style="font-weight: bold;">Load Balancing Node.js Application Servers with NGINX Open Source and NGINX Plus </a>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#about-nginx-open-source-and-nginx-plus">About NGINX Open Source and NGINX Plus</a></li>
    <li><a href="#about-nodejs">About Node.js</a></li>
    <li><a href="#prerequisites-and-system-requirements">Prerequisites and System Requirements</a>
      <ul>
        <li><a href="#about-sample-values-and-copying-of-text">About Sample Values and Copying of Text</a></li>
      </ul>
    </li>
    <li><a href="#configuring-an-ssltls-certificate-for-client-traffic">Configuring an SSL/TLS Certificate for Client Traffic</a>
      <ul>
        <li><a href="#generating-a-self-signed-certificate">Generating a Self-Signed Certificate</a></li>
        <li><a href="#generating-a-certificate-request">Generating a Certificate Request</a></li>
      </ul>
    </li>
    <li><a href="#creating-and-modifying-configuration-files">Creating and Modifying Configuration Files</a>
      <ul>
        <li><a href="#about-reloading-updated-configuration">About Reloading Updated Configuration</a></li>
      </ul>
    </li>
    <li><a href="#configuring-basic-load-balancing-with-nginx-open-source-or-nginx-plus">Configuring Basic Load Balancing with NGINX Open Source or NGINX Plus</a>
      <ul>
        <li><a href="#configuring-virtual-servers-for-http-and-https-traffic">Configuring Virtual Servers for HTTP and HTTPS Traffic</a></li>
        <li><a href="#configuring-basic-load-balancing">Configuring Basic Load Balancing</a></li>
        <li><a href="#configuring-basic-session-persistence">Configuring Basic Session Persistence</a></li>
        <li><a href="#configuring-proxy-of-websocket-traffic">Configuring Proxy of WebSocket Traffic</a></li>
        <li><a href="#configuring-content-caching">Configuring Content Caching</a></li>
        <li><a href="#configuring-http2-support">Configuring HTTP/2 Support</a></li>
        <li><a href="#full-configuration-for-basic-load-balancing">Full Configuration for Basic Load Balancing</a></li>
      </ul>
    </li>
    <li><a href="#configuring-enhanced-load-balancing-with-nginx-plus">Configuring Enhanced Load Balancing with NGINX Plus</a>
      <ul>
        <li><a href="#configuring-advanced-session-persistence">Configuring Advanced Session Persistence</a></li>
        <li><a href="#configuring-application-health-checks">Configuring Application Health Checks</a></li>
        <li><a href="#enabling-live-activity-monitoring">Enabling Live Activity Monitoring</a></li>
        <li><a href="#enabling-dynamic-reconfiguration-of-upstream-groups">Enabling Dynamic Reconfiguration of Upstream Groups</a></li>
        <li><a href="#full-configuration-for-enhanced-load-balancing">Full Configuration for Enhanced Load Balancing</a></li>
      </ul>
    </li>
    <li><a href="#resources">Resources</a>
      <ul>
        <li><a href="#revision-history">Revision History</a></li>
      </ul>
    </li>
  </ul>
</nav>
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/oracle-e-business-suite/" style="">Load Balancing Oracle E-Business Suite with NGINX Plus </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/oracle-weblogic-server/" style="">Load Balancing Oracle WebLogic Server with NGINX Open Source and NGINX Plus </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/wildfly/" style="">Load Balancing Wildfly and JBoss Application Servers with NGINX Open Source and NGINX Plus </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-deab0f7f4195e0ebfdd9a46bf3c45873" class="toggle-checkbox" style="display: none;">
            <label for="toggle-deab0f7f4195e0ebfdd9a46bf3c45873" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Microsoft Azure 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/microsoft-azure/high-availability-standard-load-balancer/" style="">Active-Active HA for NGINX Plus on Microsoft Azure Using the Azure Standard Load Balancer </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/microsoft-azure/virtual-machines-for-nginx/" style="">Creating Microsoft Azure Virtual Machines for NGINX Open Source and F5 NGINX Plus </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-9d116931baf1693c0ecb4484238d72ce" class="toggle-checkbox" style="display: none;">
            <label for="toggle-9d116931baf1693c0ecb4484238d72ce" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Migrate Hardware ADCs 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/migrate-hardware-adc/citrix-adc-configuration/" style="">Migrating Load Balancer Configuration from Citrix ADC to NGINX Plus </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/migrate-hardware-adc/f5-big-ip-configuration/" style="">Migrating Load Balancer Configuration from F5 BIG-IP LTM to F5 NGINX Plus </a>
            
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-1b645490e7b8fc3e2dbc02de30e692bb" class="toggle-checkbox" style="display: none;">
            <label for="toggle-1b645490e7b8fc3e2dbc02de30e692bb" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Set Up Single Sign-On for Proxied Applications 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/auth0/" style="">Single Sign-On With Auth0 </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/cognito/" style="">Single Sign-On with Amazon Cognito </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/active-directory-federation-services/" style="">Single Sign-On with Microsoft Active Directory FS </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/entra-id/" style="">Single Sign-On with Microsoft Entra ID </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/keycloak/" style="">Single Sign-On with Keycloak </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/onelogin/" style="">Single Sign-On with OneLogin </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/okta/" style="">Single Sign-On with Okta </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/ping-identity/" style="">Single Sign-On with Ping Identity </a>
            
        
    </li>
    
    <li>
        
            <input type="checkbox" id="toggle-078a70b7a7961256b5a3c59fcd9c4eb2" class="toggle-checkbox" style="display: none;">
            <label for="toggle-078a70b7a7961256b5a3c59fcd9c4eb2" class="collapsible-header">
                
                    <span class="box expand partial-box"></span>
                    <span class="box opened partial-box"></span>
                
                Legacy njs-based Single Sign-On Solutions 
            </label>
            

<ul class="collapsible-content">
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/cognito/" style="">Single Sign-On with Amazon Cognito and njs </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/auth0/" style="">Single Sign-On With Auth0 and njs </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/keycloak/" style="">Single Sign-On with Keycloak and njs </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/active-directory-federation-services/" style="">Single Sign-On with Microsoft AD FS and njs </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/okta/" style="">Single Sign-On with Okta and njs </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/onelogin/" style="">Single Sign-On with OneLogin and njs </a>
            
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/single-sign-on/oidc-njs/ping-identity/" style="">Single Sign-On with Ping Identity and njs </a>
            
        
    </li>
    
</ul>
        
    </li>
    
</ul>
        
    </li>
    
    <li>
        
                                 
                <span class="box-link partial"></span>              
            
            <a href="http://localhost:1313/nginx/deployment-guides/setting-up-nginx-demo-environment/" style="">Setting up an NGINX demo environment </a>
            
        
    </li>
    
</ul>
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                                         
                        <span class="parent-box-link"></span>              
                    
                    <a href="http://localhost:1313/nginx/releases/" style="">Releases </a> 
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                                         
                        <span class="parent-box-link"></span>              
                    
                    <a href="http://localhost:1313/nginx/technical-specs/" style="">Technical Specs </a> 
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                                         
                        <span class="parent-box-link"></span>              
                    
                    <a href="http://localhost:1313/nginx/open-source-components/" style="">Open Source Components </a> 
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                                         
                        <span class="parent-box-link"></span>              
                    
                    <a href="http://localhost:1313/nginx/fips-compliance-nginx-plus/" style="">NGINX Plus FIPS Compliance </a> 
                
            </li>
        
            <li class="parent-collapsible-content-item">
                
                                         
                        <span class="parent-box-link"></span>              
                    
                    <a href="http://localhost:1313/nginx/directives/" style="">NGINX Directives Index </a> 
                
            </li>
        
        </ul>
    </div>
</div>
      </nav>
    </div>

    <section class="content-layout">
      <div data-cms-edit="content" class="text-content">
        <section class="breadcrumb-layout" data-mf="true" style="display: none;">
          
            
            <nav aria-label="breadcrumb" class="breadcrumb navbar">
    <div class="nav flex-md-row">
        <ol class="breadcrumb">
            
            
            
            
                
            
            
                
            
            
                
            
            
                
            
            
                
            
            
            
                <li><a href="/">Home</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx/">F5 NGINX Plus</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx/deployment-guides/">Deployment Guides</a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx/deployment-guides/load-balance-third-party/">Load Balancing Third-Party Servers</a><i class="fas fa-chevron-right"></i></li>
                
            
                Load Balancing Node.js Application Servers with NGINX Open Source and NGINX Plus
        </ol>
    </div>
</nav>
  
            
          
        </section>
        <h1>Load Balancing Node.js Application Servers with NGINX Open Source and NGINX Plus</h1>
        <p>This deployment guide explains how to use NGINX Open Source and F5 NGINX Plus to load balance HTTP and HTTPS traffic across a pool of Node.js application servers. The detailed instructions in this guide apply to both cloudbased and onpremises deployments of Node.js.</p>
<p><span id="about-nginx"></span></p>
<h2 
id="about-nginx-open-source-and-nginx-plus">About NGINX Open Source and NGINX Plus  <a class="headerlink float-right" href="#about-nginx-open-source-and-nginx-plus" title="About NGINX Open Source and NGINX Plus"><i class="fas fa-link fa-xs"></i></a>
</h2><p><a href="https://nginx.org/en" target="_blank" rel="noopener">NGINX Open Source</a> is an open source web server and reverse proxy that has grown in popularity in recent years because of its scalability, outstanding performance, and small footprint. NGINX Open Source was first created to solve the C10K problem (serving 10,000simultaneous connections on a single web server). NGINX Open Source&rsquo;s features and performance have made it a staple of highperformance sites it&rsquo;s <a href="https://w3techs.com/technologies/cross/web_server/ranking" target="_blank" rel="noopener">the #1 web server at the 100,000busiest websites in the world</a>.</p>
<p><a href="https://www.f5.com/products/nginx/nginx-plus" target="_blank" rel="noopener">NGINXPlus</a> is the commercially supported version of NGINX Open Source. NGINXPlus is a complete application delivery platform, extending the power of NGINX Open Source with a host of enterpriseready capabilities that enhance a Node.js deployment and are instrumental to building web applications at scale:</p>
<ul>
<li><a href="https://www.nginx.com/products/nginx/load-balancing/" target="_blank" rel="noopener">Fullfeatured HTTP, TCP, and UDP load balancing</a></li>
<li><a href="https://www.nginx.com/products/nginx/load-balancing/#session-persistence" target="_blank" rel="noopener">Intelligent session persistence</a></li>
<li><a href="http://localhost:1313/nginx/admin-guide/web-server/reverse-proxy/">Highperformance reverse proxy</a></li>
<li><a href="http://localhost:1313/nginx/admin-guide/content-cache/content-caching/">Caching and offload of dynamic and static content</a></li>
<li><a href="https://www.nginx.com/products/nginx/streaming-media/" target="_blank" rel="noopener">Adaptive streaming to deliver audio and video to any device</a></li>
<li><a href="https://docs.nginx.com/nginx/admin-guide/load-balancer/http-health-check/" target="_blank" rel="noopener">Application-aware health checks</a> and <a href="https://docs.nginx.com/nginx/admin-guide/high-availability/" target="_blank" rel="noopener">high availability</a></li>
<li><a href="https://www.nginx.com/products/nginx/live-activity-monitoring/" target="_blank" rel="noopener">Advanced activity monitoring available via a dashboard or API</a></li>
<li><a href="https://www.nginx.com/products/nginx/load-balancing/#load-balancing-api" target="_blank" rel="noopener">Management and realtime configuration changes with DevOpsfriendly tools</a></li>
</ul>
<p><span id="about-nodejs"></span></p>
<h2 
id="about-nodejs">About Node.js  <a class="headerlink float-right" href="#about-nodejs" title="About Node.js"><i class="fas fa-link fa-xs"></i></a>
</h2><p><a href="https://nodejs.org/en/about/" target="_blank" rel="noopener">Node.js</a> is a JavaScript runtime built on the <a href="https://v8.dev/" target="_blank" rel="noopener">V8 JavaScript engine</a>. Node.js uses an eventdriven, nonblocking I/O model that makes it lightweight and efficient. The package ecosystem for Node.js, <a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm</a>, is the largest ecosystem of open source libraries in the world.</p>
<p>To download the Node.js software and get installation instructions, visit the <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">Node.js</a> website.</p>
<p>The information in this deployment guide applies equally to open source Node.js software and commercially supported Node.js frameworks.</p>
<p><span id="prereqs"></span></p>
<h2 
id="prerequisites-and-system-requirements">Prerequisites and System Requirements  <a class="headerlink float-right" href="#prerequisites-and-system-requirements" title="Prerequisites and System Requirements"><i class="fas fa-link fa-xs"></i></a>
</h2><ul>
<li>A Node.js application server installed and configured on a physical or virtual system.</li>
<li>A Linux system to host NGINX Open Source or NGINXPlus. To avoid potential conflicts with other applications, we recommend you install NGINXPlus on a fresh physical or virtual system. For the list of Linux distributions supported by NGINXPlus, see <a href="http://localhost:1313/nginx/technical-specs/">NGINXPlus Technical Specifications</a>.</li>
<li>NGINX Open Source or NGINXPlus installed on the physical or virtual system. Some features are available only with <a href="#enhanced">NGINXPlus</a>, including sophisticated session persistence, application health checks, live activity monitoring, and dynamic reconfiguration of upstream groups. For installation instructions for both products, see the <a href="http://localhost:1313/nginx/admin-guide/installing-nginx/">NGINXPlus AdminGuide</a>.</li>
</ul>
<p>The instructions assume you have basic Linux system administration skills, including the following. Full instructions are not provided for these tasks.</p>
<ul>
<li>Configuring and deploying a Node.js application</li>
<li>Installing Linux software from vendorsupplied packages</li>
<li>Editing configuration files</li>
<li>Copying files between a central administrative system and Linux servers</li>
<li>Running basic commands to start and stop services</li>
<li>Reading log files</li>
</ul>
<h3 
id="about-sample-values-and-copying-of-text">About Sample Values and Copying of Text  <a class="headerlink float-right" href="#about-sample-values-and-copying-of-text" title="About Sample Values and Copying of Text"><i class="fas fa-link fa-xs"></i></a>
</h3><ul>
<li><code>example.com</code> is used as a sample domain name (in key names and configuration blocks). Replace it with your organization&rsquo;s name.</li>
<li>Many NGINX Open Source and NGINXPlus configuration blocks in this guide list two sample Node.js application servers with IP addresses 192.168.33.11 and 192.168.33.12. Replace these addresses with the IP addresses of your Node.js servers. Include a line in the configuration block for each server if you have more or fewer than two.</li>
<li>For readability reasons, some commands appear on multiple lines. If you want to copy and paste them into a terminal window, we recommend that you first copy them into a text editor, where you can substitute the object names that are appropriate for your deployment and remove any extraneous formatting characters that your browser might insert.</li>
<li>We recommend that you do not copy text from the configuration snippets in this guide into your configuration files. For the recommended way to create configuration files, see <a href="#config-files">Creating and Modifying Configuration Files</a>.</li>
</ul>
<p><span id="tls-certificate"></span></p>
<h2 
id="configuring-an-ssltls-certificate-for-client-traffic">Configuring an SSL/TLS Certificate for Client Traffic  <a class="headerlink float-right" href="#configuring-an-ssltls-certificate-for-client-traffic" title="Configuring an SSL/TLS Certificate for Client Traffic"><i class="fas fa-link fa-xs"></i></a>
</h2><p>If you plan to enable SSL/TLS encryption of traffic between NGINX Open Source or NGINXPlus and clients of your Node.js application, you need to configure a server certificate for NGINX Open Source or NGINXPlus.</p>
<ul>
<li>SSL/TLS support is enabled by default in all <a href="https://cs.nginx.com/" target="_blank" rel="noopener">NGINXPlus packages</a> and <a href="https://nginx.org/en/linux_packages.html" target="_blank" rel="noopener">NGINX Open Source binaries</a> provided by NGINX.</li>
<li>If you are compiling NGINX Open Source from source, include the <span style="white-space: nowrap;"><code>--with-http_ssl_module</code></span> parameter to enable SSL/TLS support for HTTP traffic (the corresponding parameter for TCP/UDP is <span style="white-space: nowrap;"><code>--with-stream_ssl_module</code></span>, and for email is <span style="white-space: nowrap;"><code>--with-;mail_ssl_module</code></span>, but this guide does not cover those protocol types).</li>
<li>If using binaries from other providers, consult the provider documentation to determine if they support SSL/TLS.</li>
</ul>
<p>There are several ways to obtain a server certificate, including the following. For your convenience, <span style="white-space: nowrap;">step-by-step</span> instructions are provided for the second and third options.</p>
<ul>
<li>If you already have an SSL certificate for NGINX Open Source or NGINXPlus installed on another UNIX or Linux system (including systems running Apache HTTP Server), copy it to the <strong>/etc/nginx/ssl</strong> directory on the NGINX Open Source or NGINXPlus server.</li>
<li>Generate a selfsigned certificate as described in <a href="#certificate-self-signed">Generating a SelfSigned Certificate</a> below. This is sufficient for testing scenarios, but clients of production deployments generally require a certificate signed by a certificate authority (CA).</li>
<li>Request a new certificate from a CA or your organization&rsquo;s security group, as described in <a href="#certificate-request">Generating a Certificate Request</a> below.</li>
</ul>
<p>For more details on SSL/TLS termination, see the <a href="/nginx/admin-guide/security-controls/terminating-ssl-http/">NGINXPlus AdminGuide</a>.</p>
<h3 
id="generating-a-self-signed-certificate">Generating a Self-Signed Certificate  <a class="headerlink float-right" href="#generating-a-self-signed-certificate" title="Generating a Self-Signed Certificate"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Generate a publicprivate key pair and a selfsigned server certificate in PEM format that is based on them.</p>
<ol>
<li>
<p>Log in as the root user on a machine that has the <code>openssl</code> software installed.</p>
</li>
<li>
<p>Generate the key pair in PEM format (the default). To encrypt the private key, include the <span style="white-space: nowrap;"><code>-des3</code></span> parameter. (Other encryption algorithms are available, listed on the man page for the <a href="https://www.openssl.org/docs/manmaster/man1/openssl-genrsa.html" target="_blank" rel="noopener">genrsa</a> command.) You are prompted for the passphrase used as the basis for encryption.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb389bf78&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb389bf78">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# openssl genrsa -des3 -out ~/private-key.pem <span class="m">2048</span>
</span></span><span class="line"><span class="cl">Generating RSA private key ...
</span></span><span class="line"><span class="cl">Enter pass phrase <span class="k">for</span> private-key.pem:</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# openssl genrsa -des3 -out ~/private-key.pem <span class="m">2048</span>
</span></span><span class="line"><span class="cl">Generating RSA private key ...
</span></span><span class="line"><span class="cl">Enter pass phrase <span class="k">for</span> private-key.pem:</span></span></code></pre></div>
</div></li>
<li>
<p>Create a backup of the key file in a secure location. If you lose the key, the certificate becomes unusable.</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb38cc4e8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fb38cc4e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# cp ~/private-key.pem secure-dir/private-key.pem.backup</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# cp ~/private-key.pem secure-dir/private-key.pem.backup</span></span></code></pre></div>
</div></li>
<li>
<p>Generate the certificate. Include the <span style="white-space: nowrap;"><code>-new</code></span> and <span style="white-space: nowrap;"><code>-x509</code></span> parameters to make a new selfsigned certificate. Optionally include the <span style="white-space: nowrap;"><code>-days</code></span> parameter to change the key&rsquo;s validity lifetime from the default of 30 days (10950 days is about 30 years). Respond to the prompts with values appropriate for your testing deployment.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">shell</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb391b2a0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb391b2a0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# openssl req -new -x509 -key ~/private-key.pem -out ~/self-cert.pem <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                   -days <span class="m">10950</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# openssl req -new -x509 -key ~/private-key.pem -out ~/self-cert.pem <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                   -days <span class="m">10950</span></span></span></code></pre></div>
</div></li>
<li>
<p>Copy or move the certificate file and associated key files to the <strong>/etc/nginx/ssl</strong> directory on the NGINX Open Source or NGINXPlus server.</p>
</li>
</ol>
<h3 
id="generating-a-certificate-request">Generating a Certificate Request  <a class="headerlink float-right" href="#generating-a-certificate-request" title="Generating a Certificate Request"><i class="fas fa-link fa-xs"></i></a>
</h3><ol>
<li>
<p>Log in as the root user on a machine that has the <code>openssl</code> software installed.</p>
</li>
<li>
<p>Create a private key to be packaged in the certificate.</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3938b48&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fb3938b48">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# openssl genrsa -out ~/example.com.key <span class="m">2048</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# openssl genrsa -out ~/example.com.key <span class="m">2048</span></span></span></code></pre></div>
</div></li>
<li>
<p>Create a backup of the key file in a secure location. If you lose the key, the certificate becomes unusable.</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb394fa78&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fb394fa78">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# cp ~/example.com.key &lt;SECURE-DIR&gt;/example.com.key.backup</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# cp ~/example.com.key &lt;SECURE-DIR&gt;/example.com.key.backup</span></span></code></pre></div>
</div></li>
<li>
<p>Create a Certificate Signing Request (CSR) file.</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3992cb0&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fb3992cb0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# openssl req -new -sha256 -key ~/example.com.key -out ~/example.com.csr</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root# openssl req -new -sha256 -key ~/example.com.key -out ~/example.com.csr</span></span></code></pre></div>
</div></li>
<li>
<p>Request a certificate from a CA or your internal security group, providing the CSR file (<strong>example.com.csr</strong>). As a reminder, never share private keys (<strong>.key</strong> files) directly with third parties.</p>
<p>The certificate needs to be PEM format rather than in the Windowscompatible PFX format. If you request the certificate from a CA website yourself, choose NGINX or Apache (if available) when asked to select the server platform for which to generate the certificate.</p>
</li>
<li>
<p>Copy or move the certificate file and associated key files to the <strong>/etc/nginx/ssl</strong> directory on the NGINXPlus server.</p>
</li>
</ol>
<p><span id="config-files"></span></p>
<h2 
id="creating-and-modifying-configuration-files">Creating and Modifying Configuration Files  <a class="headerlink float-right" href="#creating-and-modifying-configuration-files" title="Creating and Modifying Configuration Files"><i class="fas fa-link fa-xs"></i></a>
</h2><p>To reduce errors, this guide has you copy directives from files provided by NGINX into your configuration files, instead of using a text editor to type in the directives yourself. Then you go through the sections in this guide (starting with <a href="#virtual-servers">Configuring Virtual Servers for HTTP and HTTPS Traffic</a>) to learn how to modify the directives as required for your deployment.</p>
<p>As provided, there is one file for basic load balancing (with NGINX Open Source or NGINXPlus) and one file for enhanced load balancing (with NGINXPlus). If you are installing and configuring NGINX Open Source or NGINXPlus on a fresh Linux system and using it only to load balance Node.js traffic, you can use the provided file as your main configuration file, which by convention is called <strong>/etc/nginx/nginx.conf</strong>.</p>
<p>We recommend, however, that instead of a single configuration file you use the scheme that is set up automatically when you install an NGINXPlus package, especially if you already have an existing NGINX Open Source or NGINXPlus deployment or plan to expand your use of NGINX Open Source or NGINXPlus to other purposes in future. In the conventional scheme, the main configuration file is still called <strong>/etc/nginx/nginx.conf</strong>, but instead of including all directives in it, you create separate configuration files for different functions and store the files in the <strong>/etc/nginx/conf.d</strong> directory. You then use the <code>include</code> directive in the appropriate contexts of the main file to read in the contents of the functionspecific files.</p>
<p>If you have just installed NGINX Open Source or NGINXPlus there is a default configuration file, <strong>default.conf</strong>, in the <strong>/etc/nginx/conf.d</strong> directory. This configuration defined there is not appropriate for the deployment described in this guide, but you want to leave a file with that name in the directory so it does not get replaced with a new version the next time you upgrade NGINX Open Source or NGINXPlus. To save a copy for future reference you can copy it to a new name without the <strong>.conf</strong> extension.</p>
<p>To download the complete configuration file for basic load balancing:</p>



<div class="code-block" data-mf="true" style="display: none;"><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb39d7658&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb39d7658">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root# cd /etc/nginx/conf.d
</span></span><span class="line"><span class="cl">root# curl https://www.nginx.com/resource/conf/nodejs-basic.conf &gt; nodejs-basic.conf</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root# cd /etc/nginx/conf.d
</span></span><span class="line"><span class="cl">root# curl https://www.nginx.com/resource/conf/nodejs-basic.conf &gt; nodejs-basic.conf</span></span></code></pre></div>
</div><p>To download the complete configuration file for enhanced load balancing:</p>



<div class="code-block" data-mf="true" style="display: none;"><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3a04130&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3a04130">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root# cd /etc/nginx/conf.d
</span></span><span class="line"><span class="cl">root# curl https://www.nginx.com/resource/conf/nodejs-enhanced.conf &gt; nodejs-enhanced.conf</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root# cd /etc/nginx/conf.d
</span></span><span class="line"><span class="cl">root# curl https://www.nginx.com/resource/conf/nodejs-enhanced.conf &gt; nodejs-enhanced.conf</span></span></code></pre></div>
</div><p>(You can also access the URL in a browser and and copy the text into the indicated file.)</p>
<p><strong>Note:</strong> If you download both files, place only one of them in the <strong>/etc/nginx/conf.d</strong> directory.</p>
<p>To set up the conventional configuration scheme, add an <code>http</code> configuration block in the main <strong>nginx.conf</strong> file, if it does not already exist. (The standard placement is below any global directives.) Add this <a href="https://nginx.org/en/docs/ngx_core_module.html#include" target="_blank" rel="noopener">include</a> directive with the appropriate filename:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3a32f30&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3a32f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">include</span> <span class="s">conf.d/nodejs-(basic|enhanced).conf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">include</span> <span class="s">conf.d/nodejs-(basic|enhanced).conf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/ngx_core_module.html#include" target="_blank" rel="noopener">include</a></p>
<p>You can also use wildcard notation to reference all files that pertain to a certain function or traffic type in the appropriate context block. For example, if you name all HTTP configuration files <strong><em>function</em>http.conf</strong>, this is an appropriate <code>include</code> directive:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3a62118&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3a62118">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">include</span> <span class="s">conf.d/*-http.conf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">include</span> <span class="s">conf.d/*-http.conf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>For reference purposes, the full configuration files are also provided in this document:</p>
<ul>
<li><a href="#full-configuration-basic">Full Configuration for Basic Load Balancing</a></li>
<li><a href="#full-configuration-enhanced">Full Configuration for Enhanced Load Balancing</a></li>
</ul>
<p>We recommend, however, that you do not copy text directly from this document. It does not necessarily use the same mechanisms for positioning text (such as line breaks and white space) as text editors do. In text copied into an editor, lines might run together and indenting of child statements in configuration blocks might be missing or inconsistent. The absence of formatting does not present a problem for NGINX Open Source or NGINXPlus, because (like many compilers) they ignore white space during parsing, relying solely on semicolons and curly braces as delimiters. The absence of white space does, however, make it more difficult for humans to interpret the configuration and modify it without making mistakes.</p>
<h3 
id="about-reloading-updated-configuration">About Reloading Updated Configuration  <a class="headerlink float-right" href="#about-reloading-updated-configuration" title="About Reloading Updated Configuration"><i class="fas fa-link fa-xs"></i></a>
</h3><p>We recommend that each time you complete a set of updates to the configuration, you run the <span style="white-space: nowrap;"><code>nginx -t</code></span> command to test the configuration file for syntactic validity.</p>



<div class="code-block" data-mf="true" style="display: none;"><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3aa2858&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3aa2858">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root# nginx -t
</span></span><span class="line"><span class="cl">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
</span></span><span class="line"><span class="cl">nginx: configuration file /etc/nginx/nginx.conf test is successful</span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root# nginx -t
</span></span><span class="line"><span class="cl">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
</span></span><span class="line"><span class="cl">nginx: configuration file /etc/nginx/nginx.conf test is successful</span></span></code></pre></div>
</div><p>To tell NGINX Open Source or NGINXPlus to start using the new configuration, run one of the following commands:</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3acfee8&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fb3acfee8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">root</span><span class="c1"># nginx -s reload</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">root</span><span class="c1"># nginx -s reload</span></span></span></code></pre></div>
</div><p>or</p>



<div class="code-block" data-mf="true" style="display: none;">
    <div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3af8758&#34;)" class="code-copy-button" type="button">Copy</button>
        <div class="highlight-v2 single-line" id="id-18440f1fb3af8758">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">root</span><span class="c1"># service nginx reload</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">root</span><span class="c1"># service nginx reload</span></span></span></code></pre></div>
</div><p><span id="basic"></span></p>
<h2 
id="configuring-basic-load-balancing-with-nginx-open-source-or-nginx-plus">Configuring Basic Load Balancing with NGINX Open Source or NGINX Plus  <a class="headerlink float-right" href="#configuring-basic-load-balancing-with-nginx-open-source-or-nginx-plus" title="Configuring Basic Load Balancing with NGINX Open Source or NGINX Plus"><i class="fas fa-link fa-xs"></i></a>
</h2><p>This section explains how to set up NGINX Open Source or NGINXPlus as a load balancer in front of two Node.js servers. The instructions in the first two sections are mandatory:</p>
<ul>
<li><a href="#virtual-servers">Configuring Virtual Servers for HTTP and HTTPS Traffic</a></li>
<li><a href="#load-balancing-basic">Configuring Basic Load Balancing</a></li>
</ul>
<p>The instructions in the remaining sections are optional, depending on the requirements of your application:</p>
<ul>
<li><a href="#session-persistence-basic">Configuring Basic Session Persistence</a></li>
<li><a href="#websocket">Configuring Proxy of WebSocket Traffic</a></li>
<li><a href="#caching">Configuring Content Caching</a></li>
<li><a href="#http2">Configuring HTTP/2 Support</a></li>
</ul>
<p>The complete configuration file appears in <a href="#full-configuration-basic">Full Configuration for Basic Load Balancing</a>.</p>
<p>If you are using NGINXPlus, you can configure additional enhanced features after you complete the configuration of basic load balancing. See <a href="#enhanced">Configuring Enhanced Load Balancing with NGINXPlus</a>.</p>
<p><span id="virtual-servers"></span></p>
<h3 
id="configuring-virtual-servers-for-http-and-https-traffic">Configuring Virtual Servers for HTTP and HTTPS Traffic  <a class="headerlink float-right" href="#configuring-virtual-servers-for-http-and-https-traffic" title="Configuring Virtual Servers for HTTP and HTTPS Traffic"><i class="fas fa-link fa-xs"></i></a>
</h3><p>These directives define virtual servers for HTTP and HTTPS traffic in separate <code>server</code> blocks in the toplevel <code>http</code> configuration block. All HTTP requests are redirected to the HTTPS server.</p>
<ol>
<li>
<p>Configure a <code>server</code> block that listens for requests for <strong>&ldquo;<a href="https://example.com" target="_blank" rel="noopener">https://example.com</a>&rdquo;</strong> received on port443.</p>
<p>The <code>ssl_certificate</code> and <code>ssl_certificate_key</code> directives are required; substitute the names of the certificate and private key you chose in <a href="#tls-certificate">Configuring an SSL/TLS Certificate for Client Traffic</a>.</p>
<p>The other directives are optional but recommended.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3b6cab8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3b6cab8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate</span>           <span class="s">/etc/nginx/ssl/&lt;certificate-name&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate_key</span>       <span class="s">/etc/nginx/ssl/&lt;private-key&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_session_cache</span>         <span class="s">shared:SSL:1m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_prefer_server_ciphers</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate</span>           <span class="s">/etc/nginx/ssl/&lt;certificate-name&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate_key</span>       <span class="s">/etc/nginx/ssl/&lt;private-key&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_session_cache</span>         <span class="s">shared:SSL:1m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_prefer_server_ciphers</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#listen" target="_blank" rel="noopener">listen</a>, <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server" target="_blank" rel="noopener">server</a>, <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server_name" target="_blank" rel="noopener">server_name</a>, <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_certificate" target="_blank" rel="noopener">ssl_certificate</a>, <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_certificate_key" target="_blank" rel="noopener">ssl_certificate_key</a>, <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_prefer_server_ciphers" target="_blank" rel="noopener">ssl_prefer_server_ciphers</a>, <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_cache" target="_blank" rel="noopener">ssl_session_cache</a></p>
</li>
<li>
<p>Configure a <code>server</code> block that permanently redirects requests received on port80 for <strong>&ldquo;<a href="http://example.com" target="_blank" rel="noopener">http://example.com</a>&rdquo;</strong> to the HTTPS server, which is defined in the next step.</p>
<p>If you&rsquo;re not using SSL/TLS for client connections, omit the <code>location</code> block. When instructed in the remainder of this guide to add directives to the <code>server</code> block for HTTPS traffic, add them to this block instead.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3bfac28&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3bfac28">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="kn">proxy_set_header</span> <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1"># Redirect all HTTP requests to HTTPS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://</span><span class="nv">$server_name$request_uri</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="kn">proxy_set_header</span> <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="c1"># Redirect all HTTP requests to HTTPS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://</span><span class="nv">$server_name$request_uri</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#location" target="_blank" rel="noopener">location</a>, <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_http_version" target="_blank" rel="noopener">proxy_http_version</a>, <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header" target="_blank" rel="noopener">proxy_set_header</a>, <a href="https://nginx.org/en/docs/http/ngx_http_rewrite_module.html#return" target="_blank" rel="noopener">return</a></p>
</li>
</ol>
<p>For more information on configuring SSL/TLS, see the <a href="/nginx/admin-guide/security-controls/terminating-ssl-http/">NGINXPlus AdminGuide</a> and the reference documentation for the HTTP <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html" target="_blank" rel="noopener">SSL/TLS</a> module.</p>
<p><span id="load-balancing-basic"></span></p>
<h3 
id="configuring-basic-load-balancing">Configuring Basic Load Balancing  <a class="headerlink float-right" href="#configuring-basic-load-balancing" title="Configuring Basic Load Balancing"><i class="fas fa-link fa-xs"></i></a>
</h3><p>To configure load balancing, you first create a named &ldquo;upstream group,&rdquo; which lists the backend servers. You then set up NGINX Open Source or NGINXPlus as a reverse proxy and load balancer by referring to the upstream group in one or more <code>proxy_pass</code> directives.</p>
<ol>
<li>
<p>Configure an upstream group called <strong>nodejs</strong> with two Node.js application servers listening on port8080, one on IP address192.168.33.11 and the other on192.168.33.12.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3c541d8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3c541d8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#server" target="_blank" rel="noopener">server</a>, <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#upstream" target="_blank" rel="noopener">upstream</a></p>
</li>
<li>
<p>In the <code>server</code> block for HTTPS traffic that we created in <a href="#virtual-servers">Configuring Virtual Servers for HTTP and HTTPS Traffic</a>, include two <code>location</code> blocks:</p>
<ul>
<li>The first one matches HTTPS requests in which the path starts with <strong>/webapp/</strong>, and proxies them to the <strong>nodejs</strong> upstream group we created in the previous step.</li>
<li>The second one funnels all traffic to the first <code>location</code> block, by doing a temporary redirect of all requests for <strong>&ldquo;<a href="http://example.com/%22" target="_blank" rel="noopener">http://example.com/"</a></strong>.</li>
</ul>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3c9aac0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3c9aac0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">location</span> <span class="p">=</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">return</span> <span class="mi">302</span> <span class="s">/webapp/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">location</span> <span class="p">=</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">return</span> <span class="mi">302</span> <span class="s">/webapp/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#location" target="_blank" rel="noopener">location</a>, <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass" target="_blank" rel="noopener">proxy_pass</a>, <a href="https://nginx.org/en/docs/http/ngx_http_rewrite_module.html#return" target="_blank" rel="noopener">return</a></p>
<p>Note that these blocks handle only standard HTTPS traffic. If you want to load balance WebSocket traffic, you need to add another <code>location</code> block as described in <a href="#websocket">Configuring Proxy of WebSocket Traffic</a>.</p>
</li>
</ol>
<p>By default, NGINX Open Source and NGINXPlus use the Round Robin algorithm for load balancing among servers. The load balancer runs through the list of servers in the upstream group in order, forwarding each new request to the next server. In our example, the first request goes to192.168.33.11, the second to192.168.33.12, the third to192.168.33.11, and so on. For information about the other available loadbalancing algorithms, see the <a href="../../../admin-guide/load-balancer/http-load-balancer/#choosing-a-load-balancing-method">NGINXPlus AdminGuide</a>.</p>
<p>In NGINXPlus, you can also set up dynamic reconfiguration of an upstream group when the set of backend servers changes, using the Domain Name System (DNS) or an API; see <a href="#reconfiguration">Enabling Dynamic Reconfiguration of Upstream Groups</a>.</p>
<p>For more information on proxying and load balancing, see <a href="http://localhost:1313/nginx/admin-guide/web-server/reverse-proxy/">NGINX Reverse Proxy</a> and <a href="/nginx/admin-guide/load-balancer/http-load-balancer/">HTTP Load Balancing</a> in the NGINXPlus AdminGuide, and the reference documentation for the HTTP <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html" target="_blank" rel="noopener">Proxy</a> and <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html" target="_blank" rel="noopener">Upstream</a> modules.</p>
<p><span id="session-persistence-basic"></span></p>
<h3 
id="configuring-basic-session-persistence">Configuring Basic Session Persistence  <a class="headerlink float-right" href="#configuring-basic-session-persistence" title="Configuring Basic Session Persistence"><i class="fas fa-link fa-xs"></i></a>
</h3><p>If your application requires basic session persistence (also known as <em>sticky sessions</em>), you can implement it in NGINX Open Source with the IP Hash loadbalancing algorithm. (NGINXPlus offers a more sophisticated form of session persistence, as described in <a href="#session-persistence-advanced">Configuring Advanced Session Persistence</a>.)</p>
<p>With the IP Hash algorithm, for each request NGINX calculates a hash based on the client&rsquo;s IP address, and associates the hash with one of the upstream servers. It sends all requests with that hash to that server, thus establishing session persistence.</p>
<p>If the client has an IPv6 address, the hash is based on the entire address. If it has an IPv4 address, the hash is based on just the first three octets of the address. This is designed to optimize for ISP clients that are assigned IP addresses dynamically from a subnetwork (/24) range. However, it is not effective in these cases:</p>
<ul>
<li>The majority of the traffic to your site is coming from one forward proxy or from clients on the same /24 network, because in that case IP Hash maps all clients to the same server.</li>
<li>A client&rsquo;s IP address can change during the session, for example when a mobile client switches from a WiFi network to a cellular one.</li>
</ul>
<p>To configure session persistence in NGINX, add the <code>ip_hash</code> directive to the <code>upstream</code> block created in <a href="#load-balancing-basic">Configuring Basic Load Balancing</a>:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3d080c0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3d080c0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ip_hash</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ip_hash</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#ip_hash" target="_blank" rel="noopener">ip_hash</a></p>
<p>You can also use the Hash loadbalancing method for session persistence, with the hash based on any combination of text and <a href="https://nginx.org/en/docs/varindex.html" target="_blank" rel="noopener">NGINX variables</a> you specify. For example, you can hash on full (fouroctet) client IP addresses with the following configuration.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3d45538&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3d45538">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">hash</span> <span class="nv">$remote_addr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">hash</span> <span class="nv">$remote_addr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#hash" target="_blank" rel="noopener">hash</a></p>
<p><span id="websocket"></a></p>
<h3 
id="configuring-proxy-of-websocket-traffic">Configuring Proxy of WebSocket Traffic  <a class="headerlink float-right" href="#configuring-proxy-of-websocket-traffic" title="Configuring Proxy of WebSocket Traffic"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The WebSocket protocol (defined in <a href="https://tools.ietf.org/html/rfc6455" target="_blank" rel="noopener">RFC 6455</a>) enables simultaneous twoway communication over a single TCP connection between clients and servers, where each side can send data independently from the other. To initiate the WebSocket connection, the client sends a handshake request to the server, upgrading the request from standard HTTP to WebSocket. The connection is established if the handshake request passes validation, and the server accepts the request. When a WebSocket connection is created, a browser client can send data to a server while simultaneously receiving data from that server.</p>
<p>The Node.js app server supports WebSocket out of the box, so no additional Node.js configuration is required. If you want to use NGINX Open Source or NGINXPlus to proxy WebSocket traffic to your Node.js application servers, add the directives discussed in this section.</p>
<p>NGINX Open Source and NGINXPlus by default use HTTP/1.0 for upstream connections. To be proxied correctly, WebSocket connections require HTTP/1.1 along with some other configuration directives that set HTTP headers:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3db7570&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3db7570">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">map</span> <span class="nv">$http_upgrade</span> <span class="nv">$connection_upgrade</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">default</span> <span class="s">upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">&#39;&#39;</span>      <span class="s">close</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/wstunnel/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_set_header</span> <span class="s">Upgrade</span> <span class="nv">$http_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="nv">$connection_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">map</span> <span class="nv">$http_upgrade</span> <span class="nv">$connection_upgrade</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">default</span> <span class="s">upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">&#39;&#39;</span>      <span class="s">close</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/wstunnel/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_set_header</span> <span class="s">Upgrade</span> <span class="nv">$http_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="nv">$connection_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#location" target="_blank" rel="noopener">location</a>, <a href="https://nginx.org/en/docs/http/ngx_http_map_module.html#map" target="_blank" rel="noopener">map</a>, <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_http_version" target="_blank" rel="noopener">proxy_http_version</a>, <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass" target="_blank" rel="noopener">proxy_pass</a>, <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header" target="_blank" rel="noopener">proxy_set_header</a></p>
<p>The first <code>proxy_set_header</code> directive is needed because the <code>Upgrade</code> request header is <span style="white-space: nowrap;">hop-by-hop</span>; that is, the HTTP specification explicitly forbids proxies from forwarding it. This directive overrides the prohibition.</p>
<p>The second <code>proxy_set_header</code> directive sets the <code>Connection</code> header to a value that depends on the test in the <code>map</code> block: if the request has an <code>Upgrade</code> header, the <code>Connection</code> header is set to <code>upgrade</code>; otherwise, it is set to <code>close</code>.</p>
<p>For more information about proxying WebSocket traffic, see <a href="https://nginx.org/en/docs/http/websocket.html" target="_blank" rel="noopener">WebSocket proxying</a> and <a href="https://www.nginx.com/blog/websocket-nginx/" target="_blank" rel="noopener">NGINX as a WebSocket Proxy</a>.</p>
<p><span id="caching"></span></p>
<h3 
id="configuring-content-caching">Configuring Content Caching  <a class="headerlink float-right" href="#configuring-content-caching" title="Configuring Content Caching"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Caching responses from your Node.js app servers can both improve response time to clients and reduce load on the servers, because eligible responses are served immediately from the cache instead of being generated again on the server. There are a variety of useful directives that can be used to finetune caching behavior; for a detailed discussion, see <a href="https://www.nginx.com/blog/nginx-caching-guide/" target="_blank" rel="noopener">A Guide to Caching with NGINX</a>.</p>
<p>To enable basic caching of responses from the Node.js app server, add the following configuration:</p>
<ol>
<li>
<p>Include the <code>proxy_cache_path</code> directive to create the local disk directory <strong>/tmp/NGINX_cache/</strong> for use as a cache. The <code>keys_zone</code> parameter allocates 10megabytes (MB) of shared memory for a zone called <strong>backcache</strong>, which is used to store cache keys and metadata such as usage timers. A 1MB zone can store data for about 8,000keys.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3e0b530&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3e0b530">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">proxy_cache_path</span> <span class="s">/tmp/NGINX_cache/</span> <span class="s">keys_zone=backcache:10m</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">proxy_cache_path</span> <span class="s">/tmp/NGINX_cache/</span> <span class="s">keys_zone=backcache:10m</span><span class="p">;</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_path" target="_blank" rel="noopener">proxy_cache_path</a></p>
</li>
<li>
<p>In the <code>location</code> block that matches HTTPS requests in which the path starts with <strong>/webapp/</strong>, include the <code>proxy_cache</code> directive to reference the cache created in the previous step.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3e3e980&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3e3e980">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_cache</span> <span class="s">backcache</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_cache</span> <span class="s">backcache</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache" target="_blank" rel="noopener">proxy_cache</a>, <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass" target="_blank" rel="noopener">proxy_pass</a></p>
</li>
</ol>
<p>For more complete information on caching, refer to the <a href="http://localhost:1313/nginx/admin-guide/content-cache/content-caching/">NGINXPlus AdminGuide</a> and the reference documentation for the HTTP <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html" target="_blank" rel="noopener">Proxy</a> module.</p>
<p><span id="http2"></span></p>
<h3 
id="configuring-http2-support">Configuring HTTP/2 Support  <a class="headerlink float-right" href="#configuring-http2-support" title="Configuring HTTP/2 Support"><i class="fas fa-link fa-xs"></i></a>
</h3><p>HTTP/2 is fully supported in both NGINX1.9.5 and later, and NGINXPlus R7 and later. As always, we recommend you run the latest version of software to take advantage of improvements and bug fixes.</p>
<ul>
<li>
<p>If using NGINX Open Source, note that in version1.9.5 and later the SPDY module is completely removed from the codebase and replaced with the <a href="https://nginx.org/en/docs/http/ngx_http_v2_module.html" target="_blank" rel="noopener">HTTP/2</a> module. After upgrading to version1.9.5 or later, you can no longer configure NGINX Open Source to use SPDY. If you want to keep using SPDY, you need to compile NGINX Open Source from the sources in the <a href="https://nginx.org/en/download.html" target="_blank" rel="noopener">NGINX1.8.x branch</a>.</p>
</li>
<li>
<p>If using NGINXPlus, in R11 and later the <strong>nginxplus</strong> package supports HTTP/2 by default, and the <strong>nginxplusextras</strong> package available in previous releases is deprecated by separate <a href="https://www.nginx.com/products/nginx/modules/" target="_blank" rel="noopener">dynamic modules</a> authored by NGINX.</p>
<p>In NGINXPlus R8 through R10, the <strong>nginxplus</strong> and <strong>nginxplusextras</strong> packages support HTTP/2 by default.</p>
<p>In NGINXPlus R8 and later, NGINXPlus supports HTTP/2 by default, and does not support SPDY.</p>
<p>If using NGINXPlus R7, you must install the <strong>nginxplushttp2</strong> package instead of the <strong>nginxplus</strong> or <strong>nginxplusextras</strong> package.</p>
</li>
</ul>
<p>To enable HTTP/2 support, add the <a href="https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2" target="_blank" rel="noopener">http2</a> directive in the <code>server</code> block for HTTPS traffic that we created in <a href="#virtual-servers">Configuring Virtual Servers for HTTP and HTTPS Traffic</a>, so that it looks like this:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3e911d0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3e911d0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">http2</span>  <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">http2</span>  <span class="no">on</span><span class="p">;</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2" target="_blank" rel="noopener">http2</a></p>
<p>To verify that HTTP/2 translation is working, you can use the &ldquo;HTTP/2 and SPDY indicator&rdquo; plugin available for <a href="https://chrome.google.com/webstore/detail/http2-and-spdy-indicator/mpbpobfflnpcgagjijhmgnchggcjblin?hl=en" target="_blank" rel="noopener">Google Chrome</a> and <a href="https://addons.mozilla.org/en-US/firefox/addon/http2-indicator/" target="_blank" rel="noopener">Firefox</a>.</p>
<p><span id="full-configuration-basic"></span></p>
<h3 
id="full-configuration-for-basic-load-balancing">Full Configuration for Basic Load Balancing  <a class="headerlink float-right" href="#full-configuration-for-basic-load-balancing" title="Full Configuration for Basic Load Balancing"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The full configuration for basic load balancing appears here for your convenience. It goes in the <code>http</code> context. The complete file is available for <a href="https://www.nginx.com/resource/conf/nodejs-basic.conf" target="_blank" rel="noopener">download</a> from the NGINX website.</p>
<p>We recommend that you do not copy text directly from this document, but instead use the method described in <a href="#config-files">Creating and Modifying Configuration Files</a> to include these directives in your configuration add an <code>include</code> directive to the <code>http</code> context of the main <strong>nginx.conf</strong> file to read in the contents of <strong>/etc/nginx/conf.d/nodejsbasic.conf</strong>.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3f88ac0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3f88ac0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">proxy_cache_path</span> <span class="s">/tmp/NGINX_cache/</span> <span class="s">keys_zone=backcache:10m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">map</span> <span class="nv">$http_upgrade</span> <span class="nv">$connection_upgrade</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">default</span> <span class="s">upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">&#39;</span> <span class="s">&#39;</span>     <span class="s">close</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Use IP Hash for session persistence
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">ip_hash</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># List of Node.js application servers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Redirect all HTTP requests to HTTPS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://</span><span class="nv">$server_name$request_uri</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">http2</span>  <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate</span>           <span class="s">/etc/nginx/ssl/certificate-name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate_key</span>       <span class="s">/etc/nginx/ssl/private-key</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_session_cache</span>         <span class="s">shared:SSL:1m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_prefer_server_ciphers</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Return a temporary redirect to &#39;/webapp/&#39; when user requests &#39;/&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="p">=</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="kn">return</span> <span class="mi">302</span> <span class="s">/webapp/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Load balance requests for &#39;/webapp/&#39; across Node.js app servers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_cache</span> <span class="s">backcache</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># WebSocket configuration
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/wstunnel/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_pass</span> <span class="s">https://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_set_header</span> <span class="s">Upgrade</span> <span class="nv">$http_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="nv">$connection_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">proxy_cache_path</span> <span class="s">/tmp/NGINX_cache/</span> <span class="s">keys_zone=backcache:10m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">map</span> <span class="nv">$http_upgrade</span> <span class="nv">$connection_upgrade</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">default</span> <span class="s">upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">&#39;</span> <span class="s">&#39;</span>     <span class="s">close</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Use IP Hash for session persistence
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">ip_hash</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># List of Node.js application servers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Redirect all HTTP requests to HTTPS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://</span><span class="nv">$server_name$request_uri</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">http2</span>  <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate</span>           <span class="s">/etc/nginx/ssl/certificate-name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate_key</span>       <span class="s">/etc/nginx/ssl/private-key</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_session_cache</span>         <span class="s">shared:SSL:1m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_prefer_server_ciphers</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Return a temporary redirect to &#39;/webapp/&#39; when user requests &#39;/&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="p">=</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="kn">return</span> <span class="mi">302</span> <span class="s">/webapp/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Load balance requests for &#39;/webapp/&#39; across Node.js app servers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_cache</span> <span class="s">backcache</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># WebSocket configuration
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/wstunnel/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_pass</span> <span class="s">https://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_set_header</span> <span class="s">Upgrade</span> <span class="nv">$http_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="nv">$connection_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p><span id="enhanced"></span></p>
<h2 
id="configuring-enhanced-load-balancing-with-nginx-plus">Configuring Enhanced Load Balancing with NGINX Plus  <a class="headerlink float-right" href="#configuring-enhanced-load-balancing-with-nginx-plus" title="Configuring Enhanced Load Balancing with NGINX Plus"><i class="fas fa-link fa-xs"></i></a>
</h2><p>This section explains how to configure enhanced load balancing with some of the extended features in NGINXPlus.</p>
<p><strong>Note:</strong> Before setting up the enhanced features described in this section, you must complete the instructions for basic load balancing in these two sections:</p>
<ul>
<li><a href="#virtual-servers">Configuring Virtual Servers for HTTP and HTTPS Traffic</a></li>
<li><a href="#load-balancing-basic">Configuring Basic Load Balancing</a></li>
</ul>
<p>Except as noted, all optional basic features (described in the other subsections of <a href="#basic">Configuring Basic Load Balancing in NGINX Open Source and NGINXPlus</a>) can be combined with the enhanced features described here.</p>
<ul>
<li><a href="#session-persistence-advanced">Configuring Advanced Session Persistence</a></li>
<li><a href="#health-checks">Configuring Application Health Checks</a></li>
<li><a href="#live-activity-monitoring">Enabling Live Activity Monitoring</a></li>
<li><a href="#reconfiguration">Enabling Dynamic Reconfiguration of Upstream Groups</a></li>
</ul>
<p>The complete configuration file appears in <a href="#full-configuration-enhanced">Full Configuration for Enhanced Load Balancing</a>.</p>
<p><span id="session-persistence-advanced"></span></p>
<h3 
id="configuring-advanced-session-persistence">Configuring Advanced Session Persistence  <a class="headerlink float-right" href="#configuring-advanced-session-persistence" title="Configuring Advanced Session Persistence"><i class="fas fa-link fa-xs"></i></a>
</h3><p>NGINXPlus has more sophisticated session persistence methods than open source NGINX, implemented in three variants of the <code>sticky</code> directive. In the following example, we add the <code>sticky cookie</code> directive to the upstream group we created in <a href="#load-balancing-basic">Configuring Basic Load Balancing</a>.</p>
<ol>
<li>
<p>Remove or comment out the <code>ip_hash</code> directive, leaving only the <code>server</code> directives:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb3feb4e0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb3feb4e0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#ip_hash;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#ip_hash;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#server" target="_blank" rel="noopener">server</a>, <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#upstream" target="_blank" rel="noopener">upstream</a></p>
</li>
<li>
<p>Configure session persistence that uses the <code>sticky cookie</code> directive.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb4039eb0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb4039eb0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">sticky</span> <span class="s">cookie</span> <span class="s">srv_id</span> <span class="s">expires=1h</span> <span class="s">domain=.example.com</span> <span class="s">path=/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">sticky</span> <span class="s">cookie</span> <span class="s">srv_id</span> <span class="s">expires=1h</span> <span class="s">domain=.example.com</span> <span class="s">path=/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#sticky" target="_blank" rel="noopener"><code>sticky cookie</code></a>, <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#zone" target="_blank" rel="noopener">zone</a></p>
</li>
</ol>
<p>With this method, NGINXPlus adds an HTTP session cookie to the first response to a given client from the upstream group, identifying which server generated the response (in an encoded fashion). Subsequent requests from the client include the cookie value and NGINXPlus uses it to route the request to the same upstream server, thereby achieving session persistence.</p>
<p>The <code>zone</code> directive creates a shared memory zone for storing information about sessions. The amount of memory allocated here, 64KB determines how many sessions can be stored at a time (the number varies by platform). The name assigned to the zone here, <code>nodejs</code> must be unique for each <code>sticky</code> directive.</p>
<p>The first parameter to <code>sticky cookie</code> (in the example, <code>srv_id</code>) sets the name of the cookie to be set or inspected. The <code>expires</code> parameter tells the browser how long the cookie is valid, here one hour. The <code>domain</code> parameter defines the domain and the <code>path</code> parameter defines the URL path for which the cookie is set.</p>
<p>For more information about session persistence, see the <a href="../../../admin-guide/load-balancer/http-load-balancer/#sticky">NGINXPlus AdminGuide</a>.</p>
<p><span id="health-checks"></span></p>
<h3 
id="configuring-application-health-checks">Configuring Application Health Checks  <a class="headerlink float-right" href="#configuring-application-health-checks" title="Configuring Application Health Checks"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Health checks are outofband HTTP requests sent to a server at fixed intervals. They are used to determine whether a server is responsive and functioning correctly, without requiring an actual request from a client.</p>
<p>Because the <code>health_check</code> directive is placed in the <code>location</code> block, we can enable different health checks for each application.</p>
<ol>
<li>
<p>In the <code>location</code> block that matches HTTPS requests in which the path starts with <strong>/webapp/</strong> (created in <a href="#load-balancing-basic">Configuring Basic Load Balancing</a>), add the <code>health_check</code> directive.</p>
<p>Here we configure NGINXPlus to send an outofband request for the toplevel URI <strong>/</strong> (slash) to each of the servers in the <strong>nodejs</strong> upstream group every 5seconds (the default URI and frequency). If a server does not respond correctly, it is marked down and NGINXPlus stops sending requests to it until it passes a subsequent health check. We include the <code>match</code> parameter so we can define a nondefault set of healthcheck tests (we define them in the next step).</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb4088498&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb4088498">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_cache</span> <span class="s">backcache</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">health_check</span> <span class="s">match=health_check</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_cache</span> <span class="s">backcache</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">health_check</span> <span class="s">match=health_check</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_hc_module.html#health_check" target="_blank" rel="noopener">health_check</a></p>
</li>
<li>
<p>In the <code>http</code> context, include a <code>match</code> directive to define the tests that a server must pass to be considered functional. In this example, it must return status code <code>200</code>, the <span style="white-space: nowrap;"><code>Content-Type</code></span> response header must contain <code>text/html</code>, and the response body must match the indicated character string.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb40c1e78&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb40c1e78">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">match</span> <span class="s">health_check</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="kn">status</span> <span class="mi">200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="kn">header</span> <span class="s">Content-Type</span> <span class="p">~</span> <span class="sr">text/html;</span>
</span></span><span class="line"><span class="cl">     <span class="s">body</span> <span class="p">~</span> <span class="sr">&#34;Hello</span> <span class="s">world&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">match</span> <span class="s">health_check</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="kn">status</span> <span class="mi">200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="kn">header</span> <span class="s">Content-Type</span> <span class="p">~</span> <span class="sr">text/html;</span>
</span></span><span class="line"><span class="cl">     <span class="s">body</span> <span class="p">~</span> <span class="sr">&#34;Hello</span> <span class="s">world&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_hc_module.html#match" target="_blank" rel="noopener">match</a></p>
</li>
<li>
<p>In the <strong>nodejs</strong> upstream group, add the following <code>zone</code> directive as necessary (if you configured <a href="#session-persistence-advanced">advanced session persistence</a> you already added it). It creates a shared memory zone that stores the group&rsquo;s configuration and runtime state, which are accessible to all worker processes.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb40feb20&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb40feb20">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#zone" target="_blank" rel="noopener">zone</a></p>
</li>
</ol>
<p>NGINXPlus also has a slowstart feature that is a useful auxiliary to health checks. When a failed server recovers, or a new server is added to the upstream group, NGINXPlus slowly ramps up the traffic to it over a defined period of time. This gives the server time to &ldquo;warm up&rdquo; without being overwhelmed by more connections than it can handle as it starts up. For more information, see the <a href="../../../admin-guide/load-balancer/http-load-balancer/#slow_start">NGINXPlus AdminGuide</a>.</p>
<p>For example, to set a slowstart period of 30seconds for your Node.js application servers, include the <code>slow_start</code> parameter to their <code>server</code> directives:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb4132740&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb4132740">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;upstream&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span> <span class="s">slow_start=30s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span> <span class="s">slow_start=30s</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;upstream&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span> <span class="s">slow_start=30s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span> <span class="s">slow_start=30s</span><span class="p">;</span></span></span></code></pre></div>
</div><p>Parameter documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#slow_start" target="_blank" rel="noopener">slow_start</a></p>
<p>For information about customizing health checks, see the <a href="http://localhost:1313/nginx/admin-guide/load-balancer/http-health-check/">NGINXPlus AdminGuide</a>.</p>
<p><span id="live-activity-monitoring"></span></p>
<h3 
id="enabling-live-activity-monitoring">Enabling Live Activity Monitoring  <a class="headerlink float-right" href="#enabling-live-activity-monitoring" title="Enabling Live Activity Monitoring"><i class="fas fa-link fa-xs"></i></a>
</h3><p>NGINXPlus includes a live activity monitoring interface that provides key load and performance metrics in real time, including TCP metrics in <span style="white-space: nowrap;">NGINX Plus R6</span> and later. Statistics are reported through a RESTful JSON interface, making it very easy to feed the data to a custom or thirdparty monitoring tool. There is also a builtin dashboard. Follow these instructions to deploy it.</p>
<img src="/nginx/images/nginx-plus-dashboard-r19-overview.png" alt="Dashboard tab in NGINX Plus live activity monitoring dashboard" style="border:2px solid #666666; padding:2px; margin:2px;" />
<p>For more information about live activity monitoring, see the <a href="http://localhost:1313/nginx/admin-guide/monitoring/live-activity-monitoring/">NGINXPlus AdminGuide</a>.</p>
<p>The quickest way to configure the module and the builtin NGINXPlus dashboard is to download the sample configuration file from the NGINX website and modify it as necessary. For more complete instructions, see <a href="https://www.nginx.com/blog/live-activity-monitoring-nginx-plus-3-simple-steps/" target="_blank" rel="noopener">Live Activity Monitoring of NGINXPlus in 3Simple Steps</a>.</p>
<ol>
<li>
<p>Download the <strong>status.conf</strong> file to the NGINXPlus server:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb41778b8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb41778b8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># cd /etc/nginx/conf.d
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">#</span> <span class="k">curl</span> <span class="s">https://www.nginx.com/resource/conf/status.conf</span> <span class="s">&gt;</span> <span class="s">status.conf</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># cd /etc/nginx/conf.d
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">#</span> <span class="k">curl</span> <span class="s">https://www.nginx.com/resource/conf/status.conf</span> <span class="s">&gt;</span> <span class="s">status.conf</span></span></span></code></pre></div>
</div></li>
<li>
<p>Customize the file for your deployment as specified by comments in the file. In particular, the default settings in the file allow anyone on any network to access the dashboard. We strongly recommend that you restrict access to the dashboard with one or more of the following methods:</p>
<ul>
<li>
<p><strong>IP addressbased access control lists (ACLs)</strong>. In the sample configuration file, uncomment the <code>allow</code> and <code>deny</code> directives, and substitute the address of your administrative network for 10.0.0.0/8. Only users on the specified network can access the status page.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb41a14b0&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb41a14b0">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">allow</span> <span class="mi">10</span><span class="s">.0.0.0/8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">deny</span> <span class="s">all</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">allow</span> <span class="mi">10</span><span class="s">.0.0.0/8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">deny</span> <span class="s">all</span><span class="p">;</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_access_module.html" target="_blank" rel="noopener">allow and deny</a></p>
</li>
<li>
<p><strong>HTTP Basic authentication</strong>. In the sample configuration file, uncomment the <code>auth_basic</code> and <code>auth_basic_user_file</code> directives and add user entries to the <strong>/etc/nginx/users</strong> file (for example, by using an <a href="https://httpd.apache.org/docs/2.4/programs/htpasswd.html" target="_blank" rel="noopener">htpasswd generator</a>). If you have an Apache installation, another option is to reuse an existing <strong>htpasswd</strong> file.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb41d3960&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb41d3960">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">auth_basic</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">auth_basic_user_file</span> <span class="s">/etc/nginx/users</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">auth_basic</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">auth_basic_user_file</span> <span class="s">/etc/nginx/users</span><span class="p">;</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_auth_basic_module.html#auth_basic" target="_blank" rel="noopener">auth_basic</a>, <a href="https://nginx.org/en/docs/http/ngx_http_auth_basic_module.html#auth_basic_user_file" target="_blank" rel="noopener">auth_basic_user_file</a></p>
</li>
<li>
<p><strong>Client certificates</strong>, which are part of a complete configuration of SSL/TLS. For more information, see the <a href="/nginx/admin-guide/security-controls/terminating-ssl-http/">NGINXPlus AdminGuide</a> and the documentation for the HTTP <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html" target="_blank" rel="noopener">SSL/TLS</a> module.</p>
</li>
<li>
<p><strong>Firewall</strong>. Configure your firewall to disallow outside access to the port for the dashboard (8080 in the sample configuration file).</p>
</li>
</ul>
</li>
<li>
<p>In the <strong>nodejs</strong> upstream group, include the <code>zone</code> directive as necessary (if you configured <a href="#session-persistence-advanced">advanced session persistence</a> or <a href="#health-checks">application health checks</a>, you already added it). It creates a shared memory zone that stores the group&rsquo;s configuration and runtime state, which are accessible to all worker processes.</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb422c740&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb422c740">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#zone" target="_blank" rel="noopener">zone</a></p>
</li>
<li>
<p>In the <code>server</code> block for HTTPS traffic (created in <a href="#virtual-servers">Configuring Virtual Servers for HTTP and HTTPS Traffic</a>), add the <code>status_zone</code> directive:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb425d098&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb425d098">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">status_zone</span> <span class="s">nodejs_server</span><span class="p">;</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">status_zone</span> <span class="s">nodejs_server</span><span class="p">;</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_status_module.html#status_zone" target="_blank" rel="noopener">status_zone</a></p>
</li>
</ol>
<p>When you reload the NGINXPlus configuration file, for example by running the <span style="white-space: nowrap;"><code>nginx -s reload</code></span> command, the NGINXPlus dashboard is available immediately at <span style="white-space: nowrap; font-weight: bold;">http://<em>nginx-plus-server-address</em>:8080</span>.</p>
<p><span id="reconfiguration"></span></p>
<h3 
id="enabling-dynamic-reconfiguration-of-upstream-groups">Enabling Dynamic Reconfiguration of Upstream Groups  <a class="headerlink float-right" href="#enabling-dynamic-reconfiguration-of-upstream-groups" title="Enabling Dynamic Reconfiguration of Upstream Groups"><i class="fas fa-link fa-xs"></i></a>
</h3><p>With NGINXPlus, you can reconfigure loadbalanced server groups (both HTTP and TCP/UDP) dynamically using either DNS or the NGINXPlus API introduced in <span style="white-space: nowrap;">NGINX Plus R13</span>. See the NGINXPlus AdminGuide for a more detailed discussion of the <a href="../../../admin-guide/load-balancer/http-load-balancer/#configuring-http-load-balancing-using-dns">DNS</a> and <a href="http://localhost:1313/nginx/admin-guide/load-balancer/dynamic-configuration-api/">API</a> methods.</p>
<h4 
id="configuring-the-api-method">Configuring the API Method  <a class="headerlink float-right" href="#configuring-the-api-method" title="Configuring the API Method"><i class="fas fa-link fa-xs"></i></a>
</h4><p>To enable dynamic reconfiguration of your upstream group of Node.js app servers using the NGINXPlus API, you need to grant secured access to it. You can use the API to add or remove servers, dynamically alter their weights, and set their status as <code>primary</code>, <code>backup</code>, or <code>down</code>.</p>
<ol>
<li>
<p>Include the <code>zone</code> directive in the <strong>nodejs</strong> upstream group to create a shared memory zone for storing the group&rsquo;s configuration and runtime state, which makes the information available to all worker processes. (If you configured <a href="#session-persistence-advanced">advanced session persistence</a>, <a href="#health-checks">application health checks</a>, or <a href="#live-activity-monitoring">live activity monitoring</a>, you already made this change.)</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb42c4108&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb42c4108">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#zone" target="_blank" rel="noopener">zone</a></p>
</li>
<li>
<p>In the <code>server</code> block for HTTPS traffic (created in <a href="#virtual-servers">Configuring Virtual Servers for HTTP and HTTPS Traffic</a>), add a new <code>location</code> block for the NGINX Plus API, which enables dynamic reconfiguration among other features. It contains the <code>api</code> directive (<strong>api</strong> is also the conventional name for the location, as used here).</p>
<p>(If you configured <a href="#live-activity-monitoring">live activity monitoring</a> by downloading the <strong>status.conf</strong> file, it already includes this block.)</p>
<p>We strongly recommend that you restrict access to the location so that only authorized administrators can access the NGINXPlus API. The <a href="https://nginx.org/en/docs/http/ngx_http_access_module.html" target="_blank" rel="noopener">allow and deny</a> directives in the following example permit access only from the localhost address (127.0.0.1).</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb430d4e8&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb430d4e8">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/api</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">api</span> <span class="s">write=on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">allow</span> <span class="mi">127</span><span class="s">.0.0.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">deny</span> <span class="s">all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;server&#39; block for HTTPS traffic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">location</span> <span class="s">/api</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">api</span> <span class="s">write=on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">allow</span> <span class="mi">127</span><span class="s">.0.0.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">deny</span> <span class="s">all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive documentation: <a href="https://nginx.org/en/docs/http/ngx_http_access_module.html" target="_blank" rel="noopener">allow and deny</a>, <a href="https://nginx.org/en/docs/http/ngx_http_api_module.html#api" target="_blank" rel="noopener">api</a></p>
</li>
</ol>
<h4 
id="configuring-the-dns-method">Configuring the DNS Method  <a class="headerlink float-right" href="#configuring-the-dns-method" title="Configuring the DNS Method"><i class="fas fa-link fa-xs"></i></a>
</h4><p>In the <code>http</code> block, add the <code>resolver</code> directive pointing to your DNS server and then add the <code>resolve</code> parameter to the <code>server</code> directive in the <strong>nodejs</strong> <code>upstream</code> block, which instructs NGINXPlus to periodically reresolve the domain name (<strong>example.com</strong> here) with DNS:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb4340168&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb4340168">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">resolver</span> <span class="s">&lt;IP-address-of-DNS-server&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="s">example.com</span> <span class="s">resolve</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">resolver</span> <span class="s">&lt;IP-address-of-DNS-server&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="s">example.com</span> <span class="s">resolve</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Directive and parameter documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#resolve" target="_blank" rel="noopener">resolve</a>, <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#resolver" target="_blank" rel="noopener">resolver</a></p>
<p><a href="https://www.nginx.com/blog/nginx-plus-r9-released/#dns-srv" target="_blank" rel="noopener">NGINXPlus Release9</a> and later can also use the additional information in DNS <code>SRV</code> records, such as the port number. Include the <code>service</code> parameter to the <code>server</code> directive, along with the <code>resolve</code> parameter:</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb4364388&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb4364388">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">resolver</span> <span class="s">&lt;IP-address-of-DNS-server&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="s">example.com</span> <span class="s">service=http</span> <span class="s">resolve</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="c1"># In the &#39;http&#39; block
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">resolver</span> <span class="s">&lt;IP-address-of-DNS-server&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="s">example.com</span> <span class="s">service=http</span> <span class="s">resolve</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p>Parameter documentation: <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#service" target="_blank" rel="noopener">service</a></p>
<p><span id="full-configuration-enhanced"></span></p>
<h3 
id="full-configuration-for-enhanced-load-balancing">Full Configuration for Enhanced Load Balancing  <a class="headerlink float-right" href="#full-configuration-for-enhanced-load-balancing" title="Full Configuration for Enhanced Load Balancing"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The full configuration for enhanced load balancing appears here for your convenience. It goes in the <code>http</code> context. The complete file is available for <a href="https://www.nginx.com/resource/conf/nodejs-enhanced.conf" target="_blank" rel="noopener">download</a> from the NGINX website.</p>
<p>We recommend that you do not copy text directly from this document, but instead use the method described in <a href="#config-files">Creating and Modifying Configuration Files</a> to include these directives in your configuration namely, add an <code>include</code> directive to the <code>http</code> context of the main <strong>nginx.conf</strong> file to read in the contents of <strong>/etc/nginx/conf.d/nodejsenhanced.conf</strong>.</p>
<p><strong>Note:</strong> The <code>api</code> block in this configuration summary and the <a href="https://www.nginx.com/resource/conf/nodejs-enhanced.conf" target="_blank" rel="noopener">downloadable</a> <strong>nodejsenhanced.conf</strong> file is for the <a href="#reconfiguration-api">API method</a> of dynamic reconfiguration. If you want to use the <a href="#reconfiguration-dns">DNS method</a> instead, make the appropriate changes to the block. (You can also remove or comment out the directives for the NGINXPlus API in that case, but they do not conflict with using the DNS method and enable features other than dynamic reconfiguration.)</p>



<div class="code-block" data-mf="true" style="display: none;"><span class="code-type chroma">nginx</span><div class="code-container chroma">
        <button onclick="copyToClipBoard(this, &#34;id-18440f1fb43f6f30&#34;)" class="code-copy-button multi-line" type="button">Copy</button>
        <div class="highlight-v2" id="id-18440f1fb43f6f30">
            <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">proxy_cache_path</span> <span class="s">/tmp/NGINX_cache/</span> <span class="s">keys_zone=backcache:10m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">map</span> <span class="nv">$http_upgrade</span> <span class="nv">$connection_upgrade</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">default</span> <span class="s">upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">&#39;&#39;</span>      <span class="s">close</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">match</span> <span class="s">nodejs_check</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">status</span> <span class="mi">200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">header</span> <span class="s">Content-Type</span> <span class="p">~</span> <span class="sr">&#34;text/html&#34;;</span>
</span></span><span class="line"><span class="cl">    <span class="s">body</span> <span class="p">~</span> <span class="sr">&#34;Hello</span> <span class="s">world&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Health-monitored upstream groups must have a zone defined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># List of Node.js application servers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span> <span class="s">slow_start=30s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span> <span class="s">slow_start=30s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Session persistence using sticky cookie
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">sticky</span> <span class="s">cookie</span> <span class="s">srv_id</span> <span class="s">expires=1h</span> <span class="s">domain=.example.com</span> <span class="s">path=/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Redirect all HTTP requests to HTTPS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://</span><span class="nv">$server_name$request_uri</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">http2</span>  <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Required for NGINX Plus to provide extended status information
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">status_zone</span> <span class="s">nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate</span>            <span class="s">/etc/nginx/ssl/certificate-name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate_key</span>        <span class="s">/etc/nginx/ssl/private-key</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_session_cache</span>          <span class="s">shared:SSL:1m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_prefer_server_ciphers</span>  <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Return a 302 redirect to &#39;/webapp/&#39; when user requests &#39;/&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="p">=</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">return</span> <span class="mi">302</span> <span class="s">/webapp/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Load balance requests for &#39;/webapp/&#39; across Node.js app servers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_cache</span> <span class="s">backcache</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Set up active health checks
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kn">health_check</span> <span class="s">match=nodejs_check</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># WebSocket configuration
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/wstunnel/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_pass</span> <span class="s">https://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_set_header</span> <span class="s">Upgrade</span> <span class="nv">$http_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="nv">$connection_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Secured access to the NGINX Plus API
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/api</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">api</span> <span class="s">write=on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">allow</span> <span class="mi">127</span><span class="s">.0.0.1</span><span class="p">;</span> <span class="c1"># Permit access from localhost
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kn">deny</span> <span class="s">all</span><span class="p">;</span>        <span class="c1"># Deny access from everywhere else
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
        </div>
    </div>
</div><div id="code-block-v1" data-mf="false">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">proxy_cache_path</span> <span class="s">/tmp/NGINX_cache/</span> <span class="s">keys_zone=backcache:10m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">map</span> <span class="nv">$http_upgrade</span> <span class="nv">$connection_upgrade</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">default</span> <span class="s">upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">&#39;&#39;</span>      <span class="s">close</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">match</span> <span class="s">nodejs_check</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">status</span> <span class="mi">200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">header</span> <span class="s">Content-Type</span> <span class="p">~</span> <span class="sr">&#34;text/html&#34;;</span>
</span></span><span class="line"><span class="cl">    <span class="s">body</span> <span class="p">~</span> <span class="sr">&#34;Hello</span> <span class="s">world&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">upstream</span> <span class="s">nodejs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Health-monitored upstream groups must have a zone defined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">zone</span> <span class="s">nodejs</span> <span class="mi">64k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># List of Node.js application servers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">server</span> <span class="n">192.168.33.11</span><span class="p">:</span><span class="mi">8080</span> <span class="s">slow_start=30s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server</span> <span class="n">192.168.33.12</span><span class="p">:</span><span class="mi">8080</span> <span class="s">slow_start=30s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Session persistence using sticky cookie
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">sticky</span> <span class="s">cookie</span> <span class="s">srv_id</span> <span class="s">expires=1h</span> <span class="s">domain=.example.com</span> <span class="s">path=/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Redirect all HTTP requests to HTTPS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://</span><span class="nv">$server_name$request_uri</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">http2</span>  <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Required for NGINX Plus to provide extended status information
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">status_zone</span> <span class="s">nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate</span>            <span class="s">/etc/nginx/ssl/certificate-name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate_key</span>        <span class="s">/etc/nginx/ssl/private-key</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_session_cache</span>          <span class="s">shared:SSL:1m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_prefer_server_ciphers</span>  <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Return a 302 redirect to &#39;/webapp/&#39; when user requests &#39;/&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="p">=</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">return</span> <span class="mi">302</span> <span class="s">/webapp/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Load balance requests for &#39;/webapp/&#39; across Node.js app servers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/webapp/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_pass</span> <span class="s">http://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_cache</span> <span class="s">backcache</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Set up active health checks
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kn">health_check</span> <span class="s">match=nodejs_check</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># WebSocket configuration
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/wstunnel/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_pass</span> <span class="s">https://nodejs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_set_header</span> <span class="s">Upgrade</span> <span class="nv">$http_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="nv">$connection_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Secured access to the NGINX Plus API
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">location</span> <span class="s">/api</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">api</span> <span class="s">write=on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">allow</span> <span class="mi">127</span><span class="s">.0.0.1</span><span class="p">;</span> <span class="c1"># Permit access from localhost
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kn">deny</span> <span class="s">all</span><span class="p">;</span>        <span class="c1"># Deny access from everywhere else
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div><p><span id="resources"></span></p>
<h2 
id="resources">Resources  <a class="headerlink float-right" href="#resources" title="Resources"><i class="fas fa-link fa-xs"></i></a>
</h2><ul>
<li><a href="https://www.nginx.com/products/nginx" target="_blank" rel="noopener">NGINXPlus Overview</a></li>
<li><a href="http://localhost:1313/nginx/admin-guide/">NGINXPlus Admin Guide</a></li>
<li><a href="https://www.nginx.com/resources/wiki/" target="_blank" rel="noopener">NGINX Wiki</a></li>
</ul>
<p><em><a href="https://nodesource.com/" target="_blank" rel="noopener">NodeSource</a>, developers of N|Solid, contributed to this deployment guide.</em></p>
<h3 
id="revision-history">Revision History  <a class="headerlink float-right" href="#revision-history" title="Revision History"><i class="fas fa-link fa-xs"></i></a>
</h3><ul>
<li>Version 4 (May 2024)  Update about HTTP/2 support (the <a href="https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2" target="_blank" rel="noopener">http2</a> directive)</li>
<li>Version 3 (April 2018)  Updated information about the NGINXPlus API (NGINXPlusR13, NGINX Open Source1.13.4)</li>
<li>Version 2 (May 2017)  Update about HTTP/2 support (NGINXPlus R11 and later)</li>
<li>Version 1 (December 2016)  Initial version (NGINXPlus R11, NGINX 1.11.5)</li>
</ul>

        
        

        <hr>
  
        
        <div class="last-modified">
          
<div>
    <a href="https://github.com/nginx/documentation//tree/main/content/nginx/deployment-guides/load-balance-third-party/node-js.md" class="" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View source</a>
  </div>
  <div>
    <a href="https://github.com/nginx/documentation//edit/main/content/nginx/deployment-guides/load-balance-third-party/node-js.md" class="" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  </div>
  <div>
    <a href="https://github.com/nginx/documentation//issues/new?title=Load%20Balancing%20Node.js%20Application%20Servers%20with%20NGINX%20Open%20Source%20and%20NGINX%20Plus&amp;template=2-bug_report.md" class="" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create a new issue</a>
  </div>



        </div>
        

        
         
<script type='text/javascript'> 
    (function(){var g=function(e,h,f,g){ 
        this.get=function(a){
            for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){
                for(var d=c[b];" "==d.charAt(0);)
                    d=d.substring(1,d.length);
                    if(0==d.indexOf(a))
                        return d.substring(a.length,d.length)
            }
            return null
        }; 
        
        this.set=function(a,c){
            var b="",b=new Date;
            b.setTime(b.getTime()+6048E5);
            b="; expires="+b.toGMTString();
            document.cookie=a+"="+c+b+"; path=/; "
        }; 
        
        this.check=function(){
            var a=this.get(f);
            if(a)
                a=a.split(":");
            else if(100!=e)
                "v"==h&&(e=Math.random()>=e/100?0:100),
                a=[h,e,0],
                this.set(f,a.join(":"));
            else 
                return!0;
            var c=a[1];
            if(100==c)
                return!0;
            switch(a[0]){
                case "v":
                    return!1;
                case "r":
                    return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c
            }
            return!0
        }; 

        this.go=function(){
            if(this.check()){
                var a=document.createElement("script");
                a.type="text/javascript";
                a.src=g;
                document.body&&document.body.appendChild(a)
            }
        };

        this.start=function(){
            var t=this;
            "complete"!==document.readyState?window.addEventListener ?
                window.addEventListener("load",function(){t.go()},!1) : 
                window.attachEvent&&window.attachEvent("onload",function(){t.go()}):t.go()};
    }; 

    try{
        const project_id = window.location.hostname.includes("staging") ? "QSI_S_ZN_2YG73ads2zp5bN0" : "QSI_S_ZN_2QSTn2r41YlXrYk";
        const endpoint = window.location.hostname.includes("staging") ? "https://zn2yg73ads2zp5bn0-f5.siteintercept.qualtrics.com/SIE/?Q_ZID=ZN_2YG73ads2zp5bN0" : "https://zn2qstn2r41ylxryk-f5.siteintercept.qualtrics.com/SIE/?Q_ZID=ZN_2QSTn2r41YlXrYk";
        (new g(100,"r", project_id, endpoint)).start()
    }
    catch(i){}})();

    document.addEventListener("DOMContentLoaded", function () {
        document.querySelector(".qualtrics-feedback").id = window.location.hostname.includes("staging") ? "ZN_2YG73ads2zp5bN0" : "ZN_2QSTn2r41YlXrYk"
    });
</script>
<hr>
<div style="height: 60px;"></div>
<div class="qualtrics-feedback" id='ZN_2QSTn2r41YlXrYk'></div>


        

	
<div class="container flex">
	<ul class="next-prev-icon">

		
		
		<li style="flex:1; text-align: left; white-space: nowrap;"><a href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/microsoft-exchange/" class="" title="Previous -- Load Balancing Microsoft Exchange Servers with NGINX Plus "><svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M23.378 46.5L1.94 25.06C1.80067 24.9209 1.69014 24.7556 1.61472 24.5738C1.53931 24.3919 1.50049 24.1969 1.50049 24C1.50049 23.8031 1.53931 23.6081 1.61472 23.4262C1.69014 23.2444 1.80067 23.0791 1.94 22.94L23.378 1.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M45.878 46.5L24.44 25.06C24.3007 24.9209 24.1901 24.7556 24.1147 24.5738C24.0393 24.3919 24.0005 24.1969 24.0005 24C24.0005 23.8031 24.0393 23.6081 24.1147 23.4262C24.1901 23.2444 24.3007 23.0791 24.44 22.94L45.878 1.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a></li>
		

		
			<li style="flex:1; text-align: right; white-space: nowrap;"><a href="http://localhost:1313/nginx/deployment-guides/load-balance-third-party/oracle-e-business-suite/" class="" title="Next -- Load Balancing Oracle E-Business Suite with NGINX Plus"><svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.622 1.5L46.06 22.94C46.1993 23.0791 46.3099 23.2444 46.3853 23.4262C46.4607 23.6081 46.4995 23.8031 46.4995 24C46.4995 24.1969 46.4607 24.3919 46.3853 24.5738C46.3099 24.7556 46.1993 24.9209 46.06 25.06L24.622 46.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2.122 1.5L23.56 22.94C23.6993 23.0791 23.8099 23.2444 23.8853 23.4262C23.9607 23.6081 23.9995 23.8031 23.9995 24C23.9995 24.1969 23.9607 24.3919 23.8853 24.5738C23.8099 24.7556 23.6993 24.9209 23.56 25.06L2.122 46.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a></li>
		
		</ul>
	</div>

        </main>
        
          
            <div id="toc" class="col-md-3 d-none d-xl-block d-print-none nginx-toc align-top">
            <nav class="bd-links" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <h3 class="bd-toc-link">What's on This Page</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#about-nginx-open-source-and-nginx-plus">About NGINX Open Source and NGINX Plus</a></li>
    <li><a href="#about-nodejs">About Node.js</a></li>
    <li><a href="#prerequisites-and-system-requirements">Prerequisites and System Requirements</a>
      <ul>
        <li><a href="#about-sample-values-and-copying-of-text">About Sample Values and Copying of Text</a></li>
      </ul>
    </li>
    <li><a href="#configuring-an-ssltls-certificate-for-client-traffic">Configuring an SSL/TLS Certificate for Client Traffic</a>
      <ul>
        <li><a href="#generating-a-self-signed-certificate">Generating a Self-Signed Certificate</a></li>
        <li><a href="#generating-a-certificate-request">Generating a Certificate Request</a></li>
      </ul>
    </li>
    <li><a href="#creating-and-modifying-configuration-files">Creating and Modifying Configuration Files</a>
      <ul>
        <li><a href="#about-reloading-updated-configuration">About Reloading Updated Configuration</a></li>
      </ul>
    </li>
    <li><a href="#configuring-basic-load-balancing-with-nginx-open-source-or-nginx-plus">Configuring Basic Load Balancing with NGINX Open Source or NGINX Plus</a>
      <ul>
        <li><a href="#configuring-virtual-servers-for-http-and-https-traffic">Configuring Virtual Servers for HTTP and HTTPS Traffic</a></li>
        <li><a href="#configuring-basic-load-balancing">Configuring Basic Load Balancing</a></li>
        <li><a href="#configuring-basic-session-persistence">Configuring Basic Session Persistence</a></li>
        <li><a href="#configuring-proxy-of-websocket-traffic">Configuring Proxy of WebSocket Traffic</a></li>
        <li><a href="#configuring-content-caching">Configuring Content Caching</a></li>
        <li><a href="#configuring-http2-support">Configuring HTTP/2 Support</a></li>
        <li><a href="#full-configuration-for-basic-load-balancing">Full Configuration for Basic Load Balancing</a></li>
      </ul>
    </li>
    <li><a href="#configuring-enhanced-load-balancing-with-nginx-plus">Configuring Enhanced Load Balancing with NGINX Plus</a>
      <ul>
        <li><a href="#configuring-advanced-session-persistence">Configuring Advanced Session Persistence</a></li>
        <li><a href="#configuring-application-health-checks">Configuring Application Health Checks</a></li>
        <li><a href="#enabling-live-activity-monitoring">Enabling Live Activity Monitoring</a></li>
        <li><a href="#enabling-dynamic-reconfiguration-of-upstream-groups">Enabling Dynamic Reconfiguration of Upstream Groups</a></li>
        <li><a href="#full-configuration-for-enhanced-load-balancing">Full Configuration for Enhanced Load Balancing</a></li>
      </ul>
    </li>
    <li><a href="#resources">Resources</a>
      <ul>
        <li><a href="#revision-history">Revision History</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</nav>
            </div>
          
        
        
      </div>
    </section>
  </section>
</div>




      </div>
  </section>

    <footer id="footer">
      
      <footer id="footer">
  <div class="container-fluid">
    <div class="row align-items-center">
      <div class="col-md-6 d-md-flex">
        <img class="nginx-logo-footer" src="http://localhost:1313/images/icons/NGINX-Part-of-F5-horiz-all-white-525x208@2x.png"/>
      </div>
    </div>

    
    <div class="row d-print-none d-none d-md-flex">
      <div class="col-md-3 d-none d-md-block">
        <span class="footer-head">Company</span>
        <ul class="footer-text">
          <li>
            <a
              href="https://www.f5.com/go/product/welcome-to-nginx"
              target="_blank"
              alt="Select to learn about F5 NGINX"
              >About F5 NGINX</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/company/events"
              target="_blank"
              alt="Select to learn about F5 events"
              >Events</a
            >
          </li>
        </ul>
        <br />
        <span class="footer-head">Resources</span>
        <ul class="footer-text">
          <li>
            <a
              href="https://www.f5.com/company/blog/nginx"
              target="_blank"
              alt="Select to visit the F5 NGINX blog"
              >Blog</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/go/faq/nginx-faq"
              target="_blank"
              alt="Select to visit the F5 NGINX frequently asked questions page"
              >FAQ</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/services"
              target="_blank"
              alt="Select to learn about F5 NGINX Support"
              >Professional Services</a
            >
          </li>
          <li>
            <a
              href="https://www.f5.com/learn/training"
              target="_blank"
              alt="Select to learn about F5 training offerings"
              >Training</a
            >
          </li>
        </ul>
      </div>

      <div class="col-md-3 d-none d-md-block">
        <span class="footer-head">Products</span>
        <ul class="footer-text">
          <li>
            <a
              title="F5 NGINX One"
              aria-label="F5 NGINX One"
              href="https://www.f5.com/products/nginx/one"
              >F5 NGINX One</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Plus"
              aria-label="F5 NGINX Plus"
              href="https://www.f5.com/products/nginx/nginx-plus"
              >F5 NGINX Plus</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX App Protect"
              aria-label="F5 NGINX App Protect"
              href="https://www.f5.com/products/nginx/nginx-app-protect"
              >F5 NGINX App Protect</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Instance Manager"
              aria-label="F5 NGINX Instance Manager"
              href="https://www.f5.com/products/nginx/instance-manager"
              >F5 NGINX Instance Manager</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Ingress Controller"
              aria-label="F5 NGINX Ingress Controller"
              href="https://www.f5.com/products/nginx/nginx-ingress-controller"
              >F5 NGINX Ingress Controller</a
            >
          </li>
          <li>
            <a
              title="F5 NGINX Gateway Fabric"
              aria-label="F5 NGINX Gateway Fabric"
              href="https://www.f5.com/products/nginx/nginx-gateway-fabric"
              >F5 NGINX Gateway Fabric</a
            >
          </li>
          <li>
            <a
              title="F5 NGINXaaS for Azure"
              aria-label="F5 NGINXaaS for Azure"
              href="https://www.f5.com/products/nginx/f5-nginxaas-for-azure"
              >F5 NGINXaaS for Azure</a
            >
          </li>
        </ul>
      </div>

      <div class="col-md-3 d-none d-md-block">
        <span class="footer-head">NGINX on GitHub</span>
        <ul class="footer-text">
          <li>
            <a
              title="NGINX Open Source"
              aria-label="NGINX Open Source"
              href="https://github.com/nginx/nginx"
              ><span class="inner">NGINX Open Source</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Unit"
              aria-label="NGINX Unit"
              href="https://github.com/nginx/unit"
              ><span class="inner">NGINX Unit</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Amplify"
              aria-label="NGINX Amplify"
              href="https://github.com/nginxinc/nginx-amplify-agent"
              ><span class="inner">NGINX Amplify</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Agent"
              aria-label="NGINX Agent"
              href="https://github.com/nginx/Agent"
              ><span class="inner">NGINX Agent</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Kubernetes Ingress Controller"
              aria-label="NGINX Kubernetes Ingress Controller"
              href="https://github.com/nginxinc/kubernetes-ingress"
              ><span class="inner">NGINX Kubernetes Ingress Controller</span></a
            >
          </li>
          <li>
            <a
              title="NGINX Gateway Fabric"
              aria-label="NGINX Gateway Fabric"
              href="https://github.com/nginxinc/nginx-gateway-fabric"
              ><span class="inner">NGINX Gateway Fabric</span></a
            >
          </li>
        </ul>
      </div>

      <div class="col-md-2 d-none d-md-block">
        <span class="footer-head">Social</span>
        <ul class="footer-social">
          <li>
            <a
              href="https://www.facebook.com/nginxinc"
              title="facebook"
              aria-label="facebook"
              target="_blank"
              rel="noreferrer"
              ><i class="fa-brands fa-facebook" aria-hidden="true"></i>
            </a>
          </li>
          <li>
            <a
              href="https://twitter.com/nginx"
              title="X"
              aria-label="x"
              target="_blank"
              rel="noreferrer"
              ><i class="fa-brands fa-x-twitter" aria-hidden="true"></i
            ></a>
          </li>
          <li>
            <a
              href="https://www.linkedin.com/company/nginx"
              title="linkedin"
              aria-label="linkedin"
              target="_blank"
              rel="noreferrer"
              ><i class="fa-brands fa-linkedin" aria-hidden="true"></i>
            </a>
          </li>
          <li>
            <a
              href="https://www.youtube.com/user/NginxInc"
              title="youtube"
              aria-label="youtube"
              target="_blank"
              rel="noreferrer"
              alt="NGINX Youtube Channel"
              ><i class="fa-brands fa-square-youtube" aria-hidden="true"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="site-info footer-text">
      <div class="text-center">
        <p>
          <a href="https://www.f5.com/"
            ><img class="f5-logo-footer" src="http://localhost:1313/images/icons/Logo_F5.svg" alt="F5 logo"></a
          >
          2025 F5, Inc. All rights reserved.
        </p>
        <p>
          <a
            href="https://www.f5.com/company/policies/trademarks"
            rel="noopener"
            target="_blank"
            >Trademarks</a
          >
          <a
            href="https://www.f5.com/company/policies"
            rel="noopener"
            target="_blank"
            >Policies</a
          >
          <a href="https://docs.nginx.com/ossc">Open Source Components</a>
          <a
            href="https://www.f5.com/company/policies/privacy-notice"
            rel="noopener"
            target="_blank"
            >Privacy</a
          >
          <a
            href="https://www.f5.com/company/policies/F5-California-privacy-summary"
            rel="noopener"
            target="_blank"
            >California Privacy</a
          >
          <a
            href="https://www.f5.com/company/policies/privacy-notice#no-sell"
            rel="noopener"
            target="_blank"
            >Do Not Sell My Personal Information</a
          >
          <span id="teconsent-v1"></span>
        </p>
      </div>
    </div>
    
  </div>
  
</footer>

      
    </footer>

    <footer data-mf="true" id="footer-v2" style="display:none;">
      
      <div class="footer-layout">
    <div class="footer-f5-trademark">
        <img class="f5-logo-footer" src="http://localhost:1313/images/icons/Logo_F5.svg" alt="F5 logo">
        <p>2025 F5, Inc. All rights reserved. NGINX is a registered trademark of F5, Inc.</p>
    </div>
    <div class="footer-useful-links">
        <a
            href="https://www.f5.com/company/policies/trademarks"
            rel="noopener"
            target="_blank"
            >Trademarks
        </a>
        <a
            href="https://www.f5.com/company/policies"
            rel="noopener"
            target="_blank"
            >Policies
        </a>
        <a
            href="https://www.f5.com/company/policies/privacy-notice"
            rel="noopener"
            target="_blank"
            >Privacy
        </a>
        <a
            href="https://www.f5.com/company/policies/F5-California-privacy-summary"
            rel="noopener"
            target="_blank"
            >California Privacy
        </a>
        <a
            href="https://www.f5.com/company/policies/privacy-notice#no-sell"
            rel="noopener"
            target="_blank"
            >Do Not Sell My Personal Information
        </a>
        <span id="teconsent-v2"></span>
    </div>
</div>

      
    </footer>
  
<script src="/js/jquery-3-6-4.min.js" type="text/javascript" integrity=""></script>


<script src="/js/kube.min.a3a07cceb64989e2f0bf41653ab4d8346ba4312270eb5cc80d6afad3bf30a0ca9768aaa2559cb582e663332c541edab6a4068ef2e88b739fa425e2e870eb0aff.js" type="text/javascript" integrity="sha512-o6B8zrZJieLwv0FlOrTYNGukMSJw61zIDWr6078woMqXaKqiVZy1guZjMyxUHtq2pAaO8uiLc5&#43;kJeLocOsK/w=="></script>



<script src="/js/bootstrap.bundle.min.c15ed88f56a52190ea645094409cbce5537eaaf108972f777c840037b8aa0c508f12e70b09e345cf8af7e450a8f6ce96ae974340f8bcd316e58d707c063b6f72.js" type="text/javascript"
  integrity="sha512-wV7Yj1alIZDqZFCUQJy85VN&#43;qvEIly93fIQAN7iqDFCPEucLCeNFz4r35FCo9s6WrpdDQPi80xbljXB8Bjtvcg=="></script>



<script src="/js/code-copy.bb21b72280613039f1fabb11acc6a901c07caaee454933031066fbda6b5406fd31077a80ec913ba32261224d138bcbb4a34d27c51efae571c68d59282943b9a4.js" type="text/javascript"></script>



<script src="/js/code-copy-v2.71bcaee23ab00cb45dc944f321264e21d25bc1ec1ae76f9596286cb408ea5654b4ee016e7914cc2554b237114eeb467d39df18735311f2d28480b3ccd2feb4ad.js" type="text/javascript"></script>





<script
  type="module"
  src="https://static.cloud.coveo.com/atomic/v3.19.0/atomic.esm.js"
  integrity="sha512-VA9k6iDWhwxl8bwKUYPD63l93lGX7daV60k3yFxEt9EuEq4iWvsu5COq1mZ8OXKl0KCOFlUSDXS32Cy+YwbufQ=="
  crossorigin="anonymous">
</script>


<script class="coveo-script" src="https://static.cloud.coveo.com/searchui/v2.10104/0/js/CoveoJsSearch.Lazy.min.js"
  integrity="sha512-HxdDBIp5snbqtu1TPkBnXLKEvN9IPz3PeZW8zT9KfsflV9Ck822XDroDlpVbfCfXeiu8C0RDVn0fdu7aGy/H1g=="
  crossorigin="anonymous"></script>

<script src="https://static.cloud.coveo.com/searchui/v2.10104/0/js/templates/templates.js"
  integrity="sha512-CR0Yk/LIwgh1MsKqjecDp/r6F9ipKc6gA+4+E1pplT3N3r1pk+la/HaqyDiKtjOFwrwIIbIYBFrUJgPql93QHw=="
  crossorigin="anonymous"></script>






<script src="/js/coveo.min.4acfd205930e2d31230100f345e0463332eb3e3af1b4aa9a6e3131b0b2bac53566ae4d18b390066fce94c0c75d39b5e121d1291f81e5accc1a82d93da9f11b7f.js" integrity="sha512-Ss/SBZMOLTEjAQDzReBGMzLrPjrxtKqabjExsLK6xTVmrk0Ys5AGb86UwMddObXhIdEpH4HlrMwagtk9qfEbfw=="
  type="text/javascript"></script>


















<script src="/js/sidebar.min.6fed0180a23d01103c68ffb054a183fba5e7ba673de8c56d85857af964dcc0c11623ee09f6185207a373127cb2547ff9247ae3516ed47c67e1b58dbe71e9d576.js" type="text/javascript" integrity="sha512-b&#43;0BgKI9ARA8aP&#43;wVKGD&#43;6Xnumc96MVthYV6&#43;WTcwMEWI&#43;4J9hhSB6NzEnyyVH/5JHrjUW7UfGfhtY2&#43;cenVdg=="></script>
  


<script src="/js/site-dropdown.min.3bb49b6f7d25bcd4a2b008525bb8538d84237348bf618b40970ff6eca87119d68c326ca7ba04854ad102be36495fe1d70f1cb239916555b67dd17683dc283333.js" type="text/javascript" integrity="sha512-O7Sbb30lvNSisAhSW7hTjYQjc0i/YYtAlw/27KhxGdaMMmynugSFStECvjZJX&#43;HXDxyyOZFlVbZ90XaD3CgzMw=="></script>



<script src="/js/product-selector.min.b588249327fb12c7602fa08eb618560171f54e7348d6c1bacfdbf541f5e13023493f64f78fb6d4b9014892e5e4f0aaaee95b859bb37aa53bbe8c0e27e65167d1.js" type="text/javascript" integrity="sha512-tYgkkyf7EsdgL6COthhWAXH1TnNI1sG6z9v1QfXhMCNJP2T3j7bUuQFIkuXk8Kqu6VuFm7N6pTu&#43;jA4n5lFn0Q=="></script>



<script src="/js/sidebar-v2.min.3f906631e696b2c88883bfcfc62371165359130cfd118ceb49893ae0d8760dc38177ee3bb94a61dee45023115de8445f0b9fe48f933618ef7ba7b3180a05adbd.js" type="text/javascript" integrity="sha512-P5BmMeaWssiIg7/PxiNxFlNZEwz9EYzrSYk64Nh2DcOBd&#43;47uUph3uRQIxFd6ERfC5/kj5M2GO97p7MYCgWtvQ=="></script> 
  <div id="consent_blackbar"></div>
</body>
</html>


