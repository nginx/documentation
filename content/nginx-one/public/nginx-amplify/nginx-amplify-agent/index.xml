<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Using NGINX Amplify Agent on DEV -- docs-nginx-com</title>
    <link>http://localhost:1313/nginx-amplify/nginx-amplify-agent/</link>
    <description>Recent content in Using NGINX Amplify Agent on DEV -- docs-nginx-com</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <atom:link href="http://localhost:1313/nginx-amplify/nginx-amplify-agent/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>NGINX Amplify Agent Overview</title>
      <link>http://localhost:1313/nginx-amplify/nginx-amplify-agent/amplify-agent-overview/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/nginx-amplify/nginx-amplify-agent/amplify-agent-overview/</guid>
      <description>&lt;p&gt;F5 NGINX Amplify Agent is a compact application written in Python. Its role is to collect various metrics and metadata and send them securely to the backend for storage and visualization.&lt;/p&gt;&#xA;&lt;p&gt;You need to install NGINX Amplify Agent on all hosts you want to monitor.&lt;/p&gt;&#xA;&lt;p&gt;Once you install NGINX Amplify Agent, it will automatically begin sending metrics. You can expect to see real-time metrics in the NGINX Amplify web interface within about a minute.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Metadata and Metrics Collection</title>
      <link>http://localhost:1313/nginx-amplify/nginx-amplify-agent/metadata-metrics-collection/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/nginx-amplify/nginx-amplify-agent/metadata-metrics-collection/</guid>
      <description>&lt;p&gt;F5 NGINX Amplify Agent collects the following types of data:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;NGINX metrics.&lt;/strong&gt; NGINX Amplify Agent collects a lot of NGINX related metrics from &lt;a href=&#34;http://nginx.org/en/docs/http/ngx_http_stub_status_module.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;stub_status&lt;/a&gt;, the NGINX Plus status API, the NGINX log files, and from the NGINX process state.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;System metrics.&lt;/strong&gt; These are various key metrics describing the system, for example, CPU usage, memory usage, network traffic, etc.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;PHP-FPM metrics.&lt;/strong&gt; NGINX Amplify Agent can obtain metrics from the PHP-FPM pool status if it detects a running PHP-FPM main process.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;MySQL metrics.&lt;/strong&gt; NGINX Amplify Agent can obtain metrics from the MySQL global status set of variables.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;NGINX metadata.&lt;/strong&gt; This is what describes your NGINX instances, and it includes package data, build information, the path to the binary, build configuration options, etc. NGINX metadata also includes the NGINX configuration elements.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;System metadata.&lt;/strong&gt; This is the basic information about the OS environment where NGINX Amplify Agent runs. This can be the hostname, uptime, OS flavor, and other data.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;NGINX Amplify Agent will mostly use Python&amp;rsquo;s &lt;a href=&#34;https://github.com/giampaolo/psutil&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;psutil()&lt;/a&gt; to collect the metrics, but occasionally it may also invoke certain system utilities like &lt;em&gt;ps(1)&lt;/em&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Detecting and Monitoring NGINX Instances</title>
      <link>http://localhost:1313/nginx-amplify/nginx-amplify-agent/detecting-monitoring-instances/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/nginx-amplify/nginx-amplify-agent/detecting-monitoring-instances/</guid>
      <description>&lt;p&gt;F5 NGINX Amplify Agent is capable of detecting several types of NGINX instances:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Installed from a repository package&lt;/li&gt;&#xA;&lt;li&gt;Built and installed manually&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;A separate instance of NGINX, as seen by NGINX Amplify Agent, would be the following:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;A unique master process and its workers, started with an &lt;strong&gt;absolute path&lt;/strong&gt; to a distinct NGINX binary&lt;/li&gt;&#xA;&lt;li&gt;A master process running with a default config path; or with a custom path set in the command-line parameters&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;blockquote class=&#34;note&#34;&gt;&#xA;  &lt;div&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;br/&gt; NGINX Amplify Agent will try to detect and monitor all unique NGINX instances currently running on a host. Separate sets of metrics and metadata are collected for each unique NGINX instance.&lt;/div&gt;&#xA;&lt;/blockquote&gt;</description>
    </item>
    <item>
      <title>Configuring NGINX for Metric Collection</title>
      <link>http://localhost:1313/nginx-amplify/nginx-amplify-agent/configuring-metric-collection/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/nginx-amplify/nginx-amplify-agent/configuring-metric-collection/</guid>
      <description>&lt;p&gt;To monitor an NGINX instance, F5 NGINX Amplify Agent must &lt;a href=&#34;http://localhost:1313/nginx-amplify/nginx-amplify-agent/detecting-monitoring-instances/&#34;&gt;find the relevant NGINX master process&lt;/a&gt; and determine its key characteristics.&lt;/p&gt;&#xA;&lt;h2 &#xA;id=&#34;metrics-from-stub_status&#34;&gt;Metrics from stub_status  &lt;a class=&#34;headerlink float-right&#34; href=&#34;#metrics-from-stub_status&#34; title=&#34;Metrics from stub_status&#34;&gt;&lt;i class=&#34;fas fa-link fa-xs&#34;&gt;&lt;/i&gt;&lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;You must define &lt;a href=&#34;http://nginx.org/en/docs/http/ngx_http_stub_status_module.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;stub_status&lt;/a&gt; in your NGINX configuration for key NGINX graphs to appear in the web interface. If &lt;code&gt;stub_status&lt;/code&gt; is already enabled, NGINX Amplify Agent should be able to locate it automatically.&lt;/p&gt;&#xA;&lt;p&gt;If you&amp;rsquo;re using NGINX Plus, you must configure either the &lt;code&gt;stub_status&lt;/code&gt; module or the NGINX Plus &lt;a href=&#34;http://nginx.org/en/docs/http/ngx_http_api_module.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;API module&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Troubleshooting Metrics Collection</title>
      <link>http://localhost:1313/nginx-amplify/nginx-amplify-agent/troubleshooting-metrics-collection/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/nginx-amplify/nginx-amplify-agent/troubleshooting-metrics-collection/</guid>
      <description>&lt;p&gt;After you &lt;a href=&#34;http://localhost:1313/nginx-amplify/nginx-amplify-agent/install/installing-amplify-agent/&#34;&gt;install and start&lt;/a&gt; F5 NGINX Amplify Agent, it should start reporting right away, pushing aggregated data to the Amplify backend at regular 1 minute intervals. It&amp;rsquo;ll take about a minute for a new system to appear in the Amplify web interface.&lt;/p&gt;&#xA;&lt;p&gt;If you don&amp;rsquo;t see the new system or NGINX instance in the web interface, or (some) metrics aren&amp;rsquo;t being collected, please review the following:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;The NGINX Amplify Agent package has been successfully &lt;a href=&#34;http://localhost:1313/nginx-amplify/nginx-amplify-agent/install/installing-amplify-agent/&#34;&gt;installed&lt;/a&gt;, and no warnings were reported during the installation.&lt;/li&gt;&#xA;&lt;li&gt;The &lt;code&gt;amplify-agent&lt;/code&gt; process is running and updating its &lt;a href=&#34;http://localhost:1313/nginx-amplify/nginx-amplify-agent/install/configuring-amplify-agent/#agent-logfile&#34;&gt;log file&lt;/a&gt;.&lt;/li&gt;&#xA;&lt;li&gt;NGINX Amplify Agent is running under the same user as your NGINX worker processes.&lt;/li&gt;&#xA;&lt;li&gt;The NGINX instance is started with an absolute path. NGINX Amplify Agent &lt;strong&gt;can&amp;rsquo;t&lt;/strong&gt; detect NGINX instances launched with a relative path (e.g. &amp;ldquo;./nginx&amp;rdquo;).&lt;/li&gt;&#xA;&lt;li&gt;The &lt;a href=&#34;http://localhost:1313/nginx-amplify/nginx-amplify-agent/install/configuring-amplify-agent/#overriding-the-effective-user-id&#34;&gt;user ID that is used by NGINX Amplify Agent and the NGINX instance &lt;/a&gt;, can run &lt;code&gt;ps(1)&lt;/code&gt; to see all system processes. If &lt;code&gt;ps(1)&lt;/code&gt; is restricted for non-privileged users, NGINX Amplify Agent won&amp;rsquo;t be able to find and properly detect the NGINX master process.&lt;/li&gt;&#xA;&lt;li&gt;The time is set correctly. If the time on the system where NGINX Amplify Agent runs is ahead or behind the world&amp;rsquo;s clock, you won&amp;rsquo;t be able to see the graphs.&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;stub_status&lt;/code&gt; is &lt;a href=&#34;http://localhost:1313/nginx-amplify/nginx-amplify-agent/configuring-metric-collection/&#34;&gt;configured correctly&lt;/a&gt;, and the &lt;code&gt;stub_status module&lt;/code&gt; is included in the NGINX build (this can be confirmed with &lt;code&gt;nginx -V&lt;/code&gt;).&lt;/li&gt;&#xA;&lt;li&gt;NGINX &lt;a href=&#34;http://nginx.org/en/docs/http/ngx_http_log_module.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;access.log&lt;/a&gt; and &lt;a href=&#34;http://nginx.org/en/docs/ngx_core_module.html#error_log&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;error.log&lt;/a&gt; files are readable by the user &lt;code&gt;nginx&lt;/code&gt; (or by the &lt;a href=&#34;http://nginx.org/en/docs/ngx_core_module.html#user&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;user&lt;/a&gt; set in NGINX config).&lt;/li&gt;&#xA;&lt;li&gt;All NGINX configuration files are readable by NGINX Amplify Agent user ID (check owner, group, and permissions).&lt;/li&gt;&#xA;&lt;li&gt;Extra &lt;a href=&#34;http://localhost:1313/nginx-amplify/metrics-metadata/nginx-metrics/#additional-nginx-metrics&#34;&gt;configuration steps have been performed as required&lt;/a&gt; for the additional metrics to be collected.&lt;/li&gt;&#xA;&lt;li&gt;The system DNS resolver is correctly configured, and &lt;em&gt;receiver.amplify.nginx.com&lt;/em&gt; can be successfully resolved.&lt;/li&gt;&#xA;&lt;li&gt;Outbound TLS/SSL from the system to &lt;em&gt;receiver.amplify.nginx.com&lt;/em&gt; is not restricted. This can be confirmed with &lt;code&gt;curl(1)&lt;/code&gt;. &lt;a href=&#34;http://localhost:1313/nginx-amplify/nginx-amplify-agent/install/configuring-amplify-agent/#setting-up-a-proxy&#34;&gt;Configure a proxy server&lt;/a&gt; for NGINX Amplify Agent if required.&lt;/li&gt;&#xA;&lt;li&gt;&lt;em&gt;selinux(8)&lt;/em&gt;, &lt;em&gt;apparmor(7)&lt;/em&gt; or &lt;a href=&#34;https://grsecurity.net&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;grsecurity&lt;/a&gt; are not interfering with the metric collection. E.g., for &lt;em&gt;selinux&lt;/em&gt;(8)* review &lt;strong&gt;/etc/selinux/config&lt;/strong&gt;. Try &lt;code&gt;setenforce 0&lt;/code&gt; temporarily and see if it improves the situation for certain metrics.&lt;/li&gt;&#xA;&lt;li&gt;Some VPS providers use hardened Linux kernels that may restrict non-root users from accessing &lt;em&gt;/proc&lt;/em&gt; and &lt;em&gt;/sys&lt;/em&gt;. Metrics describing system and NGINX disk I/O are usually affected. There is no easy workaround except for allowing NGINX Amplify Agent to run as &lt;code&gt;root&lt;/code&gt;. Sometimes fixing permissions for &lt;em&gt;/proc&lt;/em&gt; and &lt;em&gt;/sys/block&lt;/em&gt; may work.&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>NGINX Configuration Analysis</title>
      <link>http://localhost:1313/nginx-amplify/nginx-amplify-agent/configuration-analysis/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/nginx-amplify/nginx-amplify-agent/configuration-analysis/</guid>
      <description>&lt;p&gt;F5 NGINX Amplify Agent can automatically find all relevant NGINX configuration files, parse them, extract their logical structure, and send the associated JSON data to the Amplify backend for further analysis and reporting. For more information on configuration analysis, please see the &lt;a href=&#34;http://localhost:1313/nginx-amplify/user-interface/analyzer/&#34;&gt;Analyzer&lt;/a&gt;) documentation.&lt;/p&gt;&#xA;&lt;p&gt;After NGINX Amplify Agent finds a particular NGINX configuration, it then automatically starts to keep track of its changes. When a change is detected with NGINX — for example, a master process restarts, or the NGINX config is edited, an update is sent to the Amplify backend.&lt;/p&gt;</description>
    </item>
    <item>
      <title>NGINX Amplify Agent Source Code</title>
      <link>http://localhost:1313/nginx-amplify/nginx-amplify-agent/source-code/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/nginx-amplify/nginx-amplify-agent/source-code/</guid>
      <description>&lt;p&gt;F5 NGINX Amplify Agent is an open source application. It is licensed under the &lt;a href=&#34;https://github.com/nginxinc/nginx-amplify-agent/blob/master/LICENSE&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;2-clause BSD license&lt;/a&gt;, and is available here:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Sources: &lt;a href=&#34;https://github.com/nginxinc/nginx-amplify-agent&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/nginxinc/nginx-amplify-agent&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Public package repository: &lt;a href=&#34;http://packages.amplify.nginx.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://packages.amplify.nginx.com&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Install script for Linux: &lt;a href=&#34;https://github.com/nginxinc/nginx-amplify-agent/raw/master/packages/install.sh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/nginxinc/nginx-amplify-agent/raw/master/packages/install.sh&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;A script to install NGINX Amplify Agent when the package is not available: &lt;a href=&#34;https://raw.githubusercontent.com/nginxinc/nginx-amplify-agent/master/packages/install-source.sh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://raw.githubusercontent.com/nginxinc/nginx-amplify-agent/master/packages/install-source.sh&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
  </channel>
</rss>
