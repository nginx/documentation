(()=>{function e(e){const t=e.split(".");if(t.length!==3)return!0;const[r,n]=t,s=atob(n),o=JSON.parse(s),i=Math.floor(Date.now()/1e3),a=o.exp;return i>=a}async function t(){const e=await fetch(window.location.origin+"/api/v1/auth/search_token");return e.json()}async function n(){await customElements.whenDefined("atomic-search-interface");const n=localStorage.getItem("coveo_jwt_v1"),s=localStorage.getItem("coveo_org_id_v1");let o={token:n,org_id:s};(n===null||s===null||e(n))&&(o=await t(),localStorage.setItem("coveo_jwt_v1",o.token),localStorage.setItem("coveo_org_id_v1",o.org_id));const i=document.querySelector("#search-v2"),a=document.querySelector("#search-standalone-header"),r=document.querySelector("#search-standalone-sidebar"),c=document.querySelector("#sidebar-layout");i?(await i.initialize({accessToken:n,organizationId:s,analytics:{analyticsMode:"legacy"},preprocessRequest:(e)=>{const s=JSON.parse(e.body);return s.q=`<@- ${s.q} -@>`,e.body=JSON.stringify(s),e}}),await i.executeFirstSearch()):c&&(await r.initialize({accessToken:n,organizationId:s,analytics:{analyticsMode:"legacy"},preprocessRequest:(e)=>{const s=JSON.parse(e.body);return s.q=`<@- ${s.q} -@>`,e.body=JSON.stringify(s),e}}),await r.executeFirstSearch()),await a.initialize({accessToken:n,organizationId:s,analytics:{analyticsMode:"legacy"},preprocessRequest:(e)=>{const s=JSON.parse(e.body);return s.q=`<@- ${s.q} -@>`,e.body=JSON.stringify(s),e}}),await a.executeFirstSearch()}async function s(){const o=localStorage.getItem("coveo_jwt_v1"),a=localStorage.getItem("coveo_org_id_v1");let n={token:o,org_id:a};(o===null||a===null||e(o))&&(n=await t(),localStorage.setItem("coveo_jwt_v1",n.token),localStorage.setItem("coveo_org_id_v1",n.org_id)),Coveo.SearchEndpoint.configureCloudV2Endpoint(n.org_id,n.token,`https://${n.org_id}.org.coveo.com/rest/search`);const r=document.querySelector(".CoveoAnalytics");if(r){const e=`https://${n.org_id}.analytics.org.coveo.com/rest/ua`;r.setAttribute("data-endpoint",e)}const s=document.getElementById("search"),c=document.getElementById("searchbox");Coveo.initSearchbox(c,"/search.html");const i=document.querySelector("#reset_btn");i&&(i.onclick=()=>{document.querySelector(".coveo-facet-header-eraser").click()}),Coveo.$$(s).on("querySuccess",()=>{i.style.display="block"}),Coveo.$$(s).on("afterComponentsInitialization",()=>{setTimeout(()=>{document.querySelector(".CoveoOmnibox input").value=Coveo.state(s,"q")},1e3)}),Coveo.$("#search").on("newResultsDisplayed",(e)=>{for(let t=0;t<e.target.lastChild.children.length;t++)Coveo.$(".CoveoResultLink").removeAttr("title")}),Coveo.init(s,{f5_product_module:{dependsOn:"@f5_product",dependsOnCondition:e=>{const t=e.options.id,n="NGINX Management Suite",s=e.queryStateModel.get(`f:${t}`);return s.includes(n)}}})}document.addEventListener("DOMContentLoaded",async()=>{localStorage.getItem("useNewTheme")==="true"?n():s()})})()