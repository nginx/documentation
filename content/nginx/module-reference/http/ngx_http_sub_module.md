---
title: ngx_http_sub_module
description: ngx_http_sub_module
toc: true
nd-org-source: http/ngx_http_sub_module.xml
nd-commercial: false
nd-commercial-partial: false
---


<!--
      ********************************************************************************
      üõë WARNING: AUTOGENERATED FILE - DO NOT EDIT üõë This Markdown file was
      automatically generated from the source XML documentation. Any manual
      changes made directly to this file will be overwritten. To request or
      suggest changes, please edit the source XML files instead.
      https://github.com/nginx/nginx.org/tree/main/xml/en
      ********************************************************************************
      -->


The `ngx_http_sub_module` module is a filter
that modifies a response by replacing one specified string by another.

This module is not built by default, it should be enabled with the
`--with-http_sub_module`
configuration parameter.
## Example Configuration


```nginx 
location / {
    sub_filter '<a href="http://127.0.0.1:8080/'  '<a href="https://$host/';
    sub_filter '<img src="http://127.0.0.1:8080/' '<img src="https://$host/';
    sub_filter_once on;
}
 ```

## Directives

### sub_filter

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>sub_filter</strong> <i>string</i> <i>replacement</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td>
      ‚Äî
    </td>
</tr><tr>
<th>Context: </th>
<td><code>http</code>, <code>server</code>, <code>location</code></td>
</tr>

{{< /ngx-directive >}}


Sets a string to replace and a replacement string.
The string to replace is matched ignoring the case.
The string to replace (1.9.4) and replacement string can contain variables.
Several `sub_filter` directives
can be specified on the same configuration level (1.9.4).
These directives are inherited from the previous configuration level
if and only if there are no `sub_filter` directives
defined on the current level.
### sub_filter_last_modified

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>sub_filter_last_modified</strong> <i>on</i> <i>|</i> <i>off</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td><pre>sub_filter_last_modified off;</pre></td>
</tr><tr>
<th>Context: </th>
<td><code>http</code>, <code>server</code>, <code>location</code></td>
</tr>

{{< /ngx-directive >}}

_This directive appeared in version 1.5.1._


Allows preserving the `Last-Modified` header field
from the original response during replacement
to facilitate response caching.

By default, the header field is removed as contents of the response
are modified during processing.
### sub_filter_once

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>sub_filter_once</strong> <i>on</i> <i>|</i> <i>off</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td><pre>sub_filter_once on;</pre></td>
</tr><tr>
<th>Context: </th>
<td><code>http</code>, <code>server</code>, <code>location</code></td>
</tr>

{{< /ngx-directive >}}


Indicates whether to look for each string to replace
once or repeatedly.
### sub_filter_types

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>sub_filter_types</strong> <i>mime-type</i> <i>...</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td><pre>sub_filter_types text/html;</pre></td>
</tr><tr>
<th>Context: </th>
<td><code>http</code>, <code>server</code>, <code>location</code></td>
</tr>

{{< /ngx-directive >}}


Enables string replacement in responses with the specified MIME types
in addition to ‚Äú`text/html`‚Äù.
The special value ‚Äú`*`‚Äù matches any MIME type (0.8.29).
