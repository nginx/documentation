---
title: ngx_http_internal_redirect_module
description: ngx_http_internal_redirect_module
toc: true
nd-org-source: http/ngx_http_internal_redirect_module.xml
nd-commercial: true
nd-commercial-partial: false
---


<!--
      ********************************************************************************
      ðŸ›‘ WARNING: AUTOGENERATED FILE - DO NOT EDIT ðŸ›‘ This Markdown file was
      automatically generated from the source XML documentation. Any manual
      changes made directly to this file will be overwritten. To request or
      suggest changes, please edit the source XML files instead.
      https://github.com/nginx/nginx.org/tree/main/xml/en
      ********************************************************************************
      -->


The `ngx_http_internal_redirect_module` module (1.23.4) allows
making an internal redirect.
In contrast to
[rewriting URIs]({{< relref "ngx_http_rewrite_module" >}}),
the redirection is made after checking
[request]({{< relref "ngx_http_limit_req_module" >}}) and
[connection]({{< relref "ngx_http_limit_conn_module" >}}) processing limits,
and [access]({{< relref "ngx_http_access_module" >}}) limits.

> This module is available as part of our commercial subscription .

## Example Configuration


```nginx 
limit_req_zone $jwt_claim_sub zone=jwt_sub:10m rate=1r/s;

server {
    location / {
        auth_jwt          "realm";
        auth_jwt_key_file key.jwk;

        internal_redirect @rate_limited;
    }

    location @rate_limited {
        internal;

        limit_req  zone=jwt_sub burst=10;
        proxy_pass http://backend;
    }
}
 ```


The example implements
[per-user](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.2)[rate limiting]({{< relref "ngx_http_limit_req_module" >}}).
Implementation without [internal_redirect](#internal_redirect)
is vulnerable to DoS attacks by unsigned JWTs, as normally the
[limit_req]({{< relref "ngx_http_limit_req_module#limit_req" >}})
check is performed
[before]({{< relref "../dev/development_guide#http_phases" >}})[auth_jwt]({{< relref "ngx_http_auth_jwt_module#auth_jwt" >}}) check.
Using [internal_redirect](#internal_redirect)
allows reordering these checks.
## Directives

### internal_redirect

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>internal_redirect</strong> <i>uri</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td>
      â€”
    </td>
</tr><tr>
<th>Context: </th>
<td><code>server</code>, <code>location</code></td>
</tr>

{{< /ngx-directive >}}


Sets the URI for internal redirection of the request.
It is also possible to use a
[named location]({{< relref "ngx_http_core_module#location_named" >}})
instead of the URI.
The `uri` value can contain variables.
If the `uri` value is empty,
then the redirect will not be made.
