---
title: ngx_mgmt_module
description: ngx_mgmt_module
toc: true
nd-org-source: ngx_mgmt_module.xml
nd-commercial: true
nd-commercial-partial: false
---


<!--
      ********************************************************************************
      ðŸ›‘ WARNING: AUTOGENERATED FILE - DO NOT EDIT ðŸ›‘ This Markdown file was
      automatically generated from the source XML documentation. Any manual
      changes made directly to this file will be overwritten. To request or
      suggest changes, please edit the source XML files instead.
      https://github.com/nginx/nginx.org/tree/main/xml/en
      ********************************************************************************
      -->


The `ngx_mgmt_module` module enables
NGINX Plus license verification and usage reporting.
This is mandatory for each NGINX Plus instance since 1.27.2 (
[NGINX Plus R33](https://docs.nginx.com/nginx/releases/#r33)).

A JWT license file named `license.jwt`
should be located at
`/etc/nginx/` for Linux or
`/usr/local/etc/nginx/` for FreeBSD
or at the path specified by the [license_token](#license_token) directive.
The license file is available from
[MyF5](https://my.f5.com).

Usage report is sent directly or via [proxy](#proxy)
to F5 licensing endpoint
[usage_report](#usage_report) using the
[ssl_verify](#ssl_verify) connection.
Optionally, in network-restricted environments
reporting can be [usage_report](#usage_report) to
[F5 NGINX
Instance Manager](https://docs.nginx.com/nginx-management-suite/about/) from which the report can be sent
to F5 licensing endpoint.

By default, if the [enforce_initial_report](#enforce_initial_report)
is not received by F5 licensing endpoint, nginx will stop processing traffic.

Automatic license renewal is supported since 1.29.0
([NGINX Plus R35](https://docs.nginx.com/nginx/releases/#r35))
for instances that report directly to the F5 licensing endpoint.
On renewal, NGINX downloads the updated JWT from F5 licensing endpoint
and applies it without
configuration [reload]({{< relref "switches" >}}).
The updated license is stored
in the [state_path](#state_path) directory.

> This module is available as part of our commercial subscription .

## Example Configuration


```nginx 
mgmt {
    # in case if custom path is required
    license_token custom/file/path/license.jwt;

    # in case of reporting to NGINX Instance Manager
    usage_report endpoint=NIM_FQDN;
}
 ```

## Directives

### mgmt

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>mgmt</strong> { ... }</code><br/></td>
</tr><tr>
<th>Default: </th>
<td>
      â€”
    </td>
</tr><tr>
<th>Context: </th>
<td><code>main</code></td>
</tr>

{{< /ngx-directive >}}


Provides the configuration file context in which
usage reporting and license management directives
are specified.
### enforce_initial_report

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>enforce_initial_report</strong> <i>on</i> <i>|</i> <i>off</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td><pre>enforce_initial_report on;</pre></td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}

_This directive appeared in version 1.27.2._


Enables or disables the 180-day grace period
for sending the initial usage report.

The initial usage report is sent immediately
upon nginx first start after installation.
By default, if the initial report is not received by F5 licensing endpoint,
nginx stops processing traffic until the report is successfully delivered.
Setting the directive value to `off` enables
the 180-day grace period during which
the initial usage report must be received by F5 licensing endpoint.
### license_token

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>license_token</strong> <i>file</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td><pre>license_token license.jwt;</pre></td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}

_This directive appeared in version 1.27.2._


Specifies a JWT license `file`.
By default, the `license.jwt` file is expected to be at
`/etc/nginx/` for Linux or at
`/usr/local/etc/nginx/` for FreeBSD.
### proxy

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>proxy</strong> <i>host</i> <i>:</i> <i>port</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td>
      â€”
    </td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}

_This directive appeared in version 1.27.4._


Sets the HTTP CONNECT proxy
used for sending the usage report.
### proxy_username

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>proxy_username</strong> <i>string</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td>
      â€”
    </td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}

_This directive appeared in version 1.27.4._


Sets the user name used for authentication on
the [proxy](#proxy).
### proxy_password

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>proxy_password</strong> <i>string</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td>
      â€”
    </td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}

_This directive appeared in version 1.27.4._


Sets the password used for authentication on
the [proxy](#proxy).

The password is sent unencrypted by default.
If the proxy supports TLS, the connection to the proxy can be
protected with the [stream]({{< relref "/nginx/module-reference/stream/ngx_stream_proxy_module" >}})
module:

```nginx 
mgmt {
    proxy          127.0.0.1:8080;
    proxy_username <name>;
    proxy_password <password>;
}

stream {
    server {
        listen 127.0.0.1:8080;
        
        proxy_ssl                     on;
        proxy_ssl_verify              on;
        proxy_ssl_trusted_certificate <proxy_ca_file>;

        proxy_pass <proxy_host>:<proxy_port>;
    }
}
 ```

### resolver

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>resolver</strong> <i>address</i> <i>... [</i> <i>valid</i> <i>=</i> <i>time</i> <i>] [</i> <i>ipv4</i> <i>=</i> <i>on</i> <i>|</i> <i>off</i> <i>] [</i> <i>ipv6</i> <i>=</i> <i>on</i> <i>|</i> <i>off</i> <i>] [</i> <i>status_zone</i> <i>=</i> <i>zone</i> <i>]</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td>
      â€”
    </td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}


Configures name servers used to resolve usage reporting endpoint name.
By default, the system resolver is used.

See [resolver]({{< relref "/nginx/module-reference/http/ngx_http_core_module#resolver" >}}) for details.
### ssl_crl

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>ssl_crl</strong> <i>file</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td>
      â€”
    </td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}


Specifies a `file` with revoked certificates (CRL)
in the PEM format used to [ssl_verify](#ssl_verify)
the certificate of the usage reporting endpoint.
### ssl_trusted_certificate

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>ssl_trusted_certificate</strong> <i>file</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td><pre>ssl_trusted_certificate system CA bundle;</pre></td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}


Specifies a `file` with trusted CA certificates in the PEM format
used to [ssl_verify](#ssl_verify)
the certificate of the usage reporting endpoint.
### ssl_verify

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>ssl_verify</strong> <i>on</i> <i>|</i> <i>off</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td><pre>ssl_verify on;</pre></td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}


Enables or disables verification of the usage reporting endpoint certificate.

> Before 1.27.2, the default value was `off` .

### state_path

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>state_path</strong> <i>path</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td>
      â€”
    </td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}

_This directive appeared in version 1.27.2._


Defines a directory for storing state files
(`nginx-mgmt-*`)
created by the `ngx_mgmt_module` module.
The default directory
for Linux is `/var/lib/nginx/state`,
for FreeBSD is `/var/db/nginx/state`.
### usage_report

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>usage_report</strong> <i>[</i> <i>endpoint</i> <i>=</i> <i>address</i> <i>] [</i> <i>interval</i> <i>=</i> <i>time</i> <i>]</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td><pre>usage_report endpoint=product.connect.nginx.com interval=1h;</pre></td>
</tr><tr>
<th>Context: </th>
<td><code>mgmt</code></td>
</tr>

{{< /ngx-directive >}}


Sets the `address` and `port`
of the usage reporting endpoint.
The `interval` parameter sets an interval between
two consecutive reports.

> Before 1.27.2, the default values were `nginx-mgmt.local` and `30m` .

