---
title: ngx_stream_mqtt_preread_module
description: ngx_stream_mqtt_preread_module
toc: true
nd-org-source: stream/ngx_stream_mqtt_preread_module.xml
nd-commercial: true
nd-commercial-partial: false
---


<!--
      ********************************************************************************
      ðŸ›‘ WARNING: AUTOGENERATED FILE - DO NOT EDIT ðŸ›‘ This Markdown file was
      automatically generated from the source XML documentation. Any manual
      changes made directly to this file will be overwritten. To request or
      suggest changes, please edit the source XML files instead.
      https://github.com/nginx/nginx.org/tree/main/xml/en
      ********************************************************************************
      -->


The `ngx_stream_mqtt_preread_module` module (1.23.4) allows
extracting information from the CONNECT message
of the Message Queuing Telemetry Transport protocol (MQTT) versions
[3.1.1](https://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html)
and
[5.0](https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html),
for example, a username or a client ID.

> This module is available as part of our commercial subscription .

## Example Configuration


```nginx 
mqtt_preread on;
return       $mqtt_preread_clientid;
 ```

## Directives

### mqtt_preread

{{< ngx-directive >}}

<tr>
<th>Syntax: </th>
<td><code><strong>mqtt_preread</strong> <i>on</i> <i>|</i> <i>off</i>;</code><br/></td>
</tr><tr>
<th>Default: </th>
<td><pre>mqtt_preread off;</pre></td>
</tr><tr>
<th>Context: </th>
<td><code>stream</code>, <code>server</code></td>
</tr>

{{< /ngx-directive >}}


Enables extracting information from the MQTT CONNECT message at
the [preread]({{< relref "stream_processing#preread_phase" >}}) phase.
## Embedded Variables



### `$mqtt_preread_clientid`


the `clientid` value from the CONNECT message



### `$mqtt_preread_username`


the `username` value from the CONNECT message



